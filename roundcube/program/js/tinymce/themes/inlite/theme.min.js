!function(y){"use strict";function n(t){var e=x.DOM.getViewPort();return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function i(t){var e=t.getBoundingClientRect();return n({x:e.left,y:e.top,w:Math.max(t.clientWidth,t.offsetWidth),h:Math.max(t.clientHeight,t.offsetHeight)})}function e(t,e){return{id:t,predicate:e}}function r(e){return function(t){return typeof t===e}}function t(t){return Array.isArray(t)}function o(t,e){if(e(t))return 1;throw new Error("Default value doesn't match requested type.")}function a(t,e){return{rect:t,position:e}}function l(t,e){return{x:e.x,y:e.y,w:t.w,h:t.h}}function s(t,e,n,i,r){var o,s,i={x:i.x,y:i.y,w:i.w+(i.w<r.w+n.w?r.w:0),h:i.h+(i.h<r.h+n.h?r.h:0)},t=Y.findBestRelativePosition(r,n,i,t);return n=Y.clamp(n,i),t?(o=Y.relativePosition(r,n,t),s=l(r,o),a(s,t)):(n=Y.intersect(i,n))?(s=(t=Y.findBestRelativePosition(r,n,i,e))?(o=Y.relativePosition(r,n,t),l(r,o)):l(r,n),a(s,t)):null}function u(t){var e,n,i=t.contextToolbars;return R.flatten([i||[],(e=t,n="img",{predicate:function(t){return e.dom.is(t,n)},id:"image",items:"alignleft aligncenter alignright"})])}function d(t,e){var n,i;return i=(n=t).selection.getNode(),i=n.dom.getParents(i,"*"),e=P(e),(e=C(t,[N(i[0],e),D("text"),A(i,"insert"),O(i,e)]))&&e.rect?e:null}function f(n,i){return function(){var t,e;n.removed||(e=n,y.document.activeElement!==e.getBody())||(t=u(n),(e=d(n,t))?i.show(n,e.id,e.rect,t):i.hide())}}function c(t,e){var n,i,r,o,s,a=w.throttle(f(t,e),0),l=w.throttle((r=f(n=t,i=e),function(){n.removed||i.inForm()||r()}),0),c=(s=e,function(){var t=u(o),t=d(o,t);t&&s.reposition(o,t.id,t.rect)});(o=t).on("blur hide ObjectResizeStart",e.hide),t.on("click",a),t.on("nodeChange mouseup",l),t.on("ResizeEditor keyup",a),t.on("ResizeWindow",c),x.DOM.bind(b.container,"scroll",c),t.on("remove",function(){x.DOM.unbind(b.container,"scroll",c),e.remove()}),t.shortcuts.add("Alt+F10,F10","",e.focus)}function h(t,e){return et(t,function(){var n,i;c(t,e),i=e,(n=t).shortcuts.remove("meta+k"),n.shortcuts.add("meta+k","",function(){var t=u(n),e=C(n,[D("quicklink")]);e&&i.show(n,e.id,e.rect,t)})}),{}}function m(){}function g(t){return function(){return t}}var p,v=tinymce.util.Tools.resolve("tinymce.ThemeManager"),b=tinymce.util.Tools.resolve("tinymce.Env"),x=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),w=tinymce.util.Tools.resolve("tinymce.util.Delay"),_=function(t){return t.reduce(function(t,e){return Array.isArray(e)?t.concat(_(e)):t.concat(e)},[])},R={flatten:_},C=function(t,e){for(var n=0;n<e.length;n++){var i=(0,e[n])(t);if(i)return i}return null},k=function(t,e){return{id:t,rect:e}},E=function(t){return{x:t.left,y:t.top,w:t.width,h:t.height}},H=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},T=function(t,e){return i(e)},S=function(t){return i(t.getContentAreaContainer()||t.getBody())},M=function(t){t=t.selection.getBoundingClientRect();return t?n(E(t)):null},N=function(n,i){return function(t){for(var e=0;e<i.length;e++)if(i[e].predicate(n))return k(i[e].id,T(t,n));return null}},O=function(i,r){return function(t){for(var e=0;e<i.length;e++)for(var n=0;n<r.length;n++)if(r[n].predicate(i[e]))return k(r[n].id,T(t,i[e]));return null}},W=tinymce.util.Tools.resolve("tinymce.util.Tools"),P=function(t){return W.map(t,function(t){return e(t.id,t.predicate)})},D=function(e){return function(t){return t.selection.isCollapsed()?null:k(e,M(t))}},A=function(i,r){return function(t){for(var e=t.schema.getTextBlockElements(),n=0;n<i.length;n++)if("TABLE"===i[n].nodeName)return null;for(n=0;n<i.length;n++)if(i[n].nodeName in e)return t.dom.isEmpty(i[n])?k(r,M(t)):null;return null}},B=function(t){t.fire("SkinLoaded")},L=function(t){return t.fire("BeforeRenderUI")},I=tinymce.util.Tools.resolve("tinymce.EditorManager"),z=function(t){return r("string")(t)},F=function(t){return r("boolean")(t)},U=function(t){return r("function")(t)},V=(r("object"),t),q={getStringOr:(pt=function(i){return function(t,e,n){t=t.settings;return o(n,i),e in t&&i(t[e])?t[e]:n}})(z),getBoolOr:pt(F),getNumberOr:pt(function(t){return r("number")(t)}),getHandlerOr:pt(U),getToolbarItemsOr:(p=V,function(t,e,n){var i=e in t.settings?t.settings[e]:n;return o(n,p),t=n,V(e=i)?e:z(e)?"string"==typeof(n=e)?(i=/[ ,]/,n.split(i).filter(function(t){return 0<t.length})):n:F(e)&&!1===e?[]:t})},Y=tinymce.util.Tools.resolve("tinymce.geom.Rect"),$=function(t,e,n){return s(["cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr"],t,e,n)},X=function(t,e,n){return s(["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr","cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr","cr-cl"],t,e,n)},j=function(t,e,n,i){return"function"==typeof t?(n=t({elementRect:H(e),contentAreaRect:H(n),panelRect:H(i)}),E(n)):i},J=function(t){return t.panelRect},G=function(t){return q.getToolbarItemsOr(t,"selection_toolbar",["bold","italic","|","quicklink","h2","h3","blockquote"])},K=function(t){return q.getToolbarItemsOr(t,"insert_toolbar",["quickimage","quicktable"])},Z=function(t){return q.getHandlerOr(t,"inline_toolbar_position_handler",J)},Q=function(t){var e,n=t.settings;return n.skin_url?(t=t,e=n.skin_url,t.documentBaseURI.toAbsolute(e)):(e=n.skin,n=I.baseURL+"/skins/",e?n+e:n+"lightgray")},tt=function(t){return!1===t.settings.skin},et=function(i,r){function t(){function t(){e._skinLoaded=!0,B(e),n()}var e,n;n=r,(e=i).initialized?t():e.on("init",t)}var e=Q(i);tt(i)?t():(x.DOM.styleSheetLoader.load(e+"/skin.min.css",t),i.contentCSS.push(e+"/content.inline.min.css"))},nt=function(t,e){return t.inline?h(t,e):function(t){throw new Error(t)}("inlite theme only supports inline mode.")},it=g(!1),rt=g(!0),ot=(Rt={fold:function(t,e){return t()},is:it,isSome:it,isNone:rt,getOr:at,getOrThunk:st,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:at,orThunk:st,map:$i=function(){return ot},each:m,bind:$i,exists:it,forall:rt,filter:$i,equals:Rt=function(t){return t.isNone()},equals_:Rt,toArray:function(){return[]},toString:g("none()")},Object.freeze&&Object.freeze(Rt),Rt);function st(t){return t()}function at(t){return t}function lt(t,e){return t=t,e=e,-1===(e=bt.call(t,e))?mt.none():mt.some(e)}function ct(t,e){for(var n=0,i=t.length;n<i;n++)if(e(t[n],n))return!0;return!1}function ut(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;r++){var o=t[r];i[r]=e(o,r)}return i}function dt(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}function ft(t,e){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];e(o,i)&&n.push(o)}return n}var ht=function(n){function t(){return r}function e(t){return t(n)}var i=g(n),r={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:rt,isNone:it,getOr:i,getOrThunk:i,getOrDie:i,getOrNull:i,getOrUndefined:i,or:t,orThunk:t,map:function(t){return ht(t(n))},each:function(t){t(n)},bind:e,exists:e,forall:e,filter:function(t){return t(n)?r:ot},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(it,function(t){return e(n,t)})}};return r},mt={some:ht,none:$i,from:function(t){return null==t?ot:ht(t)}},gt=(Ni=function(e){return function(t){return function(t){if(null===t)return"null";var e=typeof t;return"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(t)===e}})("array"),pt=Ni("function"),vt=Ni("number"),bt=(Array.prototype.slice,Array.prototype.indexOf),yt=Array.prototype.push,xt=(pt(Array.from)&&Array.from,0),wt={id:function(){return"mceu_"+xt++},create:function(t,e,n){var i=y.document.createElement(t);return x.DOM.setAttribs(i,e),"string"==typeof n?i.innerHTML=n:W.each(n,function(t){t.nodeType&&i.appendChild(t)}),i},createFragment:function(t){return x.DOM.createFragment(t)},getWindowSize:function(){return x.DOM.getViewPort()},getSize:function(t){var e,n;return t=t.getBoundingClientRect?(e=t.getBoundingClientRect(),n=Math.max(e.width||e.right-e.left,t.offsetWidth),Math.max(e.height||e.bottom-e.bottom,t.offsetHeight)):(n=t.offsetWidth,t.offsetHeight),{width:n,height:t}},getPos:function(t,e){return x.DOM.getPos(t,e||wt.getContainer())},getContainer:function(){return b.container||y.document.body},getViewPort:function(t){return x.DOM.getViewPort(t)},get:function(t){return y.document.getElementById(t)},addClass:function(t,e){return x.DOM.addClass(t,e)},removeClass:function(t,e){return x.DOM.removeClass(t,e)},hasClass:function(t,e){return x.DOM.hasClass(t,e)},toggleClass:function(t,e,n){return x.DOM.toggleClass(t,e,n)},css:function(t,e,n){return x.DOM.setStyle(t,e,n)},getRuntimeStyle:function(t,e){return x.DOM.getStyle(t,e,!0)},on:function(t,e,n,i){return x.DOM.bind(t,e,n,i)},off:function(t,e,n){return x.DOM.unbind(t,e,n)},fire:function(t,e,n){return x.DOM.fire(t,e,n)},innerHtml:function(t,e){x.DOM.setHTML(t,e)}},_t=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Rt=tinymce.util.Tools.resolve("tinymce.util.Class"),Ct=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),kt=function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},Et=function(n,t){function e(t){t=parseFloat(function(t){var e=n.ownerDocument.defaultView;if(e){e=e.getComputedStyle(n,null);return e?(t=t.replace(/[A-Z]/g,function(t){return"-"+t}),e.getPropertyValue(t)):null}return n.currentStyle[t]}(t));return isNaN(t)?0:t}return{top:e(t+"TopWidth"),right:e(t+"RightWidth"),bottom:e(t+"BottomWidth"),left:e(t+"LeftWidth")}};function Ht(){}function Tt(t){this.cls=[],this.cls._map={},this.onchange=t||Ht,this.prefix=""}W.extend(Tt.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){for(var e=void 0,e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Tt.prototype.toString=function(){if(this.clsValue)return this.clsValue;for(var t="",e=0;e<this.cls.length;e++)0<e&&(t+=" "),t+=this.prefix+this.cls[e];return t};var St,Mt=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Nt=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Ot=/^\s*|\s*$/g,Wt=Rt.extend({init:function(t){var r=this.match;function s(t,e,n){function i(t){t&&e.push(t)}return i(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((t=Mt.exec(t.replace(Ot,"")))[1])),i(function(e){if(e)return function(t){return t._name===e}}(t[2])),i(function(n){if(n)return n=n.split("."),function(t){for(var e=n.length;e--;)if(!t.classes.contains(n[e]))return!1;return!0}}(t[3])),i(function(e,n,i){if(e)return function(t){t=t[e]?t[e]():"";return n?"="===n?t===i:"*="===n?0<=t.indexOf(i):"~="===n?0<=(" "+t+" ").indexOf(" "+i+" "):"!="===n?t!==i:"^="===n?0===t.indexOf(i):"$="===n&&t.substr(t.length-i.length)===i:!!i}}(t[4],t[5],t[6])),i(function(i){var e;if(i)return(i=/(?:not\((.+)\))|(.+)/i.exec(i))[1]?(e=a(i[1],[]),function(t){return!r(t,e)}):(i=i[2],function(t,e,n){return"first"===i?0===e:"last"===i?e===n-1:"even"===i?e%2==0:"odd"===i?e%2==1:!!t[i]&&t[i]()})}(t[7])),e.pseudo=!!t[7],e.direct=n,e}function a(t,e){var n,i,r,o=[];do{if(Nt.exec(""),i=Nt.exec(t),i&&(t=i[3],o.push(i[1]),i[2])){n=i[3];break}}while(i);for(n&&a(n,e),t=[],r=0;r<o.length;r++)">"!==o[r]&&t.push(s(o[r],[],">"===o[r-1]));return e.push(t),e}this._selectors=a(t,[])},match:function(t,e){for(var n,i,r,o,s,a,l,c,u,d,f,h=0,m=(e=e||this._selectors).length;h<m;h++){for(f=t,d=0,n=(i=(r=e[h]).length)-1;0<=n;n--)for(a=r[n];f;){if(a.pseudo)for(l=c=(u=f.parent().items()).length;l--&&u[l]!==f;);for(o=0,s=a.length;o<s;o++)if(!a[o](f,l,c)){o=s+1;break}if(o===s){d++;break}if(n===i-1)break;f=f.parent()}if(d===i)return!0}return!1},find:function(t){var e,n,u=[],i=this._selectors;if(t.items){for(e=0,n=i.length;e<n;e++)!function t(e,n,i){for(var r,o,s,a=n[i],l=0,c=e.length;l<c;l++){for(s=e[l],r=0,o=a.length;r<o;r++)if(!a[r](s,l,c)){r=o+1;break}if(r===o)i===n.length-1?u.push(s):s.items&&t(s.items(),n,i+1);else if(a.direct)return;s.items&&t(s.items(),n,i)}}(t.items(),i[e],0);1<n&&(u=function(t){for(var e,n=[],i=t.length;i--;)(e=t[i]).__checked||(n.push(e),e.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(u))}return new(St=St||Wt.Collection)(u)}}),Pt=Array.prototype.push,Dt=Array.prototype.slice,At={length:0,init:function(t){t&&this.add(t)},add:function(t){return W.isArray(t)?Pt.apply(this,t):t instanceof Lt?this.add(t.toArray()):Pt.call(this,t),this},set:function(t){var e,n=this,i=n.length;for(n.length=0,n.add(t),e=n.length;e<i;e++)delete n[e];return n},filter:function(e){for(var t,n=[],i="string"==typeof e?(e=new Wt(e),function(t){return e.match(t)}):e,r=0,o=this.length;r<o;r++)i(t=this[r])&&n.push(t);return new Lt(n)},slice:function(){return new Lt(Dt.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(t){return W.each(this,t),this},toArray:function(){return W.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new Lt(W.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(e,n){var t;return void 0!==n?(this.each(function(t){t[e]&&t[e](n)}),this):(t=this[0])&&t[e]?t[e]():void 0},exec:function(e){var n=W.toArray(arguments).slice(1);return this.each(function(t){t[e]&&t[e].apply(t,n)}),this},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}};function Bt(t){this.create=t.create}W.each("fire on off show hide append prepend before after reflow".split(" "),function(n){At[n]=function(){var e=W.toArray(arguments);return this.each(function(t){n in t&&t[n].apply(t,e)}),this}}),W.each("text name disabled active selected checked visible parent value data".split(" "),function(e){At[e]=function(t){return this.prop(e,t)}});var Lt=Rt.extend(At),It=Wt.Collection=Lt;function zt(t){return 0<t.nodeType}Bt.create=function(r,o){return new Bt({create:function(e,n){function t(t){e.set(n,t.value)}var i;return e.on("change:"+n,function(t){r.set(o,t.value)}),r.on("change:"+o,t),(i=e._bindings)||(i=e._bindings=[],e.on("destroy",function(){for(var t=i.length;t--;)i[t]()})),i.push(function(){r.off("change:"+o,t)}),r.get(o)}})},$i=tinymce.util.Tools.resolve("tinymce.util.Observable");var Ft,Ut=Rt.extend({Mixins:[$i],init:function(t){var e,n;for(e in t=t||{})(n=t[e])instanceof Bt&&(t[e]=n.create(this,e));this.data=t},set:function(t,e){var n,i=this.data[t];if(e instanceof Bt&&(e=e.create(this,t)),"object"!=typeof t)return function t(e,n){var i,r;if(e===n)return 1;if(null===e||null===n)return e===n;if("object"!=typeof e||"object"!=typeof n)return e===n;if(W.isArray(n)){if(e.length!==n.length)return;for(i=e.length;i--;)if(!t(e[i],n[i]))return}if(zt(e)||zt(n))return e===n;for(i in r={},n){if(!t(e[i],n[i]))return;r[i]=!0}for(i in e)if(!r[i]&&!t(e[i],n[i]))return;return 1}(i,e)||(this.data[t]=e,i={target:this,name:t,value:e,oldValue:i},this.fire("change:"+t,i),this.fire("change",i)),this;for(n in t)this.set(n,t[n]);return this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(t){return Bt.create(this,t)},destroy:function(){this.fire("destroy")}}),Vt={},qt={add:function(t){t=t.parent();t&&t._layout&&!t._layout.isNative()&&(Vt[t._id]||(Vt[t._id]=t),Ft||(Ft=!0,w.requestAnimationFrame(function(){var t,e;for(t in Ft=!1,Vt)(e=Vt[t]).state.get("rendered")&&e.reflow();Vt={}},y.document.body)))},remove:function(t){Vt[t._id]&&delete Vt[t._id]}},Yt=function(t){return t?t.getRoot().uiContainer:null},$t={getUiContainerDelta:function(t){var e=Yt(t);if(e&&"static"!==x.DOM.getStyle(e,"position",!0)){var n=x.DOM.getPos(e),t=e.scrollLeft-n.x,n=e.scrollTop-n.y;return mt.some({x:t,y:n})}return mt.none()},setUiContainer:function(t,e){t=x.DOM.select(t.settings.ui_container)[0];e.getRoot().uiContainer=t},getUiContainer:Yt,inheritUiContainer:function(t,e){return e.uiContainer=Yt(t)}},Xt="onmousewheel"in y.document,jt=!1,Jt=0,Gt={Statics:{classPrefix:"mce-"},isRtl:function(){return Qt.rtl},classPrefix:"mce-",init:function(e){var t,n,i=this;function r(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)i.classes.add(t[e])}i.settings=e=W.extend({},i.Defaults,e),i._id=e.id||"mceu_"+Jt++,i._aria={role:e.role},i._elmCache={},i.$=_t,i.state=new Ut({visible:!0,active:!1,disabled:!1,value:""}),i.data=new Ut(e.data),i.classes=new Tt(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(t=e.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&t!==n&&r(n),r(t)),W.each("title text name visible disabled active value".split(" "),function(t){t in e&&i[t](e[t])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=e,i.borderBox=kt(e.border),i.paddingBox=kt(e.padding),i.marginBox=kt(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){var t=$t.getUiContainer(this);return t||wt.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,i,r=this,o=r.settings,s=r.getEl(),a=r.borderBox=r.borderBox||Et(s,"border");r.paddingBox=r.paddingBox||Et(s,"padding"),r.marginBox=r.marginBox||Et(s,"margin"),f=wt.getSize(s),n=o.minWidth,i=o.minHeight,t=n||f.width,e=i||f.height,c=o.width,u=o.height;var l=void 0!==(l=o.autoResize)?l:!c&&!u,c=c||t,u=u||e,d=a.left+a.right,s=a.top+a.bottom,f=o.maxWidth||65535,a=o.maxHeight||65535;return r._layoutRect=l={x:o.x||0,y:o.y||0,w:c,h:u,deltaW:d,deltaH:s,contentW:c-d,contentH:u-s,innerW:c-d,innerH:u-s,startMinWidth:n||0,startMinHeight:i||0,minW:Math.min(t,f),minH:Math.min(e,a),maxW:f,maxH:a,autoResize:l,scrollW:0},r._lastLayoutRect={},l},layoutRect:function(t){var e,n,i,r=this,o=(o=r._layoutRect)||r.initLayoutRect();return t?(n=o.deltaW,i=o.deltaH,void 0!==t.x&&(o.x=t.x),void 0!==t.y&&(o.y=t.y),void 0!==t.minW&&(o.minW=t.minW),void 0!==t.minH&&(o.minH=t.minH),void 0!==(e=t.w)&&(e=(e=e<o.minW?o.minW:e)>o.maxW?o.maxW:e,o.w=e,o.innerW=e-n),void 0!==(e=t.h)&&(e=(e=e<o.minH?o.minH:e)>o.maxH?o.maxH:e,o.h=e,o.innerH=e-i),void 0!==(e=t.innerW)&&(e=(e=e<o.minW-n?o.minW-n:e)>o.maxW-n?o.maxW-n:e,o.innerW=e,o.w=e+n),void 0!==(e=t.innerH)&&(e=(e=e<o.minH-i?o.minH-i:e)>o.maxH-i?o.maxH-i:e,o.innerH=e,o.h=e+i),void 0!==t.contentW&&(o.contentW=t.contentW),void 0!==t.contentH&&(o.contentH=t.contentH),(i=r._lastLayoutRect).x===o.x&&i.y===o.y&&i.w===o.w&&i.h===o.h||((t=Qt.repaintControls)&&t.map&&!t.map[r._id]&&(t.push(r),t.map[r._id]=!0),i.x=o.x,i.y=o.y,i.w=o.w,i.h=o.h),r):o},repaint:function(){var t,e,n,i=this,r=y.document.createRange?function(t){return t}:Math.round,o=i.getEl().style,s=i._layoutRect,a=i._lastRepaintRect||{},l=i.borderBox,c=l.left+l.right,l=l.top+l.bottom;s.x!==a.x&&(o.left=r(s.x)+"px",a.x=s.x),s.y!==a.y&&(o.top=r(s.y)+"px",a.y=s.y),s.w!==a.w&&(n=r(s.w-c),o.width=(0<=n?n:0)+"px",a.w=s.w),s.h!==a.h&&(n=r(s.h-l),o.height=(0<=n?n:0)+"px",a.h=s.h),i._hasBody&&s.innerW!==a.innerW&&(n=r(s.innerW),(e=i.getEl("body"))&&((t=e.style).width=(0<=n?n:0)+"px"),a.innerW=s.innerW),i._hasBody&&s.innerH!==a.innerH&&(n=r(s.innerH),(e=e||i.getEl("body"))&&((t=t||e.style).height=(0<=n?n:0)+"px"),a.innerH=s.innerH),i._lastRepaintRect=a,i.fire("repaint",{},!1)},updateLayoutRect:function(){var t=this;t.parent()._lastRect=null,wt.css(t.getEl(),{width:"",height:""}),t._layoutRect=t._lastRepaintRect=t._lastLayoutRect=null,t.initLayoutRect()},on:function(t,e){var n,i,r,o=this;return Kt(o).on(t,"string"!=typeof(n=e)?n:function(t){return i||o.parentsAndSelf().each(function(t){var e=t.settings.callbacks;if(e&&(i=e[n]))return r=t,!1}),i?i.call(r,t):(t.action=n,void this.fire("execute",t))}),o},off:function(t,e){return Kt(this).off(t,e),this},fire:function(t,e,n){if((e=e||{}).control||(e.control=this),e=Kt(this).fire(t,e),!1!==n&&this.parent)for(var i=this.parent();i&&!e.isPropagationStopped();)i.fire(t,e,!1),i=i.parent();return e},hasEventListeners:function(t){return Kt(this).has(t)},parents:function(t){for(var e=new It,n=this.parent();n;n=n.parent())e.add(n);return e=t?e.filter(t):e},parentsAndSelf:function(t){return new It(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){t=t?this._id+"-"+t:this._id;return this._elmCache[t]||(this._elmCache[t]=_t("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this,i=n.getEl(n.ariaTarget);return void 0===e?n._aria[t]:(n._aria[t]=e,n.state.get("rendered")&&i.setAttribute("role"===t?t:"aria-"+t,e),n)},encode:function(t,e){return((t=!1!==e?this.translate(t):t)||"").replace(/[&<>"]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},translate:function(t){return Qt.translate?Qt.translate(t):t},before:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this),!0),this},after:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this)),this},remove:function(){var e,n=this,t=n.getEl(),i=n.parent();if(n.items)for(var r=n.items().toArray(),o=r.length;o--;)r[o].remove();i&&i.items&&(e=[],i.items().each(function(t){t!==n&&e.push(t)}),i.items().set(e),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&_t(t).off();i=n.getRoot().controlIdLookup;return i&&delete i[n._id],t&&t.parentNode&&t.parentNode.removeChild(t),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return _t(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return _t(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,i,r=this,o=r.settings;for(n in r.$el=_t(r.getEl()),r.state.set("rendered",!0),o)0===n.indexOf("on")&&r.on(n.substr(2),o[n]);if(r._eventsRoot){for(e=r.parent();!i&&e;e=e.parent())i=e._eventsRoot;if(i)for(n in i._nativeEvents)r._nativeEvents[n]=!0}Zt(r),o.style&&(t=r.getEl())&&(t.setAttribute("style",o.style),t.style.cssText=o.style),r.settings.border&&(a=r.borderBox,r.$el.css({"border-top-width":a.top,"border-right-width":a.right,"border-bottom-width":a.bottom,"border-left-width":a.left}));var s,a=r.getRoot();for(s in a.controlIdLookup||(a.controlIdLookup={}),(a.controlIdLookup[r._id]=r)._aria)r.aria(s,r._aria[s]);!1===r.state.get("visible")&&(r.getEl().style.display="none"),r.bindStates(),r.state.on("change:visible",function(t){var e=t.value;r.state.get("rendered")&&(r.getEl().style.display=!1===e?"none":"",r.getEl().getBoundingClientRect()),(t=r.parent())&&(t._lastRect=null),r.fire(e?"show":"hide"),qt.add(r)}),r.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e=this.getEl(),n=e.parentNode,i=function(t,e){for(var n,i=t,r=n=0;i&&i!==e&&i.nodeType;)r+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:n}}(e,n),r=i.x,o=i.y,s=e.offsetWidth,a=e.offsetHeight,i=n.clientWidth,e=n.clientHeight;return"end"===t?(r-=i-s,o-=e-a):"center"===t&&(r-=i/2-s/2,o-=e/2-a/2),n.scrollLeft=r,n.scrollTop=o,this},getRoot:function(){for(var t=this,e=[];t;){if(t.rootControl){n=t.rootControl;break}e.push(t),t=(n=t).parent()}for(var n=n||this,i=e.length;i--;)e[i].rootControl=n;return n},reflow:function(){qt.remove(this);var t=this.parent();return t&&t._layout&&!t._layout.isNative()&&t.reflow(),this}};function Kt(n){return n._eventDispatcher||(n._eventDispatcher=new Ct({scope:n,toggleEvent:function(t,e){e&&Ct.isNative(t)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[t]=!0,n.state.get("rendered")&&Zt(n))}})),n._eventDispatcher}function Zt(a){var t,e,n,l,i,r;function o(t){var e=a.getParentCtrl(t.target);e&&e.fire(t.type,t)}function s(){var t=l._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(t){t.fire("mouseleave",{target:t.getEl()})}),l._lastHoverCtrl=null)}function c(t){var e,n,i,r=a.getParentCtrl(t.target),o=l._lastHoverCtrl,s=0;if(r!==o){if((n=(l._lastHoverCtrl=r).parents().toArray().reverse()).push(r),o){for((i=o.parents().toArray().reverse()).push(o),s=0;s<i.length&&n[s]===i[s];s++);for(e=i.length-1;s<=e;e--)(o=i[e]).fire("mouseleave",{target:o.getEl()})}for(e=s;e<n.length;e++)(r=n[e]).fire("mouseenter",{target:r.getEl()})}}function u(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=a.fire("wheel",t)}if(i=a._nativeEvents){for((n=a.parents().toArray()).unshift(a),t=0,e=n.length;!l&&t<e;t++)l=n[t]._eventsRoot;for(l=l||(n[n.length-1]||a),a._eventsRoot=l,e=t,t=0;t<e;t++)n[t]._eventsRoot=l;var d=(d=l._delegates)||(l._delegates={});for(r in i){if(!i)return;"wheel"!==r||jt?("mouseenter"===r||"mouseleave"===r?l._hasMouseEnter||(_t(l.getEl()).on("mouseleave",s).on("mouseover",c),l._hasMouseEnter=1):d[r]||(_t(l.getEl()).on(r,o),d[r]=!0),i[r]=!1):Xt?_t(a.getEl()).on("mousewheel",u):_t(a.getEl()).on("DOMMouseScroll",u)}}}W.each("text title visible disabled active value".split(" "),function(e){Gt[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}});var Qt,te=Qt=Rt.extend(Gt),ee=function(t){return"static"===wt.getRuntimeStyle(t,"position")},ne=function(t){return t.state.get("fixed")};function ie(t,e,n){var i=se(),r=wt.getPos(e,$t.getUiContainer(t)),o=r.x,s=r.y;return ne(t)&&ee(y.document.body)&&(o-=i.x,s-=i.y),r=t.getEl(),t=(i=wt.getSize(r)).width,r=i.height,e=(i=wt.getSize(e)).width,i=i.height,"b"===(n=(n||"").split(""))[0]&&(s+=i),"r"===n[1]&&(o+=e),"c"===n[0]&&(s+=Math.round(i/2)),"c"===n[1]&&(o+=Math.round(e/2)),"b"===n[3]&&(s-=r),"r"===n[4]&&(o-=t),"c"===n[3]&&(s-=Math.round(r/2)),"c"===n[4]&&(o-=Math.round(t/2)),{x:o,y:s,w:t,h:r}}function re(t){var e;return(e=$t.getUiContainer(t))&&!ne(t)?{x:0,y:0,w:(e=e).scrollWidth-1,h:e.scrollHeight-1}:se()}function oe(t,e){t.getEl().lastChild.textContent=e+(t.progressBar?" "+t.progressBar.value()+"%":"")}var se=function(){var t=y.window;return{x:Math.max(t.pageXOffset,y.document.body.scrollLeft,y.document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,y.document.body.scrollTop,y.document.documentElement.scrollTop),w:t.innerWidth||y.document.documentElement.clientWidth,h:t.innerHeight||y.document.documentElement.clientHeight}},ae={testMoveRel:function(t,e){for(var n=re(this),i=0;i<e.length;i++){var r=ie(this,t,e[i]);if(ne(this)){if(0<r.x&&r.x+r.w<n.w&&0<r.y&&r.y+r.h<n.h)return e[i]}else if(r.x>n.x&&r.x+r.w<n.w+n.x&&r.y>n.y&&r.y+r.h<n.h+n.y)return e[i]}return e[0]},moveRel:function(t,e){"string"!=typeof e&&(e=this.testMoveRel(t,e));e=ie(this,t,e);return this.moveTo(e.x,e.y)},moveBy:function(t,e){var n=this.layoutRect();return this.moveTo(n.x+t,n.y+e),this},moveTo:function(t,e){var n,i=this;function r(t,e,n){return t<0||e<t+n&&(t=e-n)<0?0:t}i.settings.constrainToViewport&&(n=re(this),o=i.layoutRect(),t=r(t,n.w+n.x,o.w),e=r(e,n.h+n.y,o.h));var o=$t.getUiContainer(i);return o&&ee(o)&&!ne(i)&&(t-=o.scrollLeft,e-=o.scrollTop),o&&(t+=1,e+=1),i.state.get("rendered")?i.layoutRect({x:t,y:e}).repaint():(i.settings.x=t,i.settings.y=e),i.fire("move",{x:t,y:e}),i}},le=te.extend({Mixins:[ae],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this,e=t.classPrefix;return'<div id="'+t._id+'" class="'+t.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+t.encode(t.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var t=this.getEl().style,e=this._layoutRect;t.left=e.x+"px",t.top=e.y+"px",t.zIndex=131070}}),ce=te.extend({init:function(n){var i=this;i._super(n),n=i.settings,i.canFocus=!0,n.tooltip&&!1!==ce.tooltips&&(i.on("mouseenter",function(t){var e=i.tooltip().moveTo(-65535);t.control===i?(t=e.text(n.tooltip).show().testMoveRel(i.getEl(),["bc-tc","bc-tl","bc-tr"]),e.classes.toggle("tooltip-n","bc-tc"===t),e.classes.toggle("tooltip-nw","bc-tl"===t),e.classes.toggle("tooltip-ne","bc-tr"===t),e.moveRel(i.getEl(),t)):e.hide()}),i.on("mouseleave mousedown click",function(){i.tooltip().remove(),i._tooltip=null})),i.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new le({type:"tooltip"}),$t.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var t=this,e=t.settings;t._super(),t.parent()||!e.width&&!e.height||(t.initLayoutRect(),t.repaint()),e.autofocus&&t.focus()},bindStates:function(){var e=this;function n(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function i(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",function(t){n(t.value)}),e.state.on("change:active",function(t){i(t.value)}),e.state.get("disabled")&&n(!0),e.state.get("active")&&i(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),ue=ce.extend({Defaults:{value:0},init:function(t){this._super(t),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function n(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",function(t){n(t.value)}),n(e.state.get("value")),e._super()}}),de=te.extend({Mixins:[ae],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),e.maxWidth=t.maxWidth,t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||0<t.timeout)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new ue),e.on("click",function(t){-1!==t.target.className.indexOf(e.classPrefix+"close")&&e.close()})},renderHtml:function(){var t,e=this,n=e.classPrefix,i="",r="",o="";return e.icon&&(i='<i class="'+n+"ico "+n+"i-"+e.icon+'"></i>'),t=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"'),e.closeButton&&(r='<button type="button" class="'+n+'close" aria-hidden="true">×</button>'),e.progressBar&&(o=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+t+' role="presentation">'+i+'<div class="'+n+'notification-inner">'+e.state.get("text")+"</div>"+o+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var t=this;return w.setTimeout(function(){t.$el.addClass(t.classPrefix+"in"),oe(t,t.state.get("text"))},100),t._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,oe(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){oe(e,e.state.get("text"))})),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var t=this.getEl().style,e=this._layoutRect;t.left=e.x+"px",t.top=e.y+"px",t.zIndex=65534}});function fe(i){function r(t){return t.inline?t.getElement():t.getContentAreaContainer()}return{open:function(t,e){var t=W.extend(t,{maxWidth:(t=r(i),wt.getSize(t).width)}),n=new de(t);return 0<(n.args=t).timeout&&(n.timer=setTimeout(function(){n.close(),e()},t.timeout)),n.on("close",function(){e()}),n.renderTo(),n},close:function(t){t.close()},reposition:function(t){var n,e;dt(t,function(t){t.moveTo(0,0)}),0<(n=t).length&&(e=n.slice(0,1)[0],t=r(i),e.moveRel(t,"tc-tc"),dt(n,function(t,e){0<e&&t.moveRel(n[e-1].getEl(),"bc-tc")}))},getArgs:function(t){return t.args}}}function he(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function me(t,c){var u,d,f,h,m=c.document||y.document;c=c||{};var g=m.getElementById(c.handle||t),t=function(t){var e,n,i,r,o,s,a,l,e=(e=m,n=Math.max,i=e.documentElement,r=e.body,o=n(i.scrollWidth,r.scrollWidth),s=n(i.clientWidth,r.clientWidth),a=n(i.offsetWidth,r.offsetWidth),l=n(i.scrollHeight,r.scrollHeight),e=n(i.clientHeight,r.clientHeight),{width:o<a?s:o,height:l<n(i.offsetHeight,r.offsetHeight)?e:l});he(t),t.preventDefault(),d=t.button,l=g,f=t.screenX,h=t.screenY,l=y.window.getComputedStyle?y.window.getComputedStyle(l,null).getPropertyValue("cursor"):l.runtimeStyle.cursor,u=_t("<div></div>").css({position:"absolute",top:0,left:0,width:e.width,height:e.height,zIndex:2147483647,opacity:1e-4,cursor:l}).appendTo(m.body),_t(m).on("mousemove touchmove",p).on("mouseup touchend",v),c.start(t)},p=function(t){if(he(t),t.button!==d)return v(t);t.deltaX=t.screenX-f,t.deltaY=t.screenY-h,t.preventDefault(),c.drag(t)},v=function(t){he(t),_t(m).off("mousemove touchmove",p).off("mouseup touchend",v),u.remove(),c.stop&&c.stop(t)};this.destroy=function(){_t(g).off()},_t(g).on("mousedown touchstart",t)}function ge(t){return!!t.getAttribute("data-mce-tabstop")}var pe=tinymce.util.Tools.resolve("tinymce.ui.Factory");function ve(t){var o,r,e=t.root;function n(t){return t&&1===t.nodeType}try{o=y.document.activeElement}catch(t){o=y.document.body}function s(t){return n(t=t||o)?t.getAttribute("role"):null}function a(t){for(var e,n=t||o;n=n.parentNode;)if(e=s(n))return e}function i(t){return n(o)&&o.getAttribute("aria-"+t)}function l(t){t=t.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function c(t){var r=[];return function t(e){if(1===e.nodeType&&"none"!==e.style.display&&!e.disabled){var n;(l(n=e)&&!n.hidden||ge(n)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(s(n)))&&r.push(e);for(var i=0;i<e.childNodes.length;i++)t(e.childNodes[i])}}(t||e.getEl()),r}function u(t){var e,n;(n=(t=t||r).parents().toArray()).unshift(t);for(var i=0;i<n.length&&!(e=n[i]).settings.ariaRoot;i++);return e}function d(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function f(t,e){var n=-1,i=u();e=e||c(i.getEl());for(var r=0;r<e.length;r++)e[r]===o&&(n=r);n+=t,i.lastAriaIndex=d(n,e)}function h(){"tablist"===a()?f(-1,c(o.parentNode)):r.parent().submenu?v():f(-1)}function m(){var t=s(),e=a();"tablist"===e?f(1,c(o.parentNode)):"menuitem"===t&&"menu"===e&&i("haspopup")?b():f(1)}function g(){f(-1)}function p(){var t=s(),e=a();"menuitem"===t&&"menubar"===e?b():"button"===t&&i("haspopup")?b({key:"down"}):f(1)}function v(){r.fire("cancel")}function b(t){t=t||{},r.fire("click",{target:o,aria:t})}return r=e.getParentCtrl(o),e.on("keydown",function(t){function e(t,e){l(o)||ge(o)||"slider"!==s(o)&&!1!==e(t)&&t.preventDefault()}var n,i;if(!t.isDefaultPrevented())switch(t.keyCode){case 37:e(t,h);break;case 39:e(t,m);break;case 38:e(t,g);break;case 40:e(t,p);break;case 27:v();break;case 14:case 13:case 32:e(t,b);break;case 9:n=t,"tablist"===a()?(i=c(r.getEl("body"))[0])&&i.focus():f(n.shiftKey?-1:1),t.preventDefault()}}),e.on("focusin",function(t){o=t.target,r=t.control}),{focusFirst:function(t){var e=u(t),t=c(e.getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?d(e.lastAriaIndex,t):d(0,t)}}}var be,ye,xe,we,_e={},Re=te.extend({init:function(t){var e=this;e._super(t),(t=e.settings).fixed&&e.state.set("fixed",!0),e._items=new It,e.isRtl()&&e.classes.add("rtl"),e.bodyClasses=new Tt(function(){e.state.get("rendered")&&(e.getEl("body").className=this.toString())}),e.bodyClasses.prefix=e.classPrefix,e.classes.add("container"),e.bodyClasses.add("container-body"),t.containerCls&&e.classes.add(t.containerCls),e._layout=pe.create((t.layout||"")+"layout"),e.settings.items?e.add(e.settings.items):e.add(e.render()),e._hasBody=!0},items:function(){return this._items},find:function(t){return(t=_e[t]=_e[t]||new Wt(t)).find(this)},add:function(t){return this.items().add(this.create(t)).parent(this),this},focus:function(t){var e,n,i=this;if(!t||!(n=i.keyboardNav||i.parents().eq(-1)[0].keyboardNav))return t=i.find("*"),i.statusbar&&t.add(i.statusbar.items()),t.each(function(t){return t.settings.autofocus?(e=null,!1):void(t.canFocus&&(e=e||t))}),e&&e.focus(),i;n.focusFirst(i)},replace:function(t,e){for(var n,i=this.items(),r=i.length;r--;)if(i[r]===t){i[r]=e;break}0<=r&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(t){var e,n=this,i=[];return W.isArray(t)||(t=[t]),W.each(t,function(t){t&&(t instanceof te||("string"==typeof t&&(t={type:t}),e=W.extend({},n.settings.defaults,t),t.type=e.type=e.type||t.type||n.settings.defaultType||(e.defaults?e.defaults.type:null),t=pe.create(e)),i.push(t))}),i},renderNew:function(){var i=this;return i.items().each(function(t,e){var n;t.parent(i),t.state.get("rendered")||((n=i.getEl("body")).hasChildNodes()&&e<=n.childNodes.length-1?_t(n.childNodes[e]).before(t.renderHtml()):_t(n).append(t.renderHtml()),t.postRender(),qt.add(t))}),i._layout.applyClasses(i.items().filter(":visible")),i._lastRect=null,i},append:function(t){return this.add(t).renderNew()},prepend:function(t){return this.items().set(this.create(t).concat(this.items().toArray())),this.renderNew()},insert:function(t,e,n){var i;return t=this.create(t),i=this.items(),!n&&e<i.length-1&&(e+=1),0<=e&&e<i.length&&(n=i.slice(0,e).toArray(),e=i.slice(e).toArray(),i.set(n.concat(t,e))),this.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var n={};return this.find("*").each(function(t){var e=t.name(),t=t.value();e&&void 0!==t&&(n[e]=t)}),n},renderHtml:function(){var t=this,e=t._layout,n=this.settings.role;return t.preRender(),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"},postRender:function(){var t,e=this;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",!0),e.settings.style&&e.$el.css(e.settings.style),e.settings.border&&(t=e.borderBox,e.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e.parent()||(e.keyboardNav=ve({root:e})),e},initLayoutRect:function(){var t=this._super();return this._layout.recalc(this),t},recalc:function(){var t=this,e=t._layoutRect,n=t._lastRect;if(!n||n.w!==e.w||n.h!==e.h)return t._layout.recalc(t),e=t.layoutRect(),t._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var t;if(qt.remove(this),this.visible()){for(te.repaintControls=[],te.repaintControls.map={},this.recalc(),t=te.repaintControls.length;t--;)te.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),te.repaintControls=[]}return this}}),Ce={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var d=this,f=2;function n(){var c,u,t;function e(t,e,n,i,r,o){var s,a,l=d.getEl("scroll"+t);l&&(s=e.toLowerCase(),a=n.toLowerCase(),_t(d.getEl("absend")).css(s,d.layoutRect()[i]-1),r?(_t(l).css("display","block"),i=d.getEl("body"),r=d.getEl("scroll"+t+"t"),t=i["client"+n]-2*f,o=(t-=c&&u?l["client"+o]:0)/i["scroll"+n],(n={})[s]=i["offset"+e]+f,n[a]=t,_t(l).css(n),(n={})[s]=i["scroll"+e]*o,n[a]=t*o,_t(r).css(n)):_t(l).css("display","none"))}t=d.getEl("body"),c=t.scrollWidth>t.clientWidth,u=t.scrollHeight>t.clientHeight,e("h","Left","Width","contentW",c,"Height"),e("v","Top","Height","contentH",u,"Width")}function t(r,o,s,a,l){var c,t=d._id+"-scroll"+r,e=d.classPrefix;_t(d.getEl()).append('<div id="'+t+'" class="'+e+"scrollbar "+e+"scrollbar-"+r+'"><div id="'+t+'t" class="'+e+'scrollbar-thumb"></div></div>'),d.draghelper=new me(t+"t",{start:function(){c=d.getEl("body")["scroll"+o],_t("#"+t).addClass(e+"active")},drag:function(t){var e=d.layoutRect(),n=e.contentW>e.innerW,i=e.contentH>e.innerH,e=d.getEl("body")["client"+s]-2*f,e=(e-=n&&i?d.getEl("scroll"+r)["client"+l]:0)/d.getEl("body")["scroll"+s];d.getEl("body")["scroll"+o]=c+t["delta"+a]/e},stop:function(){_t("#"+t).removeClass(e+"active")}})}d.settings.autoScroll&&(d._hasScroll||(d._hasScroll=!0,d.classes.add("scroll"),t("v","Top","Height","Y","Width"),t("h","Left","Width","X","Height"),d.on("wheel",function(t){var e=d.getEl("body");e.scrollLeft+=10*(t.deltaX||0),e.scrollTop+=10*t.deltaY,n()}),_t(d.getEl("body")).on("scroll",n)),n())}},ke=Re.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[Ce],renderHtml:function(){var t=this,e=t._layout,n=t.settings.html;return t.preRender(),e.preRender(t),void 0===n?n='<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div>":("function"==typeof n&&(n=n.call(t)),t._hasBody=!1),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1" role="group">'+(t._preBodyHtml||"")+n+"</div>"}}),Ee={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,e){var n;return(t<=1||e<=1)&&(n=wt.getWindowSize(),t=t<=1?t*n.w:t,e=e<=1?e*n.h:e),this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:e,w:t,h:e}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}},He=[],Te=[];function Se(t){for(var e=He.length;e--;){var n=He[e],i=n.getParentCtrl(t.target);n.settings.autohide&&(i&&(function(t,e){for(;t;){if(t===e)return 1;t=t.parent()}}(i,n)||n.parent()===i)||(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide())}}function Me(r){var t=wt.getViewPort().y;function e(t,e){for(var n,i=0;i<He.length;i++)if(He[i]!==r)for(n=He[i].parent();n=n&&n.parent();)n===r&&He[i].fixed(t).moveBy(0,e).repaint()}r.settings.autofix&&(r.state.get("fixed")?r._autoFixY>t&&(r.fixed(!1).layoutRect({y:r._autoFixY}).repaint(),e(!1,r._autoFixY-t)):(r._autoFixY=r.layoutRect().y,r._autoFixY<t&&(r.fixed(!0).layoutRect({y:0}).repaint(),e(!0,t-r._autoFixY))))}function Ne(t,e){var n,i,r=Oe.zIndex||65535;if(t)Te.push(e);else for(n=Te.length;n--;)Te[n]===e&&Te.splice(n,1);if(Te.length)for(n=0;n<Te.length;n++)Te[n].modal&&(r++,i=Te[n]),Te[n].getEl().style.zIndex=r,Te[n].zIndex=r,r++;t=_t("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];i?_t(t).css("z-index",i.zIndex-1):t&&(t.parentNode.removeChild(t),we=!1),Oe.currentZIndex=r}var Oe=ke.extend({Mixins:[ae,Ee],init:function(t){var e,n,i,r=this;r._super(t),(r._eventsRoot=r).classes.add("floatpanel"),t.autohide&&(be||(be=function(t){2!==t.button&&Se(t)},_t(y.document).on("click touchstart",be)),xe||(e=y.document.documentElement,n=e.clientWidth,i=e.clientHeight,xe=function(){y.document.all&&n===e.clientWidth&&i===e.clientHeight||(n=e.clientWidth,i=e.clientHeight,Oe.hideAll())},_t(y.window).on("resize",xe)),He.push(r)),t.autofix&&(ye||(ye=function(){for(var t=He.length;t--;)Me(He[t])},_t(y.window).on("scroll",ye)),r.on("move",function(){Me(this)})),r.on("postrender show",function(t){var e,n;t.control===r&&(n=r.classPrefix,r.modal&&!we&&((e=_t("#"+n+"modal-block",r.getContainerElm()))[0]||(e=_t('<div id="'+n+'modal-block" class="'+n+"reset "+n+'fade"></div>').appendTo(r.getContainerElm())),w.setTimeout(function(){e.addClass(n+"in"),_t(r.getEl()).addClass(n+"in")}),we=!0),Ne(!0,r))}),r.on("show",function(){r.parents().each(function(t){if(t.state.get("fixed"))return r.fixed(!0),!1})}),t.popover&&(r._preBodyHtml='<div class="'+r.classPrefix+'arrow"></div>',r.classes.add("popover").add("bottom").add(r.isRtl()?"end":"start")),r.aria("label",t.ariaLabel),r.aria("labelledby",r._id),r.aria("describedby",r.describedBy||r._id+"-none")},fixed:function(t){var e,n=this;return n.state.get("fixed")!==t&&(n.state.get("rendered")&&(e=wt.getViewPort(),t?n.layoutRect().y-=e.y:n.layoutRect().y+=e.y),n.classes.toggle("fixed",t),n.state.set("fixed",t)),n},show:function(){for(var t=this._super(),e=He.length;e--&&He[e]!==this;);return-1===e&&He.push(this),t},hide:function(){return We(this),Ne(!1,this),this._super()},hideAll:function(){Oe.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),Ne(!1,this)),this},remove:function(){We(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function We(t){for(var e=He.length;e--;)He[e]===t&&He.splice(e,1);for(e=Te.length;e--;)Te[e]===t&&Te.splice(e,1)}Oe.hideAll=function(){for(var t=He.length;t--;){var e=He[t];e&&e.settings.autohide&&(e.hide(),He.splice(t,1))}};var Pe=[],De="";function Ae(t){var e,n=_t("meta[name=viewport]")[0];!1!==b.overrideViewPort&&(n||((n=y.document.createElement("meta")).setAttribute("name","viewport"),y.document.getElementsByTagName("head")[0].appendChild(n)),(e=n.getAttribute("content"))&&void 0!==De&&(De=e),n.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":De))}function Be(t,e){!function(){for(var t=0;t<Pe.length;t++)if(Pe[t]._fullscreen)return!0;return!1}()||!1!==e||_t([y.document.documentElement,y.document.body]).removeClass(t+"fullscreen")}var Le,Ie=Oe.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var n=this;n._super(t),n.isRtl()&&n.classes.add("rtl"),n.classes.add("window"),n.bodyClasses.add("window-body"),n.state.set("fixed",!0),t.buttons&&(n.statusbar=new ke({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n)),n.on("click",function(t){var e=n.classPrefix+"close";(wt.hasClass(t.target,e)||wt.hasClass(t.target.parentNode,e))&&n.close()}),n.on("cancel",function(){n.close()}),n.on("move",function(t){t.control===n&&Oe.hideAll()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",t.title),n._fullscreen=!1},recalc:function(){var t,e,n,i,r=this,o=r.statusbar;r._fullscreen&&(r.layoutRect(wt.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),t=r.layoutRect(),r.settings.title&&!r._fullscreen&&(e=t.headerW)>t.w&&(n=t.x-Math.max(0,e/2),r.layoutRect({w:e,x:n}),i=!0),o&&(o.layoutRect({w:r.layoutRect().innerW}).recalc(),(e=o.layoutRect().minW+t.deltaW)>t.w&&(n=t.x-Math.max(0,e-t.w),r.layoutRect({w:e,x:n}),i=!0)),i&&r.recalc()},initLayoutRect:function(){var t,e=this,n=e._super(),i=0;e.settings.title&&!e._fullscreen&&(t=e.getEl("head"),t=wt.getSize(t),n.headerW=t.width,n.headerH=t.height,i+=n.headerH),e.statusbar&&(i+=e.statusbar.layoutRect().h),n.deltaH+=i,n.minH+=i,n.h+=i;i=wt.getWindowSize();return n.x=e.settings.x||Math.max(0,i.w/2-n.w/2),n.y=e.settings.y||Math.max(0,i.h/2-n.h/2),n},renderHtml:function(){var t=this,e=t._layout,n=t._id,i=t.classPrefix,r=t.settings,o="",s="",a=r.html;return t.preRender(),e.preRender(t),r.title&&(o='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+t.encode(r.title)+'</div><div id="'+n+'-dragh" class="'+i+'dragh"></div><button type="button" class="'+i+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),void 0===(a=r.url?'<iframe src="'+r.url+'" tabindex="-1"></iframe>':a)&&(a=e.renderHtml(t)),t.statusbar&&(s=t.statusbar.renderHtml()),'<div id="'+n+'" class="'+t.classes+'" hidefocus="1"><div class="'+t.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+t.bodyClasses+'">'+a+"</div>"+s+"</div></div>"},fullscreen:function(t){var n,e,i=this,r=y.document.documentElement,o=i.classPrefix;return t!==i._fullscreen&&(_t(y.window).on("resize",function(){var t,e;i._fullscreen&&(n?i._timer||(i._timer=w.setTimeout(function(){var t=wt.getWindowSize();i.moveTo(0,0).resizeTo(t.w,t.h),i._timer=0},50)):(t=(new Date).getTime(),e=wt.getWindowSize(),i.moveTo(0,0).resizeTo(e.w,e.h),50<(new Date).getTime()-t&&(n=!0)))}),e=i.layoutRect(),(i._fullscreen=t)?(i._initial={x:e.x,y:e.y,w:e.w,h:e.h},i.borderBox=kt("0"),i.getEl("head").style.display="none",e.deltaH-=e.headerH+2,_t([r,y.document.body]).addClass(o+"fullscreen"),i.classes.add("fullscreen"),t=wt.getWindowSize(),i.moveTo(0,0).resizeTo(t.w,t.h)):(i.borderBox=kt(i.settings.border),i.getEl("head").style.display="",e.deltaH+=e.headerH,_t([r,y.document.body]).removeClass(o+"fullscreen"),i.classes.remove("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h))),i.reflow()},postRender:function(){var e,n=this;setTimeout(function(){n.classes.add("in"),n.fire("open")},0),n._super(),n.statusbar&&n.statusbar.postRender(),n.focus(),this.dragHelper=new me(n._id+"-dragh",{start:function(){e={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(t){n.moveTo(e.x+t.deltaX,e.y+t.deltaY)}}),n.on("submit",function(t){t.isDefaultPrevented()||n.close()}),Pe.push(n),Ae(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,e=this;for(e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),Be(e.classPrefix,!1),t=Pe.length;t--;)Pe[t]===e&&Pe.splice(t,1);Ae(0<Pe.length)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});b.desktop||(Le={w:y.window.innerWidth,h:y.window.innerHeight},w.setInterval(function(){var t=y.window.innerWidth,e=y.window.innerHeight;Le.w===t&&Le.h===e||(Le={w:t,h:e},_t(y.window).trigger("resize"))},100)),_t(y.window).on("resize",function(){for(var t,e=wt.getWindowSize(),n=0;n<Pe.length;n++)t=Pe[n].layoutRect(),Pe[n].moveTo(Pe[n].settings.x||Math.max(0,e.w/2-t.w/2),Pe[n].settings.y||Math.max(0,e.h/2-t.h/2))});var ze=Ie.extend({init:function(t){t={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(t)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var e,i=t.callback||function(){};function n(t,e,n){return{type:"button",text:t,subtype:n?"primary":"",onClick:function(t){t.control.parents()[1].close(),i(e)}}}switch(t.buttons){case ze.OK_CANCEL:e=[n("Ok",!0,!0),n("Cancel",!1)];break;case ze.YES_NO:case ze.YES_NO_CANCEL:e=[n("Yes",1,!0),n("No",0)],t.buttons===ze.YES_NO_CANCEL&&e.push(n("Cancel",-1));break;default:e=[n("Ok",!0,!0)]}return new Ie({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:e,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){i(!1)}}).renderTo(y.document.body).reflow()},alert:function(t,e){return(t="string"==typeof t?{text:t}:t).callback=e,ze.msgBox(t)},confirm:function(t,e){return(t="string"==typeof t?{text:t}:t).callback=e,t.buttons=ze.OK_CANCEL,ze.msgBox(t)}}});function Fe(t,e){return function(t,e){for(var n=null!=e?e:Ve,i=0;i<t.length&&null!=n;++i)n=n[t[i]];return n}(t.split("."),e)}var Ue=function(t,e){return{renderUI:function(){return nt(t,e)},getNotificationManagerImpl:function(){return fe(t)},getWindowManagerImpl:function(){return{open:function(n,t,e){var i;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]),(i=new Ie(n)).on("close",function(){e(i)}),n.data&&i.on("postRender",function(){this.find("*").each(function(t){var e=t.name();e in n.data&&t.value(n.data[e])})}),i.features=n||{},i.params=t||{},i=i.renderTo(y.document.body).reflow()},alert:function(t,e,n){var i=ze.alert(t,function(){e()});return i.on("close",function(){n(i)}),i},confirm:function(t,e,n){var i=ze.confirm(t,function(t){e(t)});return i.on("close",function(){n(i)}),i},close:function(t){t.close()},getParams:function(t){return t.params},setParams:function(t,e){t.params=e}}}}},Ve=void 0!==y.window?y.window:Function("return this;")(),qe=function(t,e){e=Fe(t,e);if(null==e)throw new Error(t+" not available on this browser");return e};function Ye(t){return"A"===t.nodeName&&t.hasAttribute("href")}function $e(t){var e=t.selection,n=t.dom,e=e.getRng(),n=function(t,e){t=t.getParent(e,Ye);return t||e}(n,Jn.getNode(e.startContainer,e.startOffset)),e=Jn.getNode(e.endContainer,e.endOffset),t=t.getBody();return W.grep(function(t,e,n){for(var i=[],r=new jn(e,t),o=e;o&&(1===o.nodeType&&i.push(o),o!==n);o=r.next());return i}(t,n,e),Ye)}function Xe(t){t.selection.collapse(!1)}function je(t){t.focus(),Gn(t),Xe(t)}function Je(t,e){var n,i,r;(r=t.dom.getParent(t.selection.getStart(),"a[href]"))?(n=r,i=e,(r=t).focus(),r.dom.setAttrib(n,"href",i),Xe(r)):(e=e,(t=t).execCommand("mceInsertLink",!1,{href:e}),Xe(t))}function Ge(t,e){return!oi(e)&&ri(e)?(n=t,i=e,new Fn(function(e){n.windowManager.confirm("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){e(!0===t?"http://"+i:i)})})):Fn.resolve(e);var n,i}function Ke(t,e){function n(t,e){return{selector:t,handler:e}}return e.settings.stateSelector?n(e.settings.stateSelector,function(t){e.active(t)}):e.settings.disabledStateSelector?n(e.settings.disabledStateSelector,function(t){e.disabled(t)}):null}function Ze(){function i(t){return 0<t.items().length}function r(t,e){var n,e=(n=t,e=e,W.map(e,function(t){return ai(n,t.id,t.items)}).concat([ai(t,"text",G(t)),ai(t,"insert",K(t)),si(t,f)]));return pe.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:W.grep(e,i),oncancel:function(){t.focus()}})}function s(t){t&&t.show()}function a(t,e){t.moveTo(e.x,e.y)}function l(n,i){i=i?i.substr(0,2):"",W.each({t:"down",b:"up",c:"center"},function(t,e){n.classes.toggle("arrow-"+t,e===i.substr(0,1))}),"cr"===i?(n.classes.toggle("arrow-left",!0),n.classes.toggle("arrow-right",!1)):"cl"===i?(n.classes.toggle("arrow-left",!1),n.classes.toggle("arrow-right",!0)):W.each({l:"left",r:"right"},function(t,e){n.classes.toggle("arrow-"+t,e===i.substr(1,1))})}function c(t,e){return 0<(e=t.items().filter("#"+e)).length&&(e[0].show(),t.reflow(),!0)}function o(t,e,n,i){var r=Z(n),o=S(n),n=x.DOM.getRect(t.getEl());if(e=("insert"===e?$:X)(i,o,n)){n=ii().getOr({x:0,y:0}),n={x:e.rect.x-n.x,y:e.rect.y-n.y,w:e.rect.w,h:e.rect.h};return a(t,j(r,d=i,o,n)),l(t,e.position),!0}return!1}var u,d,f=function(){u&&u.hide()};return{show:function(t,e,n,i){u||(L(t),(u=r(t,i)).renderTo().reflow().moveTo(n.x,n.y),t.nodeChanged()),i=e,e=t,t=n,s(n=u),n.items().hide(),c(n,i)&&!1!==o(n,i,e,t)||f()},showForm:function(t,e){var n,i,r,o;u&&(u.items().hide(),c(u,e)?(o=r=i=n=void 0,s(u),u.items().hide(),c(u,e),o=Z(t),n=S(t),i=x.DOM.getRect(u.getEl()),(r=X(d,n,i))&&(i=r.rect,a(u,j(o,d,n,i)),l(u,r.position))):f())},reposition:function(t,e,n){u&&o(u,e,t,n)},inForm:function(){return u&&u.visible()&&0<u.items().filter("form:visible").length},hide:f,focus:function(){u&&u.find("toolbar:visible").eq(0).each(function(t){t.focus(!0)})},remove:function(){u&&(u.remove(),u=null)}}}function Qe(t,e){return function(){return e===t}}function tn(t,e){return function(){return e===t}}function en(t,e){var n=String(e).toLowerCase();return function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r,n))return mt.some(r)}return mt.none()}(t,function(t){return t.search(n)})}function nn(t,e){return-1!==t.indexOf(e)}function rn(t){return t.nodeType!==Ji&&t.nodeType!==Gi||0===t.childElementCount}function on(t,e){return function(t,e){e=void 0===e?y.document:e.dom();return rn(e)?[]:ut(e.querySelectorAll(t),Mi.fromDom)}(e,t)}function sn(t,e,n,i,r){return{type:t,title:e,url:n,level:i,attach:r}}function an(t){return t.innerText||t.textContent}function ln(t){return t.id||(e="h",t=(new Date).getTime(),e+"_"+Math.floor(1e9*Math.random())+ ++Ti+String(t));var e}function cn(t){return(e=t)&&"A"===e.nodeName&&(e.id||e.name)&&tr(t);var e}function un(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function dn(t){return un(t)&&tr(t)}function fn(t){var e,n=ln(t);return sn("header",an(t),"#"+n,un(e=t)?parseInt(e.nodeName.substr(1),10):0,function(){t.id=n})}function hn(t){var e=t.id||t.name,t=an(t);return sn("anchor",t||"#"+e,"#"+e,0,m)}function mn(t){var e;return e="h1,h2,h3,h4,h5,h6,a:not([href])",t=t,ut(on(Mi.fromDom(t),e),function(t){return t.dom()})}function gn(t){return 0<Ki(t.title).length}function pn(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}}function vn(t,e){return{title:t,value:{title:t,url:e,attach:m}}}function bn(t,e,n){return!1===(n=e in t?t[e]:n)?null:n}function yn(t,n,e,i){function r(t){return t=t.hasOwnProperty(e)?t[e]:[],t=ft(t,function(t){return e=t,!ct(n,function(t){return t.url===e});var e}),W.map(t,function(t){return{title:t,value:{title:t,url:t,attach:m}}})}function o(e){var t;return t=t=ft(n,function(t){return t.type===e}),W.map(t,pn)}var s,a,l,c,u={title:"-"};return!1===i.typeahead_urls?[]:"file"===e?(l=[ir(t,r(nr)),ir(t,o("header")),ir(t,(l=o("anchor"),c=bn(i,"anchor_top","#top"),i=bn(i,"anchor_bottom","#bottom"),null!==c&&l.unshift(vn("<top>",c)),null!==i&&l.push(vn("<bottom>",i)),l))],s=function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(u,e)},a=[],dt(l,function(t){a=s(a,t)}),a):ir(t,r(nr))}function xn(i,n,r,o){function e(t){var e=er(r),e=yn(t,e,o,n);i.showAutoComplete(e,t)}i.on("autocomplete",function(){e(i.value())}),i.on("selectitem",function(t){var e=t.value;i.value(e.url);t=function(t){t=t.title;return t.raw||t}(e);"image"===o?i.fire("change",{meta:{alt:t,attach:e.attach}}):i.fire("change",{meta:{text:t,attach:e.attach}}),i.focus()}),i.on("click",function(t){0===i.value().length&&"INPUT"===t.target.nodeName&&e("")}),i.on("PostRender",function(){i.getRoot().on("submit",function(t){var e,n;t.isDefaultPrevented()||(e=i.value(),t=nr[n=o],/^https?/.test(e)&&(t?lt(t,e).isNone()&&(nr[n]=t.slice(0,5).concat(e)):nr[n]=[e]))})})}function wn(n,t,e){var i,r=t.filepicker_validator_handler;r&&(i=function(t){0!==t.length?r({url:t,type:e},function(t){var e,e=(t=(e=t).status,e=e.message,"valid"===t?{status:"ok",message:e}:"unknown"===t||"invalid"===t?{status:"warn",message:e}:{status:"none",message:""});n.statusMessage(e.message),n.statusLevel(e.status)}):n.statusLevel("none")},n.state.on("change:value",function(t){i(t.value)}))}function _n(t,e){return function(t,e){e=void 0===e?y.document:e.dom();return rn(e)?mt.none():mt.from(e.querySelector(t)).map(Mi.fromDom)}(e,t)}function Rn(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}}function Cn(t,e,n){function i(t){n(t,e)}t.formatter?t.formatter.formatChanged(e,i):t.on("init",function(){t.formatter.formatChanged(e,i)})}function kn(t,n){return function(e){Cn(t,n,function(t){e.control.active(t)})}}function En(t){return t?t.split(",")[0]:""}function Hn(a,l){return function(){var s=this;s.state.set("value",null),a.on("init nodeChange",function(t){var e,n,i,r,o=a.queryCommandValue("FontName"),e=(e=l,r=(n=o)?n.toLowerCase():"",W.each(e,function(t){t.value.toLowerCase()===r&&(i=t.value)}),W.each(e,function(t){i||En(t.value).toLowerCase()!==En(r).toLowerCase()||(i=t.value)}),i);s.value(e||null),!e&&o&&s.text(En(o))})}}function Tn(e){e.addButton("fontselect",function(){var t=function(t){t=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return W.map(t,function(t){return{text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""}})}(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:Hn(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})}function Sn(t,e){return/[0-9.]+px$/.test(t)?function(t,e){e=Math.pow(10,e);return Math.round(t*e)/e}(72*parseInt(t,10)/96,e||0)+"pt":t}function Mn(s,a){return function(){var o=this;s.on("init nodeChange",function(t){var e,n,i,r=s.queryCommandValue("FontSize");if(r)for(n=3;!i&&0<=n;n--)e=Sn(r,n),i=function(t,e,n){var i;return W.each(t,function(t){t.value===n?i=n:t.value===e&&(i=e)}),i}(a,e,r);o.value(i||null),i||o.text(e)})}}function Nn(e){e.addButton("fontsizeselect",function(){var t=function(t){t=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return W.map(t.split(" "),function(t){var e=t,n=t,t=t.split("=");return 1<t.length&&(e=t[0],n=t[1]),{text:e,value:n}})}(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:Mn(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})}function On(n,t){return function(){var r,o,s,e=[];return W.each(t,function(t){e.push({text:t[0],value:t[1],textStyle:function(){return n.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:e,fixedWidth:!0,onselect:function(t){t.control&&(t=t.control.value(),Rn(n,t)())},onPostRender:(r=n,o=e,function(){var e=this;r.on("nodeChange",function(t){var n=r.formatter,i=null;W.each(t.parents,function(e){if(W.each(o,function(t){if(s?n.matchNode(e,s,{value:t.value})&&(i=t.value):n.matchNode(e,t.value)&&(i=t.value),i)return!1}),i)return!1}),e.value(i)})})}}}function Wn(t){return t&&"-"===t.text}function Pn(n){var i=ft(n,function(t,e){return!Wn(t)||!Wn(n[e-1])});return ft(i,function(t,e){return!Wn(t)||0<e&&e<i.length-1})}function Dn(t){var e,n,i=t.settings.insert_button_items;return Pn(i?gr(t,i):(t=t,e="insert",n=[{text:"-"}],t=W.grep(t.menuItems,function(t){return t.context===e}),W.each(t,function(t){"before"===t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"===t.separator&&n.push({text:"|"})}),n))}function An(t){var n,i,r;n=t,W.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,e){n.addButton(e,{active:!1,tooltip:t,onPostRender:kn(n,e),onclick:Rn(n,e)})}),i=t,W.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,e){i.addButton(e,{tooltip:t[0],cmd:t[1]})}),r=t,W.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,e){r.addButton(e,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:kn(r,e)})})}function Bn(n,i){return function(){function t(){var t="redo"===i?"hasRedo":"hasUndo";return!!n.undoManager&&n.undoManager[t]()}var e=this;e.disabled(!t()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){e.disabled(n.readonly||!t())})}}var Ln,In,zn,Fn=tinymce.util.Tools.resolve("tinymce.util.Promise"),Un=function(n){return new Fn(function(t){var e=new(qe("FileReader"));e.onloadend=function(){t(e.result.split(",")[1])},e.readAsDataURL(n)})},Vn=function(){return new Fn(function(e){var t=y.document.createElement("input");t.type="file",t.style.position="fixed",t.style.left=0,t.style.top=0,t.style.opacity=.001,y.document.body.appendChild(t),t.onchange=function(t){e(Array.prototype.slice.call(t.target.files))},t.click(),t.parentNode.removeChild(t)})},qn=0,Yn=function(t){return t+qn+++("s"+Date.now().toString(36)+e()+e()+e());function e(){return Math.round(4294967295*Math.random()).toString(36)}},$n=function(r,o){var s={};function t(t){var e,n=o[t?"startContainer":"endContainer"],i=o[t?"startOffset":"endOffset"];1===n.nodeType&&(e=r.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(i=Math.min(i,n.childNodes.length-1),t?n.insertBefore(e,n.childNodes[i]):r.insertAfter(e,n.childNodes[i])):n.appendChild(e),n=e,i=0),s[t?"startContainer":"endContainer"]=n,s[t?"startOffset":"endOffset"]=i}return t(!0),o.collapsed||t(),s},Xn=function(r,o){function t(t){var e,n,i;e=i=o[t?"startContainer":"endContainer"],n=o[t?"startOffset":"endOffset"],e&&(1===e.nodeType&&(n=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(e),e=e.parentNode,r.remove(i)),o[t?"startContainer":"endContainer"]=e,o[t?"startOffset":"endOffset"]=n)}t(!0),t();var e=r.createRng();return e.setStart(o.startContainer,o.startOffset),o.endContainer&&e.setEnd(o.endContainer,o.endOffset),e},jn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Jn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Gn=function(t){var e,n,i,r;n=$e(e=t),i=e.dom,r=e.selection,t=$n(i,r.getRng()),W.each(n,function(t){e.dom.remove(t,!0)}),r.setRng(Xn(i,t))},Kn=function(t,e,n){var i,r,o;t.plugins.table?t.plugins.table.insertTable(e,n):(r=e,o=n,(i=t).undoManager.transact(function(){var t;i.insertContent(function(t,e){var n,i,r='<table data-mce-id="mce" style="width: 100%">';for(r+="<tbody>",i=0;i<e;i++){for(r+="<tr>",n=0;n<t;n++)r+="<td><br></td>";r+="</tr>"}return r+="</tbody>",r+="</table>"}(r,o)),(t=i.dom.select("*[data-mce-id]")[0]).removeAttribute("data-mce-id"),t=i.dom.select("td,th",t),i.selection.setCursorLocation(t[0],0)}))},Zn=function(t,e){t.execCommand("FormatBlock",!1,e)},Qn=function(t,e,n){var i=t.editorUpload.blobCache,e=i.create(Yn("mceu"),n,e);i.add(e),t.insertContent(t.dom.createHTML("img",{src:e.blobUri()}))},ti=function(t,e){0===e.trim().length?je(t):Je(t,e)},ei=je,ni=function(n,t){n.addButton("quicklink",{icon:"link",tooltip:"Insert/Edit link",stateSelector:"a[href]",onclick:function(){t.showForm(n,"quicklink")}}),n.addButton("quickimage",{icon:"image",tooltip:"Insert image",onclick:function(){Vn().then(function(t){var e=t[0];Un(e).then(function(t){Qn(n,t,e)})})}}),n.addButton("quicktable",{icon:"table",tooltip:"Insert table",onclick:function(){t.hide(),Kn(n,2,2)}}),function(e){for(var t=1;t<6;t++){var n="h"+t;e.addButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,stateSelector:n,onclick:function(t){return function(){Zn(e,t)}}(n),onPostRender:function(){this.getEl().firstChild.firstChild.style.fontWeight="bold"}})}}(n)},ii=function(){var t=b.container;if(t&&"static"!==x.DOM.getStyle(t,"position",!0)){var e=x.DOM.getPos(t),n=e.x-t.scrollLeft,t=e.y-t.scrollTop;return mt.some({x:n,y:t})}return mt.none()},ri=function(t){return/^www\.|\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|es|mil)$/i.test(t.trim())},oi=function(t){return/^https?:\/\//.test(t.trim())},si=function(n,e){var t,i,r,o={};return t="quicklink",i={items:[{type:"button",name:"unlink",icon:"unlink",onclick:function(){n.focus(),ei(n),e()},tooltip:"Remove link"},{type:"filepicker",name:"linkurl",placeholder:"Paste or type a link",filetype:"file",onchange:function(t){t=t.meta;t&&t.attach&&(o={href:this.value(),attach:t.attach})}},{type:"button",icon:"checkmark",subtype:"primary",tooltip:"Ok",onclick:"submit"}],onshow:function(t){var e;t.control===this&&(e=void 0,t="",(e=n.dom.getParent(n.selection.getStart(),"a[href]"))&&(t=n.dom.getAttrib(e,"href")),this.fromJSON({linkurl:t}),t=this.find("#unlink"),e?t.show():t.hide(),this.find("#linkurl")[0].focus())},onsubmit:function(t){Ge(n,t.data.linkurl).then(function(t){n.undoManager.transact(function(){t===o.href&&(o.attach(),o={}),ti(n,t)}),e()})}},(r=pe.create(W.extend({type:"form",layout:"flex",direction:"row",padding:5,name:t,spacing:3},i))).on("show",function(){r.find("textbox").eq(0).each(function(t){t.focus()})}),r},ai=function(i,t,e){var r,o=[];if(e)return W.each(V(e=e)?e:z(e)?e.split(/[ ,]/):[],function(t){var e,n;"|"===t?r=null:i.buttons[t]&&(r||(r={type:"buttongroup",items:[]},o.push(r)),t=i.buttons[t],(t=U(t)?t():t).type=t.type||"button",(t=pe.create(t)).on("postRender",(e=i,n=t,function(){var t=Ke(0,n);null!==t&&e.selection.selectorChanged(t.selector,t.handler)})),r.items.push(t))}),pe.create({type:"toolbar",layout:"flow",name:t,items:o})},li=Rt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=W.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,i=this.settings,r=i.firstControlClass,o=i.lastControlClass;t.each(function(t){t.classes.remove(r).remove(o).add(i.controlClass),t.visible()&&(e=e||t,n=t)}),e&&e.classes.add(r),n&&n.classes.add(o)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each(function(t){e+=t.renderHtml()}),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),ci=li.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each(function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()})},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}}),ui=ce.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",function(t){t.preventDefault()}),n.on("touchstart",function(t){n.fire("click",t),t.preventDefault()}),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t=this.getEl().firstChild;t&&((t=t.style).width=t.height="100%"),this._super()},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix,i=t.state.get("icon"),r=t.state.get("text"),o="",s=t.settings,a=s.image;return a=a?(i="none"," style=\"background-image: url('"+(a="string"!=typeof a?y.window.getSelection?a[0]:a[1]:a)+"')\""):"",r&&(t.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+t.encode(r)+"</span>"),i=i?n+"ico "+n+"i-"+i:"",s="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+e+'" class="'+t.classes+'" tabindex="-1"'+s+'><button id="'+e+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+a+"></i>":"")+o+"</button></div>"},bindStates:function(){var i=this,n=i.$,r=i.classPrefix+"txt";function o(t){var e=n("span."+r,i.getEl());t?(e[0]||(n("button:first",i.getEl()).append('<span class="'+r+'"></span>'),e=n("span."+r,i.getEl())),e.html(i.encode(t))):e.remove(),i.classes.toggle("btn-has-text",!!t)}return i.state.on("change:text",function(t){o(t.value)}),i.state.on("change:icon",function(t){var e=t.value,n=i.classPrefix,e=(i.settings.icon=e)?n+"ico "+n+"i-"+i.settings.icon:"",t=i.getEl().firstChild,n=t.getElementsByTagName("i")[0];e?(n&&n===t.firstChild||(n=y.document.createElement("i"),t.insertBefore(n,t.firstChild)),n.className=e):n&&t.removeChild(n),o(i.state.get("text"))}),i._super()}}),di=ui.extend({init:function(t){t=W.extend({text:"Browse...",multiple:!1,accept:null},t),this._super(t),this.classes.add("browsebutton"),t.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,e=wt.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super(),_t(e).on("change",function(t){var e=t.target.files;n.value=function(){return e.length?n.settings.multiple?e:e[0]:null},t.preventDefault(),e.length&&n.fire("change",t)}),_t(e).on("click",function(t){t.stopPropagation()}),_t(n.getEl("button")).on("click touchstart",function(t){t.stopPropagation(),e.click(),t.preventDefault()}),n.getEl().appendChild(e)},remove:function(){_t(this.getEl("button")).off(),_t(this.getEl("input")).off(),this._super()}}),fi=Re.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this,e=t._layout;return t.classes.add("btn-group"),t.preRender(),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'"><div id="'+t._id+'-body">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"}}),hi=ce.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",function(t){t.preventDefault()}),e.on("click",function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())}),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix;return'<div id="'+e+'" class="'+t.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+e+'-al" class="'+n+'label">'+t.encode(t.state.get("text"))+"</span></div>"},bindStates:function(){var i=this;function e(t){i.classes.toggle("checked",t),i.aria("checked",t)}return i.state.on("change:text",function(t){i.getEl("al").firstChild.data=i.translate(t.value)}),i.state.on("change:checked change:value",function(t){i.fire("change"),e(t.value)}),i.state.on("change:icon",function(t){var e=t.value,n=i.classPrefix;if(void 0===e)return i.settings.icon;e=(i.settings.icon=e)?n+"ico "+n+"i-"+i.settings.icon:"",t=i.getEl().firstChild,n=t.getElementsByTagName("i")[0];e?(n&&n===t.firstChild||(n=y.document.createElement("i"),t.insertBefore(n,t.firstChild)),n.className=e):n&&t.removeChild(n)}),i.state.get("checked")&&e(!0),i._super()}}),mi=tinymce.util.Tools.resolve("tinymce.util.VK"),gi=ce.extend({init:function(i){var r=this;r._super(i),i=r.settings,r.classes.add("combobox"),r.subinput=!0,r.ariaTarget="inp",i.menu=i.menu||i.values,i.menu&&(i.icon="caret"),r.on("click",function(t){var e=t.target,n=r.getEl();if(_t.contains(n,e)||e===n)for(;e&&e!==n;)e.id&&-1!==e.id.indexOf("-open")&&(r.fire("action"),i.menu&&(r.showMenu(),t.aria&&r.menu.items()[0].focus())),e=e.parentNode}),r.on("keydown",function(t){var e;13===t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),r.parents().reverse().each(function(t){if(t.toJSON)return e=t,!1}),r.fire("submit",{data:e.toJSON()}))}),r.on("keyup",function(t){var e,n;"INPUT"===t.target.nodeName&&(e=r.state.get("value"),(n=t.target.value)!==e&&(r.state.set("value",n),r.fire("autocomplete",t)))}),r.on("mouseover",function(t){var e,n=r.tooltip().moveTo(-65535);r.statusLevel()&&-1!==t.target.className.indexOf(r.classPrefix+"status")&&(e=r.statusMessage()||"Ok",e=n.text(e).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]),n.classes.toggle("tooltip-n","bc-tc"===e),n.classes.toggle("tooltip-nw","bc-tl"===e),n.classes.toggle("tooltip-ne","bc-tr"===e),n.moveRel(t.target,e))})},statusLevel:function(t){return 0<arguments.length&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return 0<arguments.length&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var e=this,t=e.settings;e.menu||((t=t.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",e.menu=pe.create(t).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,e=this,n=e.getEl(),i=e.getEl("open"),r=e.layoutRect(),o=0,n=n.firstChild;e.statusLevel()&&"none"!==e.statusLevel()&&(o=parseInt(wt.getRuntimeStyle(n,"padding-right"),10)-parseInt(wt.getRuntimeStyle(n,"padding-left"),10));i=i?r.w-wt.getSize(i).width-10:r.w-10,r=y.document;return r.all&&(!r.documentMode||r.documentMode<=8)&&(t=e.layoutRect().h-2+"px"),_t(n).css({width:i-o,lineHeight:t}),e._super(),e},postRender:function(){var e=this;return _t(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var t,e,n,i=this,r=i._id,o=i.settings,s=i.classPrefix,a=i.state.get("value")||"",l="",c="";return"spellcheck"in o&&(c+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(c+=' maxlength="'+o.maxLength+'"'),o.size&&(c+=' size="'+o.size+'"'),o.subtype&&(c+=' type="'+o.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',i.disabled()&&(c+=' disabled="disabled"'),(t=o.icon)&&"caret"!==t&&(t=s+"ico "+s+"i-"+o.icon),e=i.state.get("text"),(t||e)&&(l='<div id="'+r+'-open" class="'+s+"btn "+s+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==t?'<i class="'+t+'"></i>':'<i class="'+s+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",i.classes.add("has-open")),'<div id="'+r+'" class="'+i.classes+'"><input id="'+r+'-inp" class="'+s+'textbox" value="'+i.encode(a,!1)+'" hidefocus="1"'+c+' placeholder="'+i.encode(o.placeholder)+'" />'+n+l+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,i){var r=this;0!==t.length?(r.menu?r.menu.items().remove():r.menu=pe.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),W.each(t,function(t){var e,n;r.menu.add({text:t.title,url:t.previewUrl,match:i,classes:"menu-item-ellipsis",onclick:(e=t.value,n=t.title,function(){r.fire("selectitem",{title:n,value:e})})})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(t){t.control.parent()===r.menu&&(t.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()}),t=r.layoutRect().w,r.menu.layoutRect({w:t,minW:0,maxW:t}),r.menu.repaint(),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])):r.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var i=this;i.state.on("change:value",function(t){i.getEl("inp").value!==t.value&&(i.getEl("inp").value=t.value)}),i.state.on("change:disabled",function(t){i.getEl("inp").disabled=t.value}),i.state.on("change:statusLevel",function(t){var e=i.getEl("status"),n=i.classPrefix,t=t.value;wt.css(e,"display","none"===t?"none":""),wt.toggleClass(e,n+"i-checkmark","ok"===t),wt.toggleClass(e,n+"i-warning","warn"===t),wt.toggleClass(e,n+"i-error","error"===t),i.classes.toggle("has-status","none"!==t),i.repaint()}),wt.on(i.getEl("status"),"mouseleave",function(){i.tooltip().hide()}),i.on("cancel",function(t){i.menu&&i.menu.visible()&&(t.stopPropagation(),i.hideMenu())});function n(t,e){e&&0<e.items().length&&e.items().eq(t)[0].focus()}return i.on("keydown",function(t){var e=t.keyCode;"INPUT"===t.target.nodeName&&(e===mi.DOWN?(t.preventDefault(),i.fire("autocomplete"),n(0,i.menu)):e===mi.UP&&(t.preventDefault(),n(-1,i.menu)))}),i._super()},remove:function(){_t(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),pi=gi.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",function(){e.repaintColor(e.value())})},repaintColor:function(t){var e=this.getEl("open"),n=e?e.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=t}catch(t){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),vi=ui.extend({showPanel:function(){var e=this,t=e.settings;e.classes.add("opened"),e.panel?e.panel.show():((n=(n=t.panel).type?{layout:"grid",items:n}:n).role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new Oe(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow());var n=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===n.substr(-1)),e.panel.classes.toggle("end","r"===n.substr(-1));t="t"===n.substr(0,1);e.panel.classes.toggle("bottom",!t),e.panel.classes.toggle("top",t),e.panel.moveRel(e.getEl(),n)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),bi=x.DOM,yi=vi.extend({init:function(t){this._super(t),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix,i=t.state.get("text"),r=t.settings.icon?n+"ico "+n+"i-"+t.settings.icon:"",o=t.settings.image?" style=\"background-image: url('"+t.settings.image+"')\"":"",s="";return i&&(t.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+t.encode(i)+"</span>"),'<div id="'+e+'" class="'+t.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+'<span id="'+e+'-preview" class="'+n+'preview"></span>'+s+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,n=e.settings.onclick;return e.on("click",function(t){t.aria&&"down"===t.aria.key||t.control!==e||bi.getParent(t.target,"."+e.classPrefix+"open")||(t.stopImmediatePropagation(),n.call(e,t))}),delete e.settings.onclick,e._super()}}),xi=tinymce.util.Tools.resolve("tinymce.util.Color"),wi=ce.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){var e,n,i,r,o,s=this,a=s.color();function l(t,e){var n=wt.getPos(t),i=e.pageX-n.x,n=e.pageY-n.y;return{x:Math.max(0,Math.min(i/t.clientWidth,1)),y:Math.max(0,Math.min(n/t.clientHeight,1))}}function c(t,e){var n=(360-t.h)/360;wt.css(i,{top:100*n+"%"}),e||wt.css(o,{left:t.s+"%",top:100-t.v+"%"}),r.style.background=xi({s:100,v:100,h:t.h}).toHex(),s.color().parse({s:t.s,v:t.v,h:t.h})}function t(t){t=l(r,t);e.s=100*t.x,e.v=100*(1-t.y),c(e),s.fire("change")}function u(t){t=l(n,t);(e=a.toHsv()).h=360*(1-t.y),c(e,!0),s.fire("change")}n=s.getEl("h"),i=s.getEl("hp"),r=s.getEl("sv"),o=s.getEl("svp"),s._repaint=function(){c(e=a.toHsv())},s._super(),s._svdraghelper=new me(s._id+"-sv",{start:t,drag:t}),s._hdraghelper=new me(s._id+"-h",{start:u,drag:u}),s._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){if(!arguments.length)return this.color().toHex();this.color().parse(t),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=xi()),this._color},renderHtml:function(){var t=this._id,o=this.classPrefix,s="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";var e='<div id="'+t+'-h" class="'+o+'colorpicker-h" style="'+("background: -ms-linear-gradient(top,"+s+");background: linear-gradient(to bottom,"+s+");")+'">'+function(){for(var t="",e="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",n=s.split(","),i=0,r=n.length-1;i<r;i++)t+='<div class="'+o+'colorpicker-h-chunk" style="height:'+100/r+"%;"+e+n[i]+",endColorstr="+n[i+1]+");-ms-"+e+n[i]+",endColorstr="+n[i+1]+')"></div>';return t}()+'<div id="'+t+'-hp" class="'+o+'colorpicker-h-marker"></div></div>';return'<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+o+'colorpicker-sv"><div class="'+o+'colorpicker-overlay1"><div class="'+o+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+o+'colorpicker-selector1"><div class="'+o+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),_i=ce.extend({init:function(t){t=W.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t),this._super(t),this.classes.add("dropzone"),t.multiple&&this.classes.add("multiple")},renderHtml:function(){var t=this.settings,e={id:this._id,hidefocus:"1"},e=wt.create("div",e,"<span>"+this.translate(t.text)+"</span>");return t.height&&wt.css(e,"height",t.height+"px"),t.width&&wt.css(e,"width",t.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){function t(t){t.preventDefault(),i.classes.toggle("dragenter"),i.getEl().className=i.classes}var i=this;i._super(),i.$el.on("dragover",function(t){t.preventDefault()}),i.$el.on("dragenter",t),i.$el.on("dragleave",t),i.$el.on("drop",function(t){var e;t.preventDefault(),i.state.get("disabled")||(e=function(t){var e=i.settings.accept;if("string"!=typeof e)return t;var n=new RegExp("("+e.split(/\s*,\s*/).join("|")+")$","i");return W.grep(t,function(t){return n.test(t.name)})}(t.dataTransfer.files),i.value=function(){return e.length?i.settings.multiple?e:e[0]:null},e.length&&i.fire("change",t))})},remove:function(){this.$el.off(),this._super()}}),Ri=ce.extend({init:function(t){var e=this;t.delimiter||(t.delimiter="»"),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",function(t){(t=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[t],index:t})}),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(t){for(var e=t||[],n="",i=this.classPrefix,r=0,o=e.length;r<o;r++)n+=(0<r?'<div class="'+i+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+i+"path-item"+(r===o-1?" "+i+"last":"")+'" data-index="'+r+'" tabindex="-1" id="'+this._id+"-"+r+'" aria-level="'+(r+1)+'">'+e[r].name+"</div>";return n=n||'<div class="'+i+'path-item"> </div>'}}),Ci=Ri.extend({postRender:function(){var o=this,s=o.settings.editor;return!1!==s.settings.elementpath&&(o.on("select",function(t){s.focus(),s.selection.select(this.row()[t.index].element),s.nodeChanged()}),s.on("nodeChange",function(t){for(var e=[],n=t.parents,i=n.length;i--;)if(1===n[i].nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return 1;if("bookmark"===t.getAttribute("data-mce-type"))return 1}}(n[i])){var r=s.fire("ResolveName",{name:n[i].nodeName.toLowerCase(),target:n[i]});if(r.isDefaultPrevented()||e.push({name:r.name,element:n[i]}),r.isPropagationStopped())break}o.row(e)})),o._super()}}),ki=Re.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this,e=t._layout,n=t.classPrefix;return t.classes.add("formitem"),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1">'+(t.settings.title?'<div id="'+t._id+'-title" class="'+n+'title">'+t.settings.title+"</div>":"")+'<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"}}),Ei=Re.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var n=this,t=n.items();n.settings.formItemDefaults||(n.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var e=t.settings.label;e&&((e=new ki(W.extend({items:{type:"label",id:t._id+"-l",text:e,flex:0,forId:t._id,disabled:t.disabled()}},n.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),n.replace(t,e),e.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var r=this;function t(){var t,e,n=0,i=[];if(!1!==r.settings.labelGapCalc)for(("children"===r.settings.labelGapCalc?r.find("formitem"):r.items()).filter("formitem").each(function(t){var e=t.items()[0],t=e.getEl().clientWidth;n=n<t?t:n,i.push(e)}),e=r.settings.labelGap||0,t=i.length;t--;)i[t].settings.minWidth=n+e}r._super(),r.on("show",t),t()}}),Hi=Ei.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this,e=t._layout,n=t.classPrefix;return t.preRender(),e.preRender(t),'<fieldset id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1">'+(t.settings.title?'<legend id="'+t._id+'-title" class="'+n+'fieldset-title">'+t.settings.title+"</legend>":"")+'<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></fieldset>"}}),Ti=0,Si=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:g(t)}},Mi={fromHtml:function(t,e){e=(e||y.document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length)throw y.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Si(e.childNodes[0])},fromTag:function(t,e){t=(e||y.document).createElement(t);return Si(t)},fromText:function(t,e){t=(e||y.document).createTextNode(t);return Si(t)},fromDom:Si,fromPoint:function(t,e,n){t=t.dom();return mt.from(t.elementFromPoint(e,n)).map(Si)}},Ni=(y.Node.ATTRIBUTE_NODE,y.Node.CDATA_SECTION_NODE,y.Node.COMMENT_NODE,y.Node.DOCUMENT_NODE),pt=(y.Node.DOCUMENT_TYPE_NODE,y.Node.DOCUMENT_FRAGMENT_NODE,y.Node.ELEMENT_NODE),Oi=(y.Node.TEXT_NODE,y.Node.PROCESSING_INSTRUCTION_NODE,y.Node.ENTITY_REFERENCE_NODE,y.Node.ENTITY_NODE,y.Node.NOTATION_NODE,function(){return Wi(0,0)}),Wi=function(t,e){return{major:t,minor:e}},Pi={nu:Wi,detect:function(t,e){e=String(e).toLowerCase();return 0===t.length?Oi():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.test(e))return i}}(t,e);if(!n)return{major:0,minor:0};t=function(t){return Number(e.replace(n,"$"+t))};return Wi(t(1),t(2))}(t,e)},unknown:Oi},Di="Firefox",Ai=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Qe("Edge",e),isChrome:Qe("Chrome",e),isIE:Qe("IE",e),isOpera:Qe("Opera",e),isFirefox:Qe(Di,e),isSafari:Qe("Safari",e)}},Bi={unknown:function(){return Ai({current:void 0,version:Pi.unknown()})},nu:Ai,edge:g("Edge"),chrome:g("Chrome"),ie:g("IE"),opera:g("Opera"),firefox:g(Di),safari:g("Safari")},Li="Windows",Ii="Android",zi="Solaris",Fi="FreeBSD",Ui=function(t){var e=t.current;return{current:e,version:t.version,isWindows:tn(Li,e),isiOS:tn("iOS",e),isAndroid:tn(Ii,e),isOSX:tn("OSX",e),isLinux:tn("Linux",e),isSolaris:tn(zi,e),isFreeBSD:tn(Fi,e)}},Vi={unknown:function(){return Ui({current:void 0,version:Pi.unknown()})},nu:Ui,windows:g(Li),ios:g("iOS"),android:g(Ii),linux:g("Linux"),osx:g("OSX"),solaris:g(zi),freebsd:g(Fi)},qi=function(t,n){return en(t,n).map(function(t){var e=Pi.detect(t.versionRegexes,n);return{current:t.name,version:e}})},Yi=function(t,n){return en(t,n).map(function(t){var e=Pi.detect(t.versionRegexes,n);return{current:t.name,version:e}})},$i=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return nn(t,"edge/")&&nn(t,"chrome")&&nn(t,"safari")&&nn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$i=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(t){return nn(t,"chrome")&&!nn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return nn(t,"msie")||nn(t,"trident")}},{name:"Opera",versionRegexes:[$i,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(Rt=function(e){return function(t){return nn(t,e)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rt("firefox")},{name:"Safari",versionRegexes:[$i,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(nn(t,"safari")||nn(t,"mobile/"))&&nn(t,"applewebkit")}}],Rt=[{name:"Windows",search:Rt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return nn(t,"iphone")||nn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Rt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rt("linux"),versionRegexes:[]},{name:"Solaris",search:Rt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rt("freebsd"),versionRegexes:[]}],Xi={browsers:g($i),oses:g(Rt)},ji=function(t){var e,n,i,r=Xi.browsers(),o=Xi.oses(),s=qi(r,t).fold(Bi.unknown,Bi.nu),a=Yi(o,t).fold(Vi.unknown,Vi.nu);return{browser:s,os:a,deviceType:(n=s,i=t,r=(e=a).isiOS()&&!0===/ipad/i.test(i),o=e.isiOS()&&!r,s=e.isAndroid()&&3===e.version.major,t=e.isAndroid()&&4===e.version.major,a=r||s||t&&!0===/mobile/i.test(i),s=e.isiOS()||e.isAndroid(),t=s&&!a,i=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(i),{isiPad:g(r),isiPhone:g(o),isTablet:g(a),isPhone:g(t),isTouch:g(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:g(i)})}},Rt=(zn=!(Ln=function(){var t=y.navigator.userAgent;return ji(t)}),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zn||(zn=!0,In=Ln.apply(null,t)),In}),Ji=pt,Gi=Ni,Ki=({detect:Rt}.detect().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),W.trim),Zi=(Rt=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}})("true"),Qi=Rt("false"),tr=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return Zi(t)}return!1}(t)&&!Qi(t)},er=function(t){t=mn(t);return ft(ut(ft(t,dn),fn).concat(ut(ft(t,cn),hn)),gn)},nr={},ir=function(t,e){var n=t.toLowerCase(),e=W.grep(e,function(t){return-1!==t.title.toLowerCase().indexOf(n)});return 1===e.length&&e[0].title===t?[]:e},rr=gi.extend({Statics:{clearHistory:function(){nr={}}},init:function(t){var e,n,i,r=this,o=(window.tinymce||I).activeEditor,s=o.settings,a=t.filetype;t.spellcheck=!1,(i=(i=s.file_picker_types||s.file_browser_callback_types)&&W.makeMap(i,/[, ]/))&&!i[a]||(!(n=s.file_picker_callback)||i&&!i[a]?!(n=s.file_browser_callback)||i&&!i[a]||(e=function(){n(r.getEl("inp").id,r.value(),a,window)}):e=function(){var t=r.fire("beforecall").meta,t=W.extend({filetype:a},t);n.call(o,function(t,e){r.value(t).fire("change",{meta:e})},r.value(),t)}),e&&(t.icon="browse",t.onaction=e),r._super(t),r.classes.add("filepicker"),xn(r,s,o.getBody(),a),wn(r,s,a)}}),or=ci.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each(function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()})}}),sr=ci.extend({recalc:function(t){var e,n,i,r,o,s,a,l,c,u,d,f,h,m,g,p,v,b,y,x,w,_,R,C,k,E,H,T,S=[],M=Math.max,N=Math.min,O=t.items().filter(":visible"),W=t.layoutRect(),P=t.paddingBox,D=t.settings,A=t.isRtl()?D.direction||"row-reversed":D.direction,B=D.align,L=t.isRtl()?D.pack||"end":D.pack,I=D.spacing||0;for("row-reversed"!==A&&"column-reverse"!==A||(O=O.set(O.toArray().reverse()),A=A.split("-")[0]),A="column"===A?(p="y",m="h",g="minH",v="maxH",y="innerH",b="top",x="deltaH",w="contentH",E="left",C="w",_="x",R="innerW",k="minW",H="right",T="deltaW","contentW"):(p="x",m="w",g="minW",v="maxW",y="innerW",b="left",x="deltaW",w="contentW",E="top",C="h",_="y",R="innerH",k="minH",H="bottom",T="deltaH","contentH"),r=W[y]-P[b]-P[b],e=h=i=0,n=O.length;e<n;e++)s=(o=O[e]).layoutRect(),r-=e<n-1?I:0,0<(a=o.settings.flex)&&(i+=a,s[v]&&S.push(o),s.flex=a),r-=s[g],h<(l=P[E]+s[k]+P[H])&&(h=l);if(d={},d[g]=r<0?W[g]-r+W[x]:W[y]-r+W[x],d[k]=h+W[T],d[w]=W[y]-r,d[A]=h,d.minW=N(d.minW,W.maxW),d.minH=N(d.minH,W.maxH),d.minW=M(d.minW,W.startMinWidth),d.minH=M(d.minH,W.startMinHeight),W.autoResize&&(d.minW!==W.minW||d.minH!==W.minH))return d.w=d.minW,d.h=d.minH,t.layoutRect(d),this.recalc(t),void(null!==t._lastRect||(t=t.parent())&&(t._lastRect=null,t.recalc()));for(u=r/i,e=0,n=S.length;e<n;e++)(c=(s=(o=S[e]).layoutRect())[v])<(l=s[g]+s.flex*u)?(r-=s[v]-s[g],i-=s.flex,s.flex=0,s.maxFlexSize=c):s.maxFlexSize=0;for(u=r/i,f=P[b],d={},0===i&&("end"===L?f=r+P[b]:"center"===L?(f=Math.round(W[y]/2-(W[y]-r)/2)+P[b])<0&&(f=P[b]):"justify"===L&&(f=P[b],I=Math.floor(r/(O.length-1)))),d[_]=P[E],e=0,n=O.length;e<n;e++)l=(s=(o=O[e]).layoutRect()).maxFlexSize||s[g],"center"===B?d[_]=Math.round(W[R]/2-s[C]/2):"stretch"===B?(d[C]=M(s[k]||0,W[R]-P[E]-P[H]),d[_]=P[E]):"end"===B&&(d[_]=W[R]-s[C]-P.top),0<s.flex&&(l+=s.flex*u),d[m]=l,d[p]=f,o.layoutRect(d),o.recalc&&o.recalc(),f+=l+I}}),ar=li.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each(function(t){t.recalc&&t.recalc()})},isNative:function(){return!0}}),lr=function(i){var e=["alignleft","aligncenter","alignright","alignjustify"],r="alignleft",t=[{text:"Left",icon:"alignleft",onclick:Rn(i,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Rn(i,"aligncenter")},{text:"Right",icon:"alignright",onclick:Rn(i,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Rn(i,"alignjustify")}];i.addMenuItem("align",{text:"Align",menu:t}),i.addButton("align",{type:"menubutton",icon:r,menu:t,onShowMenu:function(t){var n=t.control.menu;W.each(e,function(e,t){n.items().eq(t).each(function(t){return t.active(i.formatter.match(e))})})},onPostRender:function(t){var n=t.control;W.each(e,function(e,t){Cn(i,e,function(t){n.icon(r),t&&n.icon(e)})})}}),W.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,e){i.addButton(e,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:kn(i,e)})})},cr=function(t){Tn(t)},ur=function(t){Nn(t)},dr=function(n,t){var i=t.length;return W.each(t,function(t){t.menu&&(t.hidden=0===dr(n,t.menu));var e=t.format;e&&(t.hidden=!n.formatter.canApply(e)),t.hidden&&i--}),i},fr=function(n,t){var i=t.items().length;return t.items().each(function(t){t.menu&&t.visible(0<fr(n,t.menu)),!t.menu&&t.settings.menu&&t.visible(0<dr(n,t.settings.menu));var e=t.settings.format;e&&t.visible(n.formatter.canApply(e)),t.visible()||i--}),i},hr=function(t){var n,r,o,s,e,i,a=(r=0,o=[],e=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],s=function(t){var i=[];if(t)return W.each(t,function(t){var e,n={text:t.title,icon:t.icon};t.items?n.menu=s(t.items):(e=t.format||"custom"+r++,t.format||(t.name=e,o.push(t)),n.format=e,n.cmd=t.cmd),i.push(n)}),i},(n=t).on("init",function(){W.each(o,function(t){n.formatter.register(t.name,t)})}),{type:"menu",items:n.settings.style_formats_merge?n.settings.style_formats?s(e.concat(n.settings.style_formats)):s(e):s(n.settings.style_formats||e),onPostRender:function(t){n.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return n.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",function(){var t=e.settings.format;t&&(e.disabled(!n.formatter.canApply(t)),e.active(n.formatter.match(t))),(t=e.settings.cmd)&&e.active(n.queryCommandState(t))})},onclick:function(){this.settings.format&&Rn(n,this.settings.format)(),this.settings.cmd&&n.execCommand(this.settings.cmd)}}});e=a,t.addMenuItem("formats",{text:"Formats",menu:e}),a=a,(i=t).addButton("styleselect",{type:"menubutton",text:"Formats",menu:a,onShowMenu:function(){i.settings.style_formats_autohide&&fr(i,this.menu)}})},mr=function(t){var e,n,i=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:(e=t,n=i,W.map(n,function(t){return{text:t[0],onclick:Rn(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}}))}),t.addButton("formatselect",On(t,i))},gr=function(e,t){var n;if("string"==typeof t)n=t.split(" ");else if(W.isArray(t))return function(t){for(var e=[],n=0,i=t.length;n<i;++n){if(!gt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);yt.apply(e,t[n])}return e}(W.map(t,function(t){return gr(e,t)}));return n=W.grep(n,function(t){return"|"===t||t in e.menuItems}),W.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},pr=function(t){var e;(e=t).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Dn(e)),this.menu.renderNew()}})},vr=function(t){var n;An(t),n=t,W.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,e){n.addMenuItem(e,{text:t[0],icon:e,shortcut:t[2],cmd:t[1]})}),n.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Rn(n,"code")})},br=function(t){var e;(e=t).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Bn(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Bn(e,"redo"),cmd:"redo"}),(t=t).addButton("undo",{tooltip:"Undo",onPostRender:Bn(t,"undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:Bn(t,"redo"),cmd:"redo"})},yr=function(t){var n;(t=t).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(n=t,function(){var e=this;n.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(n.hasVisual)}),cmd:"mceToggleVisualAid"})},xr={setup:function(t){var e;t.rtl&&(te.rtl=!0),t.on("mousedown progressstate",function(){Oe.hideAll()}),(e=t).settings.ui_container&&(b.container=_n(Mi.fromDom(y.document.body),e.settings.ui_container).fold(g(null),function(t){return t.dom()})),ce.tooltips=!b.iOS,te.translate=function(t){return I.translate(t)},mr(t),lr(t),vr(t),br(t),ur(t),cr(t),hr(t),yr(t),pr(t)}},wr=ci.extend({recalc:function(t){var e,n,i,r,o,s,a,l,c,u,d,f,h,m,g,p,v,b=[],y=[],x=t.settings,w=t.items().filter(":visible"),_=t.layoutRect(),R=x.columns||Math.ceil(Math.sqrt(w.length)),C=Math.ceil(w.length/R),k=x.spacingH||x.spacing||0,E=x.spacingV||x.spacing||0,H=x.alignH||x.align,T=x.alignV||x.align,S=t.paddingBox,M="reverseRows"in x?x.reverseRows:t.isRtl();for(H&&"string"==typeof H&&(H=[H]),T&&"string"==typeof T&&(T=[T]),D=0;D<R;D++)b.push(0);for(s=0;s<C;s++)y.push(0);for(s=0;s<C;s++)for(D=0;D<R&&(o=w[s*R+D]);D++)h=(r=o.layoutRect()).minW,m=r.minH,b[D]=h>b[D]?h:b[D],y[s]=m>y[s]?m:y[s];for(g=_.innerW-S.left-S.right,D=d=0;D<R;D++)d+=b[D]+(0<D?k:0),g-=(0<D?k:0)+b[D];for(p=_.innerH-S.top-S.bottom,s=f=0;s<C;s++)f+=y[s]+(0<s?E:0),p-=(0<s?E:0)+y[s];if(d+=S.left+S.right,f+=S.top+S.bottom,i={},i.minW=d+(_.w-_.innerW),i.minH=f+(_.h-_.innerH),i.contentW=i.minW-_.deltaW,i.contentH=i.minH-_.deltaH,i.minW=Math.min(i.minW,_.maxW),i.minH=Math.min(i.minH,_.maxH),i.minW=Math.max(i.minW,_.startMinWidth),i.minH=Math.max(i.minH,_.startMinHeight),_.autoResize&&(i.minW!==_.minW||i.minH!==_.minH))return i.w=i.minW,i.h=i.minH,t.layoutRect(i),this.recalc(t),void(null!==t._lastRect||(v=t.parent())&&(v._lastRect=null,v.recalc()));_.autoResize&&((i=t.layoutRect(i)).contentW=i.minW-_.deltaW,i.contentH=i.minH-_.deltaH);var N="start"!==x.packV&&0<p?Math.floor(p/C):0,O=0,W=x.flexWidths;if(W)for(D=0;D<W.length;D++)O+=W[D];else O=R;for(var P=g/O,D=0;D<R;D++)b[D]+=W?W[D]*P:P;for(l=S.top,s=0;s<C;s++){for(a=S.left,n=y[s]+N,D=0;D<R&&(o=w[M?s*R+R-1-D:s*R+D]);D++)c=o.settings,r=o.layoutRect(),e=Math.max(b[D],r.startMinWidth),r.x=a,r.y=l,"center"===(u=c.alignH||(H?H[D]||H[0]:null))?r.x=a+e/2-r.w/2:"right"===u?r.x=a+e-r.w:"stretch"===u&&(r.w=e),"center"===(u=c.alignV||(T?T[D]||T[0]:null))?r.y=l+n/2-r.h/2:"bottom"===u?r.y=l+n-r.h:"stretch"===u&&(r.h=n),o.layoutRect(r),a+=e+k,o.recalc&&o.recalc();l+=n+E}}}),_r=ce.extend({renderHtml:function(){var t=this;return t.classes.add("iframe"),t.canFocus=!1,'<iframe id="'+t._id+'" class="'+t.classes+'" tabindex="-1" src="'+(t.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,e){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=t,e&&e()):w.setTimeout(function(){n.html(t)}),this}}),Rr=ce.extend({init:function(t){this._super(t),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this,e=t.classPrefix;return'<div id="'+t._id+'" class="'+t.classes+'"><div id="'+t._id+'-body">'+t.encode(t.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),Cr=ce.extend({init:function(t){var e=this;e._super(t),e.classes.add("widget").add("label"),e.canFocus=!1,t.multiline&&e.classes.add("autoscroll"),t.strong&&e.classes.add("strong")},initLayoutRect:function(){var t=this,e=t._super();return t.settings.multiline&&(wt.getSize(t.getEl()).width>e.maxW&&(e.minW=e.maxW,t.classes.add("multiline")),t.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,wt.getSize(t.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this,i=n.settings.forId,r=n.settings.html||n.encode(n.state.get("text"));return(i=!i&&(e=n.settings.forName)&&(t=n.getRoot().find("#"+e)[0])?t._id:i)?'<label id="'+n._id+'" class="'+n.classes+'"'+(i?' for="'+i+'"':"")+">"+r+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+r+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),kr=Re.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(t){t.classes.add("toolbar-item")}),this._super()}}),Er=kr.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Hr=ui.extend({init:function(t){var e=this;e._renderOpen=!0,e._super(t),t=e.settings,e.classes.add("menubtn"),t.fixedWidth&&e.classes.add("fixed-width"),e.aria("haspopup",!0),e.state.set("menu",t.menu||e.render())},showMenu:function(t){var e=this;if(e.menu&&e.menu.visible()&&!1!==t)return e.hideMenu();e.menu||(n=e.state.get("menu")||[],e.classes.add("opened"),n.length?n={type:"menu",animate:!0,items:n}:(n.type=n.type||"menu",n.animate=!0),n.renderTo?e.menu=n.parent(e).show().renderTo():e.menu=pe.create(n).parent(e).renderTo(),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control.parent()===e.menu&&(t.stopPropagation(),e.focus(),e.hideMenu())}),e.menu.on("select",function(){e.focus()}),e.menu.on("show hide",function(t){"hide"===t.type&&t.control.parent()===e&&e.classes.remove("opened-under"),t.control===e.menu&&(e.activeMenu("show"===t.type),e.classes.toggle("opened","show"===t.type)),e.aria("expanded","show"===t.type)}).fire("show")),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.repaint(),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var t=e.menu.layoutRect(),n=e.$el.offset().top+e.layoutRect().h;n>t.y&&n<t.y+t.h&&e.classes.add("opened-under"),e.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix,i=t.settings.icon,r=t.state.get("text"),o="",s=t.settings.image;return s=s?(i="none"," style=\"background-image: url('"+(s="string"!=typeof s?y.window.getSelection?s[0]:s[1]:s)+"')\""):"",r&&(t.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+t.encode(r)+"</span>"),i=t.settings.icon?n+"ico "+n+"i-"+i:"",t.aria("role",t.parent()instanceof Er?"menuitem":"button"),'<div id="'+e+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+e+'"><button id="'+e+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+s+"></i>":"")+o+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var i=this;return i.on("click",function(t){t.control===i&&function(t,e){for(;t;){if(e===t)return 1;t=t.parentNode}}(t.target,i.getEl())&&(i.focus(),i.showMenu(!t.aria),t.aria&&i.menu.items().filter(":visible")[0].focus())}),i.on("mouseenter",function(t){var e,n=t.control,t=i.parent();n&&t&&n instanceof Hr&&n.parent()===t&&(t.items().filter("MenuButton").each(function(t){t.hideMenu&&t!==n&&(t.menu&&t.menu.visible()&&(e=!0),t.hideMenu())}),e&&(n.focus(),n.showMenu()))}),i._super()},bindStates:function(){var t=this;return t.state.on("change:menu",function(){t.menu&&t.menu.remove(),t.menu=null}),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});function Tr(i,r){var o,s,a=this,l=te.classPrefix;a.show=function(t,e){function n(){o&&(_t(i).append('<div class="'+l+"throbber"+(r?" "+l+"throbber-inline":"")+'"></div>'),e&&e())}return a.hide(),o=!0,t?s=w.setTimeout(n,t):n(),a},a.hide=function(){var t=i.lastChild;return w.clearTimeout(s),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),o=!1,a}}var Sr=Oe.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=W.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu"),t.animate&&11!==b.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,n=this;function i(){n.throbber&&(n.throbber.hide(),n.throbber=null)}n.settings.itemsFactory&&(n.throbber||(n.throbber=new Tr(n.getEl("body"),!0),0===n.items().length?(n.throbber.show(),n.fire("loading")):n.throbber.show(100,function(){n.items().remove(),n.fire("loading")}),n.on("hide close",i)),n.requestTime=e=(new Date).getTime(),n.settings.itemsFactory(function(t){0!==t.length?n.requestTime===e&&(n.getEl().style.width="",n.getEl("body").style.width="",i(),n.items().remove(),n.getEl("body").innerHTML="",n.add(t),n.renderNew(),n.fire("loaded")):n.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each(function(t){t=t.settings;if(t.icon||t.image||t.selectable)return!(e._hasIcons=!0)}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?w.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),Mr=Hr.extend({init:function(i){var t,r,o,n,s=this;s._super(i),i=s.settings,s._values=t=i.values,t&&(void 0!==i.value&&function t(e){for(var n=0;n<e.length;n++){if(r=e[n].selected||i.value===e[n].value)return o=o||e[n].text,s.state.set("value",e[n].value),1;if(e[n].menu&&t(e[n].menu))return 1}}(t),!r&&0<t.length&&(o=t[0].text,s.state.set("value",t[0].value)),s.state.set("menu",t)),s.state.set("text",i.text||o),s.classes.add("listbox"),s.on("select",function(t){var e=t.control;n&&(t.lastControl=n),i.multiple?e.active(!e.active()):s.value(t.control.value()),n=e})},value:function(n){return 0===arguments.length?this.state.get("value"):(void 0===n||(this.settings.values&&!function e(t){return ct(t,function(t){return t.menu?e(t.menu):t.value===n})}(this.settings.values)?null===n&&this.state.set("value",null):this.state.set("value",n)),this)},bindStates:function(){var n=this;return n.on("show",function(t){var e;t=t.control,e=n.value(),t instanceof Sr&&t.items().each(function(t){t.hasMenus()||t.active(t.value()===e)})}),n.state.on("change:value",function(t){t=function t(e,n){var i;if(e)for(var r=0;r<e.length;r++){if(e[r].value===n)return e[r];if(e[r].menu&&(i=t(e[r].menu,n)))return i}}(n.state.get("menu"),t.value);t?n.text(t.text):n.text(n.settings.text)}),n._super()}}),Nr=ce.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e,n=this;n._super(t),t=n.settings,n.classes.add("menu-item"),t.menu&&n.classes.add("menu-item-expand"),t.preview&&n.classes.add("menu-item-preview"),"-"!==(e=n.state.get("text"))&&"|"!==e||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),t.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(t){t.preventDefault()}),t.menu&&!t.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,t=n.settings,i=n.parent();i.items().each(function(t){t!==n&&t.hideMenu()}),t.menu&&((e=n.menu)?e.show():((e=t.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",i.settings.itemDefaults&&(e.itemDefaults=i.settings.itemDefaults),(e=n.menu=pe.create(e).parent(n).renderTo()).reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(t){t.control.items&&t.control.items().each(function(t){t.active(t.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.classes.remove("selected")}),e.submenu=!0),e._parentMenu=i,e.classes.add("menu-sub"),i=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),e.moveRel(n.getEl(),i),i="menu-sub-"+(e.rel=i),e.classes.remove(e._lastRel).add(i),e._lastRel=i,n.classes.add("selected"),n.aria("expanded",!0))},hideMenu:function(){var t=this;return t.menu&&(t.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),t.menu.hide(),t.aria("expanded",!1)),t},renderHtml:function(){var t,e=this,n=e._id,i=e.settings,r=e.classPrefix,o=e.state.get("text"),s=e.settings.icon,a="",l=i.shortcut,c=e.encode(i.url);function u(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(t){var e=i.match||"";return e?t.replace(new RegExp(u(e),"gi"),function(t){return"!mce~match["+t+"]mce~match!"}):t}function f(t){return t.replace(new RegExp(u("!mce~match["),"g"),"<b>").replace(new RegExp(u("]mce~match!"),"g"),"</b>")}return s&&e.parent().classes.add("menu-has-icons"),i.image&&(a=" style=\"background-image: url('"+i.image+"')\""),l=l&&function(t){var e,n,i={},i=b.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"};for(t=t.split("+"),e=0;e<t.length;e++)(n=i[t[e].toLowerCase()])&&(t[e]=n);return t.join("+")}(l),s=r+"ico "+r+"i-"+(e.settings.icon||"none"),t="-"!==o?'<i class="'+s+'"'+a+"></i> ":"",o=f(e.encode(d(o))),c=f(e.encode(d(c))),'<div id="'+n+'" class="'+e.classes+'" tabindex="-1">'+t+("-"!==o?'<span id="'+n+'-text" class="'+r+'text">'+o+"</span>":"")+(l?'<div id="'+n+'-shortcut" class="'+r+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+r+'caret"></div>':"")+(c?'<div class="'+r+'menu-item-link">'+c+"</div>":"")+"</div>"},postRender:function(){var t,e=this,n=e.settings,i=n.textStyle;return!(i="function"==typeof i?i.call(this):i)||(t=e.getEl("text"))&&(t.setAttribute("style",i),e._textStyle=i),e.on("mouseenter click",function(t){t.control===e&&(n.menu||"click"!==t.type?(e.showMenu(),t.aria&&e.menu.focus(!0)):(e.fire("select"),w.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){return this.parent().items().each(function(t){t.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(t){var e,n,i;return n=t,(i=(e=this)._textStyle)&&((e=e.getEl("text")).setAttribute("style",i),n&&(e.style.color="",e.style.backgroundColor="")),void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Or=hi.extend({Defaults:{classes:"radio",role:"radio"}}),Wr=ce.extend({renderHtml:function(){var t=this,e=t.classPrefix;return t.classes.add("resizehandle"),"both"===t.settings.direction&&t.classes.add("resizehandle-both"),t.canFocus=!1,'<div id="'+t._id+'" class="'+t.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new me(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Pr(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}var Dr=ce.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var n=this;n._super(t),n.settings.size&&(n.size=n.settings.size),n.settings.options&&(n._options=n.settings.options),n.on("keydown",function(t){var e;13===t.keyCode&&(t.preventDefault(),n.parents().reverse().each(function(t){if(t.toJSON)return e=t,!1}),n.fire("submit",{data:e.toJSON()}))})},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t=this,e="",n=Pr(t._options);return t.size&&(e=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+e+">"+n+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=Pr(t.value)}),e._super()}});function Ar(t,e,n){return t=n<(t=t<e?e:t)?n:t}function Br(t,e,n){t.setAttribute("aria-"+e,n)}function Lr(t,e){var n,i="v"===t.settings.orientation?(n="top",o="height","h"):(n="left",o="width","w"),r=t.getEl("handle"),o=((t.layoutRect()[i]||100)-wt.getSize(r)[o])*((e-t._minValue)/(t._maxValue-t._minValue))+"px";r.style[n]=o,r.style.height=t.layoutRect().h+"px",Br(r,"valuenow",e),Br(r,"valuetext",""+t.settings.previewFilter(e)),Br(r,"valuemin",t._minValue),Br(r,"valuemax",t._maxValue)}function Ir(){return{Selector:Wt,Collection:It,ReflowQueue:qt,Control:te,Factory:pe,KeyboardNavigation:ve,Container:Re,DragHelper:me,Scrollable:Ce,Panel:ke,Movable:ae,Resizable:Ee,FloatPanel:Oe,Window:Ie,MessageBox:ze,Tooltip:le,Widget:ce,Progress:ue,Notification:de,Layout:li,AbsoluteLayout:ci,Button:ui,ButtonGroup:fi,Checkbox:hi,ComboBox:gi,ColorBox:pi,PanelButton:vi,ColorButton:yi,ColorPicker:wi,Path:Ri,ElementPath:Ci,FormItem:ki,Form:Ei,FieldSet:Hi,FilePicker:rr,FitLayout:or,FlexLayout:sr,FlowLayout:ar,FormatControls:xr,GridLayout:wr,Iframe:_r,InfoBox:Rr,Label:Cr,Toolbar:kr,MenuBar:Er,MenuButton:Hr,MenuItem:Nr,Throbber:Tr,Menu:Sr,ListBox:Mr,Radio:Or,ResizeHandle:Wr,SelectBox:Dr,Slider:zr,Spacer:Fr,SplitButton:Ur,StackLayout:Vr,TabPanel:qr,TextBox:Yr,DropZone:_i,BrowseButton:di}}var zr=ce.extend({init:function(t){var e=this;t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),e._super(t),e.classes.add("slider"),"v"===t.orientation&&e.classes.add("vertical"),e._minValue=vt(t.minValue)?t.minValue:0,e._maxValue=vt(t.maxValue)?t.maxValue:100,e._initValue=e.state.get("value")},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-handle" class="'+e+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,e,n,i,r,o,s,a,l,c,u,d,f,h,m,g,p=this;function v(t){var e,n,i,r=p.value();r=Ar(((r+(i=e=s))/((n=a)-i)+.05*t)*(n-e)-e,s,a),p.value(r),p.fire("dragstart",{value:r}),p.fire("drag",{value:r}),p.fire("dragend",{value:r})}t=p._minValue,e=p._maxValue,o="v"===p.settings.orientation?(n="screenY",i="top",r="height","h"):(n="screenX",i="left",r="width","w"),p._super(),s=t,a=e,p.on("keydown",function(t){switch(t.keyCode){case 37:case 38:v(-1);break;case 39:case 40:v(1)}}),l=t,c=e,u=p.getEl("handle"),p._dragHelper=new me(p._id,{handle:p._id+"-handle",start:function(t){d=t[n],f=parseInt(p.getEl("handle").style[i],10),h=(p.layoutRect()[o]||100)-wt.getSize(u)[r],p.fire("dragstart",{value:g})},drag:function(t){t=t[n]-d;m=Ar(f+t,0,h),u.style[i]=m+"px",g=l+m/h*(c-l),p.value(g),p.tooltip().text(""+p.settings.previewFilter(g)).show().moveRel(u,"bc tc"),p.fire("drag",{value:g})},stop:function(){p.tooltip().hide(),p.fire("dragend",{value:g})}})},repaint:function(){this._super(),Lr(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){Lr(e,t.value)}),e._super()}}),Fr=ce.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),Ur=Hr.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,e=this.getEl(),n=this.layoutRect();return this._super(),t=e.firstChild,e=e.lastChild,_t(t).css({width:n.w-wt.getSize(e).width,height:n.h-2}),_t(e).css({height:n.h-2}),this},activeMenu:function(t){_t(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix,i=t.state.get("icon"),r=t.state.get("text"),o=t.settings,s="",a=o.image;return a=a?(i="none"," style=\"background-image: url('"+(a="string"!=typeof a?y.window.getSelection?a[0]:a[1]:a)+"')\""):"",i=o.icon?n+"ico "+n+"i-"+i:"",r&&(t.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+t.encode(r)+"</span>"),o="boolean"==typeof o.active?' aria-pressed="'+o.active+'"':"",'<div id="'+e+'" class="'+t.classes+'" role="button"'+o+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+a+"></i>":"")+s+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(i?" ":"")+t._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(t){var e=t.target;if(t.control===this)for(;e;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===e.nodeName&&-1===e.className.indexOf("open"))return t.stopImmediatePropagation(),void(n&&n.call(this,t));e=e.parentNode}}),delete this.settings.onclick,this._super()}}),Vr=ar.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),qr=ke.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),_t(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+n,(t=this.getEl("t"+n)).setAttribute("aria-selected","true"),_t(t).addClass(this.classPrefix+"active"),this.items()[n].show().fire("showtab"),this.reflow(),this.items().each(function(t,e){n!==e&&t.hide()})},renderHtml:function(){var n=this,t=n._layout,i="",r=n.classPrefix;return n.preRender(),t.preRender(n),n.items().each(function(t,e){e=n._id+"-t"+e;t.aria("role","tabpanel"),t.aria("labelledby",e),i+='<div id="'+e+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+n.encode(t.settings.title)+"</div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+r+'tabs" role="tablist">'+i+'</div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+t.renderHtml(n)+"</div></div>"},postRender:function(){var i=this;i._super(),i.settings.activeTab=i.settings.activeTab||0,i.activateTab(i.settings.activeTab),this.on("click",function(t){var e=t.target.parentNode;if(e&&e.id===i._id+"-head")for(var n=e.childNodes.length;n--;)e.childNodes[n]===t.target&&i.activateTab(n)})},initLayoutRect:function(){var e,t=this,n=wt.getSize(t.getEl("head")).width;n=n<0?0:n,e=0,t.items().each(function(t){n=Math.max(n,t.layoutRect().minW),e=Math.max(e,t.layoutRect().minH)}),t.items().each(function(t){t.settings.x=0,t.settings.y=0,t.settings.w=n,t.settings.h=e,t.layoutRect({x:0,y:0,w:n,h:e})});var i=wt.getSize(t.getEl("head")).height;return t.settings.minWidth=n,t.settings.minHeight=e+i,(t=t._super()).deltaH+=i,t.innerH=t.h-t.deltaH,t}}),Yr=ce.extend({init:function(t){var n=this;n._super(t),n.classes.add("textbox"),t.multiline?n.classes.add("multiline"):(n.on("keydown",function(t){var e;13===t.keyCode&&(t.preventDefault(),n.parents().reverse().each(function(t){if(t.toJSON)return e=t,!1}),n.fire("submit",{data:e.toJSON()}))}),n.on("keyup",function(t){n.state.set("value",t.target.value)}))},repaint:function(){var t,e=this,n=0,i=e.getEl().style,r=e._layoutRect,o=e._lastRepaintRect||{},s=y.document;return!e.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(i.lineHeight=r.h-n+"px"),s=(t=e.borderBox).left+t.right+8,n=t.top+t.bottom+(e.settings.multiline?8:0),r.x!==o.x&&(i.left=r.x+"px",o.x=r.x),r.y!==o.y&&(i.top=r.y+"px",o.y=r.y),r.w!==o.w&&(i.width=r.w-s+"px",o.w=r.w),r.h!==o.h&&(i.height=r.h-n+"px",o.h=r.h),e._lastRepaintRect=o,e.fire("repaint",{},!1),e},renderHtml:function(){var t,e=this,n=e.settings,i={id:e._id,hidefocus:"1"};return W.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){i[t]=n[t]}),e.disabled()&&(i.disabled="disabled"),n.subtype&&(i.type=n.subtype),(t=wt.create(n.multiline?"textarea":"input",i)).value=e.state.get("value"),t.className=e.classes.toString(),t.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),Rt=function(n){n.ui?W.each(Ir(),function(t,e){n.ui[e]=t}):n.ui=Ir()};W.each(Ir(),function(t,e){pe.add(e,t)}),Rt(window.tinymce||{}),v.add("inlite",function(t){var e=Ze();return xr.setup(t),ni(t,e),Ue(t,e)})}(window);
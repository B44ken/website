!function(y){"use strict";function d(e){return!1!==p(e)}function f(e){return e.getParam("toolbar_items_size")}function l(e){return e.getParam("menu")}function h(e){return!1===e.settings.skin}function a(e){return!1===(e=e.getParam("resize","vertical"))?"none":"both"===e?"both":"vertical"}function n(t,n){return function(){var e=t.find(n)[0];e&&e.focus(!0)}}function m(){}function c(e){return function(){return e}}var e=tinymce.util.Tools.resolve("tinymce.ThemeManager"),u=tinymce.util.Tools.resolve("tinymce.EditorManager"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=function(e){return e.getParam("menubar")},v=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),b=tinymce.util.Tools.resolve("tinymce.ui.Factory"),x=tinymce.util.Tools.resolve("tinymce.util.I18n"),i=function(e){return e.fire("SkinLoaded")},w=function(e){return e.fire("ResizeEditor")},_=function(e){return e.fire("BeforeRenderUI")},R=function(e,t){e.shortcuts.add("Alt+F9","",n(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",n(t,"toolbar")),e.shortcuts.add("Alt+F11","",n(t,"elementpath")),t.on("cancel",function(){e.focus()})},C=tinymce.util.Tools.resolve("tinymce.geom.Rect"),E=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=c(!1),s=c(!0),k=(Ee={fold:function(e,t){return e()},is:o,isSome:o,isNone:s,getOr:r,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:r,orThunk:t,map:di=function(){return k},each:m,bind:di,exists:o,forall:s,filter:di,equals:Ee=function(e){return e.isNone()},equals_:Ee,toArray:function(){return[]},toString:c("none()")},Object.freeze&&Object.freeze(Ee),Ee);function t(e){return e()}function r(e){return e}function H(n,e,i){var r,o=[];if(e)return g.each(e.split(/[ ,]/),function(t){function e(){var e=n.selection;t.settings.stateSelector&&e.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&e.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}"|"===t?r=null:(r||(r={type:"buttongroup",items:[]},o.push(r)),n.buttons[t]&&((t="function"==typeof(t=n.buttons[t])?t():t).type=t.type||"button",t.size=i,t=b.create(t),r.items.push(t),n.initialized?e():n.on("init",e)))}),{type:"toolbar",layout:"flow",items:o}}function S(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}}function T(e,t){e.moveTo(t.left,t.top)}function M(e,t,n,i,r,o){return o=S({x:t,y:n,w:o.w,h:o.h}),o=e?e({elementRect:S(i),contentAreaRect:S(r),panelRect:o}):o}function N(e,t){return e=e,t=t,-1===(t=ie.call(e,t))?X.none():X.some(t)}function P(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n))return!0;return!1}function W(e,t){for(var n=e.length,i=new Array(n),r=0;r<n;r++){var o=e[r];i[r]=t(o,r)}return i}function D(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}function O(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i)&&n.push(o)}return n}function A(){return{name:"|",item:{text:"|"}}}function B(e,t){return"|"===e?A():t?{name:e,item:t}:null}function L(e,t){return function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n))return X.some(n);return X.none()}(e,function(e){return e.name===t}).isSome()}function z(e){return e&&"|"===e.item.text}function I(t,e,n,i){var r,o,s,a,l,c,u;return e?(o=e[i],a=!0):o=oe[i],o&&(r={text:o.title},s=[],g.each((o.items||"").split(/[ ,]/),function(e){e=B(e,t[e]);e&&s.push(e)}),a||g.each(t,function(e,t){e.context!==i||L(s,t)||("before"===e.separator&&s.push(A()),e.prependToContext?s.unshift(B(t,e)):s.push(B(t,e)),"after"===e.separator&&s.push(A()))}),r.menu=W((l=n,c=O(s,function(e){return!1===l.hasOwnProperty(e.name)}),u=O(c,function(e,t){return!z(e)||!z(c[t-1])}),O(u,function(e,t){return!z(e)||0<t&&t<u.length-1})),function(e){return e.item}),!r.menu.length)?null:r}function F(e){return{width:e.clientWidth,height:e.clientHeight}}function U(e,t,n){var i=e.getContainer(),r=e.getContentAreaContainer().firstChild,o=F(i),s=F(r);null!==t&&(t=Math.max(e.getParam("min_width",100,"number"),t),t=Math.min(e.getParam("max_width",65535,"number"),t),ae.setStyle(i,"width",t+(o.width-s.width)),ae.setStyle(r,"width",t)),n=Math.max(e.getParam("min_height",100,"number"),n),n=Math.min(e.getParam("max_height",65535,"number"),n),ae.setStyle(r,"height",n),w(e)}function V(e,t,n){var i;(n=e.settings[n])&&n((i=t.getEl("body"),{element:function(){return i}}))}function Y(l,c,u){return function(e){var t,n,i,r,o=e.control,s=o.parents().filter("panel")[0],a=s.find("#"+c)[0],e=(r=u,t=c,g.grep(r,function(e){return e.name===t})[0]);n=c,i=s,r=u,g.each(r,function(e){var t=i.items().filter("#"+e.name)[0];t&&t.visible()&&e.name!==n&&(V(e,t,"onhide"),t.visible(!1))}),o.parent().items().each(function(e){e.active(!1)}),a&&a.visible()?(V(e,a,"onhide"),a.hide(),o.active(!1)):(a?a.show():(a=b.create({type:"container",name:c,layout:"stack",classes:"sidebar-panel",html:""}),s.prepend(a),V(e,a,"onrender")),V(e,a,"onshow"),o.active(!0)),w(l)}}function $(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}}var q=function(n){function e(){return r}function t(e){return e(n)}var i=c(n),r={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:s,isNone:o,getOr:i,getOrThunk:i,getOrDie:i,getOrNull:i,getOrUndefined:i,or:e,orThunk:e,map:function(e){return q(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?r:k},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(o,function(e){return t(n,e)})}};return r},X={some:q,none:di,from:function(e){return null==e?k:q(e)}},j=function(e){return e?e.getRoot().uiContainer:null},J={getUiContainerDelta:function(e){var t=j(e);if(t&&"static"!==v.DOM.getStyle(t,"position",!0)){var n=v.DOM.getPos(t),e=t.scrollLeft-n.x,n=t.scrollTop-n.y;return X.some({x:e,y:n})}return X.none()},setUiContainer:function(e,t){e=v.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=e},getUiContainer:j,inheritUiContainer:function(e,t){return t.uiContainer=j(e)}},G=H,K=function(t,n){var e,i,r=[];if(g.each(!1===(i=(e=t).getParam("toolbar"))?[]:g.isArray(i)?g.grep(i,function(e){return 0<e.length}):function(e,t){for(var n=[],i=1;i<10;i++){var r=e["toolbar"+i];if(!r)break;n.push(r)}t=e.toolbar?[e.toolbar]:[t];return 0<n.length?n:t}(e.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),function(e){(e=e)&&r.push(H(t,e,n))}),r.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:r}},Z=v.DOM,Q=function(f){function o(){return f.contextToolbars||[]}function s(e,t){var n,i=f.getParam("inline_toolbar_position_handler");if(!f.removed){if(!e||!e.toolbar.panel)return d=f,g.each(d.contextToolbars,function(e){e.panel&&e.panel.hide()}),0;var r=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],o=e.toolbar.panel;t&&o.show(),c=e.element,u=Z.getPos(f.getContentAreaContainer()),d=f.dom.getRect(c),"BODY"===(c=f.dom.getRoot()).nodeName&&(d.x-=c.ownerDocument.documentElement.scrollLeft||c.scrollLeft,d.y-=c.ownerDocument.documentElement.scrollTop||c.scrollTop),d.x+=u.x,d.y+=u.y;var s,a,l,t=d,c=Z.getRect(o.getEl()),u=Z.getRect(f.getContentAreaContainer()||f.getBody()),d=J.getUiContainerDelta(o).getOr({x:0,y:0});t.x+=d.x,t.y+=d.y,c.x+=d.x,c.y+=d.y,u.x+=d.x,u.y+=d.y,"inline"!==Z.getStyle(e.element,"display",!0)&&(d=e.element.getBoundingClientRect(),t.w=d.width,t.h=d.height),f.inline||(u.w=f.getDoc().documentElement.offsetWidth),f.selection.controlSelection.isResizable(e.element)&&t.w<25&&(t=C.inflate(t,0,8)),r=C.findBestRelativePosition(c,t,u,r),t=C.clamp(t,u),r?(n=C.relativePosition(c,t,r),T(o,M(i,n.x,n.y,t,u,c))):(u.h+=c.h,(t=C.intersect(u,t))?(r=C.findBestRelativePosition(c,t,u,["bc-tc","bl-tl","br-tr"]))?(n=C.relativePosition(c,t,r),T(o,M(i,n.x,n.y,t,u,c))):T(o,M(i,t.x,t.y,t,u,c)):o.hide()),s=o,l=function(e,t){return e===t},a=(a=r)?a.substr(0,2):"",g.each({t:"down",b:"up"},function(e,t){s.classes.toggle("arrow-"+e,l(t,a.substr(0,1)))}),g.each({l:"left",r:"right"},function(e,t){s.classes.toggle("arrow-"+e,l(t,a.substr(1,1)))})}}function a(e){return function(){E.requestAnimationFrame(function(){f.selection&&s(i(f.selection.getNode()),e)})}}function t(e){var t,n,i,r;if(e.toolbar.panel)return e.toolbar.panel.show(),s(e),0;t=b.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:G(f,e.toolbar.items),oncancel:function(){f.focus()}}),J.setUiContainer(f,t),n=t,l||(i=a(!0),r=J.getUiContainer(n),l=f.selection.getScrollContainer()||f.getWin(),Z.bind(l,"scroll",i),Z.bind(r,"scroll",i),f.on("remove",function(){Z.unbind(l,"scroll",i),Z.unbind(r,"scroll",i)})),(e.toolbar.panel=t).renderTo().reflow(),s(e)}function n(){g.each(o(),function(e){e.panel&&e.panel.hide()})}var l,i=function(e){for(var t,n=o(),i=f.$(e).parents().add(e),r=i.length-1;0<=r;r--)for(t=n.length-1;0<=t;t--)if(n[t].predicate(i[r]))return{toolbar:n[t],element:i[r]};return null};f.on("click keyup setContent ObjectResized",function(e){"setcontent"===e.type&&!e.selection||E.setEditorTimeout(f,function(){var e=i(f.selection.getNode());e?(n(),t(e)):n()})}),f.on("blur hide contextmenu",n),f.on("ObjectResizeStart",function(){var e=i(f.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),f.on("ResizeEditor ResizeWindow",a(!0)),f.on("nodeChange",a(!1)),f.on("remove",function(){g.each(o(),function(e){e.panel&&e.panel.remove()}),f.contextToolbars={}}),f.shortcuts.add("ctrl+F9","",function(){var e=i(f.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},ee=(Gn=function(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===t}})("array"),te=Gn("function"),ne=Gn("number"),ie=(Array.prototype.slice,Array.prototype.indexOf),re=Array.prototype.push,oe=(te(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),se=function(e){for(var t=[],n=function(e){var t,n=[],e=l(e);if(e)for(t in e)n.push(t);else for(t in oe)n.push(t);return n}(e),i=g.makeMap(e.getParam("removed_menuitems","").split(/[ ,]/)),r=p(e),o="string"==typeof r?r.split(/[ ,]/):n,s=0;s<o.length;s++){var a=o[s],a=I(e.menuItems,l(e),i,a);a&&t.push(a)}return t},ae=v.DOM,le=U,ce=function(e,t,n){var i=e.getContentAreaContainer();U(e,i.clientWidth+t,i.clientHeight+n)},ue=tinymce.util.Tools.resolve("tinymce.Env"),de=function(e){return!(ue.ie&&!(11<=ue.ie)||!e.sidebars)&&0<e.sidebars.length},fe=function(n){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:g.map(n.sidebars,function(e){var t=e.settings;return{type:"button",icon:t.icon,image:t.image,tooltip:t.tooltip,onclick:Y(n,e.name,n.sidebars)}})}]}},he=function(e){function t(){e._skinLoaded=!0,i(e)}return function(){e.initialized?t():e.on("init",t)}},me=v.DOM,ge=function(t,e,n){var i,r,o,s;return!1===h(t)&&n.skinUiCss?me.styleSheetLoader.load(n.skinUiCss,he(t)):he(t)(),i=e.panel=b.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===d(t)?null:{type:"menubar",border:"0 0 1 0",items:se(t)},K(t,f(t))]},de(t)?{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[$("0"),fe(t)]}:$("1 0 0 0")]}),J.setUiContainer(t,i),"none"!==a(t)&&(r={type:"resizehandle",direction:a(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;o={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===a(t)?le(t,o.width+e.deltaX,o.height+e.deltaY):le(t,null,o.height+e.deltaY)}}),t.getParam("statusbar",!0,"boolean")&&(e=x.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),e=t.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+e}:null,i.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},r,e]})),_(t),t.on("SwitchMode",(s=i,function(e){s.find("*").disabled("readonly"===e.mode)})),i.renderBefore(n.targetNode).reflow(),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly"),n.width&&me.setStyle(i.getEl(),"width",n.width),t.on("remove",function(){i.remove(),i=null}),R(t,i),Q(t),{iframeContainer:i.find("#iframe")[0].getEl(),editorContainer:i.getEl()}},pe=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ve=0,be={id:function(){return"mceu_"+ve++},create:function(e,t,n){var i=y.document.createElement(e);return v.DOM.setAttribs(i,t),"string"==typeof n?i.innerHTML=n:g.each(n,function(e){e.nodeType&&i.appendChild(e)}),i},createFragment:function(e){return v.DOM.createFragment(e)},getWindowSize:function(){return v.DOM.getViewPort()},getSize:function(e){var t,n;return e=e.getBoundingClientRect?(t=e.getBoundingClientRect(),n=Math.max(t.width||t.right-t.left,e.offsetWidth),Math.max(t.height||t.bottom-t.bottom,e.offsetHeight)):(n=e.offsetWidth,e.offsetHeight),{width:n,height:e}},getPos:function(e,t){return v.DOM.getPos(e,t||be.getContainer())},getContainer:function(){return ue.container||y.document.body},getViewPort:function(e){return v.DOM.getViewPort(e)},get:function(e){return y.document.getElementById(e)},addClass:function(e,t){return v.DOM.addClass(e,t)},removeClass:function(e,t){return v.DOM.removeClass(e,t)},hasClass:function(e,t){return v.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return v.DOM.toggleClass(e,t,n)},css:function(e,t,n){return v.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return v.DOM.getStyle(e,t,!0)},on:function(e,t,n,i){return v.DOM.bind(e,t,n,i)},off:function(e,t,n){return v.DOM.unbind(e,t,n)},fire:function(e,t,n){return v.DOM.fire(e,t,n)},innerHtml:function(e,t){v.DOM.setHTML(e,t)}},ye=function(e){return"static"===be.getRuntimeStyle(e,"position")},xe=function(e){return e.state.get("fixed")};function we(e,t,n){var i=Re(),r=be.getPos(t,J.getUiContainer(e)),o=r.x,s=r.y;return xe(e)&&ye(y.document.body)&&(o-=i.x,s-=i.y),r=e.getEl(),e=(i=be.getSize(r)).width,r=i.height,t=(i=be.getSize(t)).width,i=i.height,"b"===(n=(n||"").split(""))[0]&&(s+=i),"r"===n[1]&&(o+=t),"c"===n[0]&&(s+=Math.round(i/2)),"c"===n[1]&&(o+=Math.round(t/2)),"b"===n[3]&&(s-=r),"r"===n[4]&&(o-=e),"c"===n[3]&&(s-=Math.round(r/2)),"c"===n[4]&&(o-=Math.round(e/2)),{x:o,y:s,w:e,h:r}}function _e(e){var t;return(t=J.getUiContainer(e))&&!xe(e)?{x:0,y:0,w:(t=t).scrollWidth-1,h:t.scrollHeight-1}:Re()}var Re=function(){var e=y.window;return{x:Math.max(e.pageXOffset,y.document.body.scrollLeft,y.document.documentElement.scrollLeft),y:Math.max(e.pageYOffset,y.document.body.scrollTop,y.document.documentElement.scrollTop),w:e.innerWidth||y.document.documentElement.clientWidth,h:e.innerHeight||y.document.documentElement.clientHeight}},Ce={testMoveRel:function(e,t){for(var n=_e(this),i=0;i<t.length;i++){var r=we(this,e,t[i]);if(xe(this)){if(0<r.x&&r.x+r.w<n.w&&0<r.y&&r.y+r.h<n.h)return t[i]}else if(r.x>n.x&&r.x+r.w<n.w+n.x&&r.y>n.y&&r.y+r.h<n.h+n.y)return t[i]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));t=we(this,e,t);return this.moveTo(t.x,t.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){var n,i=this;function r(e,t,n){return e<0||t<e+n&&(e=t-n)<0?0:e}i.settings.constrainToViewport&&(n=_e(this),o=i.layoutRect(),e=r(e,n.w+n.x,o.w),t=r(t,n.h+n.y,o.h));var o=J.getUiContainer(i);return o&&ye(o)&&!xe(i)&&(e-=o.scrollLeft,t-=o.scrollTop),o&&(e+=1,t+=1),i.state.get("rendered")?i.layoutRect({x:e,y:t}).repaint():(i.settings.x=e,i.settings.y=t),i.fire("move",{x:e,y:t}),i}},Ee=tinymce.util.Tools.resolve("tinymce.util.Class"),ke=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),He=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},Se=function(n,e){function t(e){e=parseFloat(function(e){var t=n.ownerDocument.defaultView;if(t){t=t.getComputedStyle(n,null);return t?(e=e.replace(/[A-Z]/g,function(e){return"-"+e}),t.getPropertyValue(e)):null}return n.currentStyle[e]}(e));return isNaN(e)?0:e}return{top:t(e+"TopWidth"),right:t(e+"RightWidth"),bottom:t(e+"BottomWidth"),left:t(e+"LeftWidth")}};function Te(){}function Me(e){this.cls=[],this.cls._map={},this.onchange=e||Te,this.prefix=""}g.extend(Me.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=void 0,t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Me.prototype.toString=function(){if(this.clsValue)return this.clsValue;for(var e="",t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e};var Ne,Pe=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,We=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,De=/^\s*|\s*$/g,Oe=Ee.extend({init:function(e){var r=this.match;function s(e,t,n){function i(e){e&&t.push(e)}return i(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((e=Pe.exec(e.replace(De,"")))[1])),i(function(t){if(t)return function(e){return e._name===t}}(e[2])),i(function(n){if(n)return n=n.split("."),function(e){for(var t=n.length;t--;)if(!e.classes.contains(n[t]))return!1;return!0}}(e[3])),i(function(t,n,i){if(t)return function(e){e=e[t]?e[t]():"";return n?"="===n?e===i:"*="===n?0<=e.indexOf(i):"~="===n?0<=(" "+e+" ").indexOf(" "+i+" "):"!="===n?e!==i:"^="===n?0===e.indexOf(i):"$="===n&&e.substr(e.length-i.length)===i:!!i}}(e[4],e[5],e[6])),i(function(i){var t;if(i)return(i=/(?:not\((.+)\))|(.+)/i.exec(i))[1]?(t=a(i[1],[]),function(e){return!r(e,t)}):(i=i[2],function(e,t,n){return"first"===i?0===t:"last"===i?t===n-1:"even"===i?t%2==0:"odd"===i?t%2==1:!!e[i]&&e[i]()})}(e[7])),t.pseudo=!!e[7],t.direct=n,t}function a(e,t){var n,i,r,o=[];do{if(We.exec(""),i=We.exec(e),i&&(e=i[3],o.push(i[1]),i[2])){n=i[3];break}}while(i);for(n&&a(n,t),e=[],r=0;r<o.length;r++)">"!==o[r]&&e.push(s(o[r],[],">"===o[r-1]));return t.push(e),t}this._selectors=a(e,[])},match:function(e,t){for(var n,i,r,o,s,a,l,c,u,d,f,h=0,m=(t=t||this._selectors).length;h<m;h++){for(f=e,d=0,n=(i=(r=t[h]).length)-1;0<=n;n--)for(a=r[n];f;){if(a.pseudo)for(l=c=(u=f.parent().items()).length;l--&&u[l]!==f;);for(o=0,s=a.length;o<s;o++)if(!a[o](f,l,c)){o=s+1;break}if(o===s){d++;break}if(n===i-1)break;f=f.parent()}if(d===i)return!0}return!1},find:function(e){var t,n,u=[],i=this._selectors;if(e.items){for(t=0,n=i.length;t<n;t++)!function e(t,n,i){for(var r,o,s,a=n[i],l=0,c=t.length;l<c;l++){for(s=t[l],r=0,o=a.length;r<o;r++)if(!a[r](s,l,c)){r=o+1;break}if(r===o)i===n.length-1?u.push(s):s.items&&e(s.items(),n,i+1);else if(a.direct)return;s.items&&e(s.items(),n,i)}}(e.items(),i[t],0);1<n&&(u=function(e){for(var t,n=[],i=e.length;i--;)(t=e[i]).__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(u))}return new(Ne=Ne||Oe.Collection)(u)}}),Ae=Array.prototype.push,Be=Array.prototype.slice,Le={length:0,init:function(e){e&&this.add(e)},add:function(e){return g.isArray(e)?Ae.apply(this,e):e instanceof Ie?this.add(e.toArray()):Ae.call(this,e),this},set:function(e){var t,n=this,i=n.length;for(n.length=0,n.add(e),t=n.length;t<i;t++)delete n[t];return n},filter:function(t){for(var e,n=[],i="string"==typeof t?(t=new Oe(t),function(e){return t.match(e)}):t,r=0,o=this.length;r<o;r++)i(e=this[r])&&n.push(e);return new Ie(n)},slice:function(){return new Ie(Be.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return g.each(this,e),this},toArray:function(){return g.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new Ie(g.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(t,n){var e;return void 0!==n?(this.each(function(e){e[t]&&e[t](n)}),this):(e=this[0])&&e[t]?e[t]():void 0},exec:function(t){var n=g.toArray(arguments).slice(1);return this.each(function(e){e[t]&&e[t].apply(e,n)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}};function ze(e){this.create=e.create}g.each("fire on off show hide append prepend before after reflow".split(" "),function(n){Le[n]=function(){var t=g.toArray(arguments);return this.each(function(e){n in e&&e[n].apply(e,t)}),this}}),g.each("text name disabled active selected checked visible parent value data".split(" "),function(t){Le[t]=function(e){return this.prop(t,e)}});var Ie=Ee.extend(Le),Fe=Oe.Collection=Ie;function Ue(e){return 0<e.nodeType}ze.create=function(r,o){return new ze({create:function(t,n){function e(e){t.set(n,e.value)}var i;return t.on("change:"+n,function(e){r.set(o,e.value)}),r.on("change:"+o,e),(i=t._bindings)||(i=t._bindings=[],t.on("destroy",function(){for(var e=i.length;e--;)i[e]()})),i.push(function(){r.off("change:"+o,e)}),r.get(o)}})},di=tinymce.util.Tools.resolve("tinymce.util.Observable");var Ve,Ye=Ee.extend({Mixins:[di],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof ze&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,i=this.data[e];if(t instanceof ze&&(t=t.create(this,e)),"object"!=typeof e)return function e(t,n){var i,r;if(t===n)return 1;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(g.isArray(n)){if(t.length!==n.length)return;for(i=t.length;i--;)if(!e(t[i],n[i]))return}if(Ue(t)||Ue(n))return t===n;for(i in r={},n){if(!e(t[i],n[i]))return;r[i]=!0}for(i in t)if(!r[i]&&!e(t[i],n[i]))return;return 1}(i,t)||(this.data[e]=t,i={target:this,name:e,value:t,oldValue:i},this.fire("change:"+e,i),this.fire("change",i)),this;for(n in e)this.set(n,e[n]);return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return ze.create(this,e)},destroy:function(){this.fire("destroy")}}),$e={},qe={add:function(e){e=e.parent();e&&e._layout&&!e._layout.isNative()&&($e[e._id]||($e[e._id]=e),Ve||(Ve=!0,E.requestAnimationFrame(function(){var e,t;for(e in Ve=!1,$e)(t=$e[e]).state.get("rendered")&&t.reflow();$e={}},y.document.body)))},remove:function(e){$e[e._id]&&delete $e[e._id]}},Xe="onmousewheel"in y.document,je=!1,Je=0,Ge={Statics:{classPrefix:"mce-"},isRtl:function(){return et.rtl},classPrefix:"mce-",init:function(t){var e,n,i=this;function r(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}i.settings=t=g.extend({},i.Defaults,t),i._id=t.id||"mceu_"+Je++,i._aria={role:t.role},i._elmCache={},i.$=pe,i.state=new Ye({visible:!0,active:!1,disabled:!1,value:""}),i.data=new Ye(t.data),i.classes=new Me(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(e=t.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&e!==n&&r(n),r(e)),g.each("title text name visible disabled active value".split(" "),function(e){e in t&&i[e](t[e])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=t,i.borderBox=He(t.border),i.paddingBox=He(t.padding),i.marginBox=He(t.margin),t.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){var e=J.getUiContainer(this);return e||be.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,i,r=this,o=r.settings,s=r.getEl(),a=r.borderBox=r.borderBox||Se(s,"border");r.paddingBox=r.paddingBox||Se(s,"padding"),r.marginBox=r.marginBox||Se(s,"margin"),f=be.getSize(s),n=o.minWidth,i=o.minHeight,e=n||f.width,t=i||f.height,c=o.width,u=o.height;var l=void 0!==(l=o.autoResize)?l:!c&&!u,c=c||e,u=u||t,d=a.left+a.right,s=a.top+a.bottom,f=o.maxWidth||65535,a=o.maxHeight||65535;return r._layoutRect=l={x:o.x||0,y:o.y||0,w:c,h:u,deltaW:d,deltaH:s,contentW:c-d,contentH:u-s,innerW:c-d,innerH:u-s,startMinWidth:n||0,startMinHeight:i||0,minW:Math.min(e,f),minH:Math.min(t,a),maxW:f,maxH:a,autoResize:l,scrollW:0},r._lastLayoutRect={},l},layoutRect:function(e){var t,n,i,r=this,o=(o=r._layoutRect)||r.initLayoutRect();return e?(n=o.deltaW,i=o.deltaH,void 0!==e.x&&(o.x=e.x),void 0!==e.y&&(o.y=e.y),void 0!==e.minW&&(o.minW=e.minW),void 0!==e.minH&&(o.minH=e.minH),void 0!==(t=e.w)&&(t=(t=t<o.minW?o.minW:t)>o.maxW?o.maxW:t,o.w=t,o.innerW=t-n),void 0!==(t=e.h)&&(t=(t=t<o.minH?o.minH:t)>o.maxH?o.maxH:t,o.h=t,o.innerH=t-i),void 0!==(t=e.innerW)&&(t=(t=t<o.minW-n?o.minW-n:t)>o.maxW-n?o.maxW-n:t,o.innerW=t,o.w=t+n),void 0!==(t=e.innerH)&&(t=(t=t<o.minH-i?o.minH-i:t)>o.maxH-i?o.maxH-i:t,o.innerH=t,o.h=t+i),void 0!==e.contentW&&(o.contentW=e.contentW),void 0!==e.contentH&&(o.contentH=e.contentH),(i=r._lastLayoutRect).x===o.x&&i.y===o.y&&i.w===o.w&&i.h===o.h||((e=et.repaintControls)&&e.map&&!e.map[r._id]&&(e.push(r),e.map[r._id]=!0),i.x=o.x,i.y=o.y,i.w=o.w,i.h=o.h),r):o},repaint:function(){var e,t,n,i=this,r=y.document.createRange?function(e){return e}:Math.round,o=i.getEl().style,s=i._layoutRect,a=i._lastRepaintRect||{},l=i.borderBox,c=l.left+l.right,l=l.top+l.bottom;s.x!==a.x&&(o.left=r(s.x)+"px",a.x=s.x),s.y!==a.y&&(o.top=r(s.y)+"px",a.y=s.y),s.w!==a.w&&(n=r(s.w-c),o.width=(0<=n?n:0)+"px",a.w=s.w),s.h!==a.h&&(n=r(s.h-l),o.height=(0<=n?n:0)+"px",a.h=s.h),i._hasBody&&s.innerW!==a.innerW&&(n=r(s.innerW),(t=i.getEl("body"))&&((e=t.style).width=(0<=n?n:0)+"px"),a.innerW=s.innerW),i._hasBody&&s.innerH!==a.innerH&&(n=r(s.innerH),(t=t||i.getEl("body"))&&((e=e||t.style).height=(0<=n?n:0)+"px"),a.innerH=s.innerH),i._lastRepaintRect=a,i.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,be.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n,i,r,o=this;return Ke(o).on(e,"string"!=typeof(n=t)?n:function(e){return i||o.parentsAndSelf().each(function(e){var t=e.settings.callbacks;if(t&&(i=t[n]))return r=e,!1}),i?i.call(r,e):(e.action=n,void this.fire("execute",e))}),o},off:function(e,t){return Ke(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=Ke(this).fire(e,t),!1!==n&&this.parent)for(var i=this.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},hasEventListeners:function(e){return Ke(this).has(e)},parents:function(e){for(var t=new Fe,n=this.parent();n;n=n.parent())t.add(n);return t=e?t.filter(e):t},parentsAndSelf:function(e){return new Fe(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){e=e?this._id+"-"+e:this._id;return this._elmCache[e]||(this._elmCache[e]=pe("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&i.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return((e=!1!==t?this.translate(e):e)||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return et.translate?et.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var t,n=this,e=n.getEl(),i=n.parent();if(n.items)for(var r=n.items().toArray(),o=r.length;o--;)r[o].remove();i&&i.items&&(t=[],i.items().each(function(e){e!==n&&t.push(e)}),i.items().set(t),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&pe(e).off();i=n.getRoot().controlIdLookup;return i&&delete i[n._id],e&&e.parentNode&&e.parentNode.removeChild(e),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return pe(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return pe(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,i,r=this,o=r.settings;for(n in r.$el=pe(r.getEl()),r.state.set("rendered",!0),o)0===n.indexOf("on")&&r.on(n.substr(2),o[n]);if(r._eventsRoot){for(t=r.parent();!i&&t;t=t.parent())i=t._eventsRoot;if(i)for(n in i._nativeEvents)r._nativeEvents[n]=!0}Ze(r),o.style&&(e=r.getEl())&&(e.setAttribute("style",o.style),e.style.cssText=o.style),r.settings.border&&(a=r.borderBox,r.$el.css({"border-top-width":a.top,"border-right-width":a.right,"border-bottom-width":a.bottom,"border-left-width":a.left}));var s,a=r.getRoot();for(s in a.controlIdLookup||(a.controlIdLookup={}),(a.controlIdLookup[r._id]=r)._aria)r.aria(s,r._aria[s]);!1===r.state.get("visible")&&(r.getEl().style.display="none"),r.bindStates(),r.state.on("change:visible",function(e){var t=e.value;r.state.get("rendered")&&(r.getEl().style.display=!1===t?"none":"",r.getEl().getBoundingClientRect()),(e=r.parent())&&(e._lastRect=null),r.fire(t?"show":"hide"),qe.add(r)}),r.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t=this.getEl(),n=t.parentNode,i=function(e,t){for(var n,i=e,r=n=0;i&&i!==t&&i.nodeType;)r+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:n}}(t,n),r=i.x,o=i.y,s=t.offsetWidth,a=t.offsetHeight,i=n.clientWidth,t=n.clientHeight;return"end"===e?(r-=i-s,o-=t-a):"center"===e&&(r-=i/2-s/2,o-=t/2-a/2),n.scrollLeft=r,n.scrollTop=o,this},getRoot:function(){for(var e=this,t=[];e;){if(e.rootControl){n=e.rootControl;break}t.push(e),e=(n=e).parent()}for(var n=n||this,i=t.length;i--;)t[i].rootControl=n;return n},reflow:function(){qe.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function Ke(n){return n._eventDispatcher||(n._eventDispatcher=new ke({scope:n,toggleEvent:function(e,t){t&&ke.isNative(e)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[e]=!0,n.state.get("rendered")&&Ze(n))}})),n._eventDispatcher}function Ze(a){var e,t,n,l,i,r;function o(e){var t=a.getParentCtrl(e.target);t&&t.fire(e.type,e)}function s(){var e=l._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),l._lastHoverCtrl=null)}function c(e){var t,n,i,r=a.getParentCtrl(e.target),o=l._lastHoverCtrl,s=0;if(r!==o){if((n=(l._lastHoverCtrl=r).parents().toArray().reverse()).push(r),o){for((i=o.parents().toArray().reverse()).push(o),s=0;s<i.length&&n[s]===i[s];s++);for(t=i.length-1;s<=t;t--)(o=i[t]).fire("mouseleave",{target:o.getEl()})}for(t=s;t<n.length;t++)(r=n[t]).fire("mouseenter",{target:r.getEl()})}}function u(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=a.fire("wheel",e)}if(i=a._nativeEvents){for((n=a.parents().toArray()).unshift(a),e=0,t=n.length;!l&&e<t;e++)l=n[e]._eventsRoot;for(l=l||(n[n.length-1]||a),a._eventsRoot=l,t=e,e=0;e<t;e++)n[e]._eventsRoot=l;var d=(d=l._delegates)||(l._delegates={});for(r in i){if(!i)return;"wheel"!==r||je?("mouseenter"===r||"mouseleave"===r?l._hasMouseEnter||(pe(l.getEl()).on("mouseleave",s).on("mouseover",c),l._hasMouseEnter=1):d[r]||(pe(l.getEl()).on(r,o),d[r]=!0),i[r]=!1):Xe?pe(a.getEl()).on("mousewheel",u):pe(a.getEl()).on("DOMMouseScroll",u)}}}function Qe(e){return!!e.getAttribute("data-mce-tabstop")}g.each("text title visible disabled active value".split(" "),function(t){Ge[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}});var et,tt=et=Ee.extend(Ge);function nt(e){var o,r,t=e.root;function n(e){return e&&1===e.nodeType}try{o=y.document.activeElement}catch(e){o=y.document.body}function s(e){return n(e=e||o)?e.getAttribute("role"):null}function a(e){for(var t,n=e||o;n=n.parentNode;)if(t=s(n))return t}function i(e){return n(o)&&o.getAttribute("aria-"+e)}function l(e){e=e.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function c(e){var r=[];return function e(t){if(1===t.nodeType&&"none"!==t.style.display&&!t.disabled){var n;(l(n=t)&&!n.hidden||Qe(n)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(s(n)))&&r.push(t);for(var i=0;i<t.childNodes.length;i++)e(t.childNodes[i])}}(e||t.getEl()),r}function u(e){var t,n;(n=(e=e||r).parents().toArray()).unshift(e);for(var i=0;i<n.length&&!(t=n[i]).settings.ariaRoot;i++);return t}function d(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function f(e,t){var n=-1,i=u();t=t||c(i.getEl());for(var r=0;r<t.length;r++)t[r]===o&&(n=r);n+=e,i.lastAriaIndex=d(n,t)}function h(){"tablist"===a()?f(-1,c(o.parentNode)):r.parent().submenu?v():f(-1)}function m(){var e=s(),t=a();"tablist"===t?f(1,c(o.parentNode)):"menuitem"===e&&"menu"===t&&i("haspopup")?b():f(1)}function g(){f(-1)}function p(){var e=s(),t=a();"menuitem"===e&&"menubar"===t?b():"button"===e&&i("haspopup")?b({key:"down"}):f(1)}function v(){r.fire("cancel")}function b(e){e=e||{},r.fire("click",{target:o,aria:e})}return r=t.getParentCtrl(o),t.on("keydown",function(e){function t(e,t){l(o)||Qe(o)||"slider"!==s(o)&&!1!==t(e)&&e.preventDefault()}var n,i;if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,h);break;case 39:t(e,m);break;case 38:t(e,g);break;case 40:t(e,p);break;case 27:v();break;case 14:case 13:case 32:t(e,b);break;case 9:n=e,"tablist"===a()?(i=c(r.getEl("body"))[0])&&i.focus():f(n.shiftKey?-1:1),e.preventDefault()}}),t.on("focusin",function(e){o=e.target,r=e.control}),{focusFirst:function(e){var t=u(e),e=c(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?d(t.lastAriaIndex,e):d(0,e)}}}var it={},rt=tt.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new Fe,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new Me(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=b.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=it[e]=it[e]||new Oe(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,i=this;if(!e||!(n=i.keyboardNav||i.parents().eq(-1)[0].keyboardNav))return e=i.find("*"),i.statusbar&&e.add(i.statusbar.items()),e.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),i;n.focusFirst(i)},replace:function(e,t){for(var n,i=this.items(),r=i.length;r--;)if(i[r]===e){i[r]=t;break}0<=r&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,i=[];return g.isArray(e)||(e=[e]),g.each(e,function(e){e&&(e instanceof tt||("string"==typeof e&&(e={type:e}),t=g.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=b.create(t)),i.push(e))}),i},renderNew:function(){var i=this;return i.items().each(function(e,t){var n;e.parent(i),e.state.get("rendered")||((n=i.getEl("body")).hasChildNodes()&&t<=n.childNodes.length-1?pe(n.childNodes[t]).before(e.renderHtml()):pe(n).append(e.renderHtml()),e.postRender(),qe.add(e))}),i._layout.applyClasses(i.items().filter(":visible")),i._lastRect=null,i},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var i;return e=this.create(e),i=this.items(),!n&&t<i.length-1&&(t+=1),0<=t&&t<i.length&&(n=i.slice(0,t).toArray(),t=i.slice(t).toArray(),i.set(n.concat(e,t))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var n={};return this.find("*").each(function(e){var t=e.name(),e=e.value();t&&void 0!==e&&(n[t]=e)}),n},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=nt({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(qe.remove(this),this.visible()){for(tt.repaintControls=[],tt.repaintControls.map={},this.recalc(),e=tt.repaintControls.length;e--;)tt.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),tt.repaintControls=[]}return this}});function ot(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function st(e,c){var u,d,f,h,m=c.document||y.document;c=c||{};var g=m.getElementById(c.handle||e),e=function(e){var t,n,i,r,o,s,a,l,t=(t=m,n=Math.max,i=t.documentElement,r=t.body,o=n(i.scrollWidth,r.scrollWidth),s=n(i.clientWidth,r.clientWidth),a=n(i.offsetWidth,r.offsetWidth),l=n(i.scrollHeight,r.scrollHeight),t=n(i.clientHeight,r.clientHeight),{width:o<a?s:o,height:l<n(i.offsetHeight,r.offsetHeight)?t:l});ot(e),e.preventDefault(),d=e.button,l=g,f=e.screenX,h=e.screenY,l=y.window.getComputedStyle?y.window.getComputedStyle(l,null).getPropertyValue("cursor"):l.runtimeStyle.cursor,u=pe("<div></div>").css({position:"absolute",top:0,left:0,width:t.width,height:t.height,zIndex:2147483647,opacity:1e-4,cursor:l}).appendTo(m.body),pe(m).on("mousemove touchmove",p).on("mouseup touchend",v),c.start(e)},p=function(e){if(ot(e),e.button!==d)return v(e);e.deltaX=e.screenX-f,e.deltaY=e.screenY-h,e.preventDefault(),c.drag(e)},v=function(e){ot(e),pe(m).off("mousemove touchmove",p).off("mouseup touchend",v),u.remove(),c.stop&&c.stop(e)};this.destroy=function(){pe(g).off()},pe(g).on("mousedown touchstart",e)}var at,lt,ct,ut,dt={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var d=this,f=2;function n(){var c,u,e;function t(e,t,n,i,r,o){var s,a,l=d.getEl("scroll"+e);l&&(s=t.toLowerCase(),a=n.toLowerCase(),pe(d.getEl("absend")).css(s,d.layoutRect()[i]-1),r?(pe(l).css("display","block"),i=d.getEl("body"),r=d.getEl("scroll"+e+"t"),e=i["client"+n]-2*f,o=(e-=c&&u?l["client"+o]:0)/i["scroll"+n],(n={})[s]=i["offset"+t]+f,n[a]=e,pe(l).css(n),(n={})[s]=i["scroll"+t]*o,n[a]=e*o,pe(r).css(n)):pe(l).css("display","none"))}e=d.getEl("body"),c=e.scrollWidth>e.clientWidth,u=e.scrollHeight>e.clientHeight,t("h","Left","Width","contentW",c,"Height"),t("v","Top","Height","contentH",u,"Width")}function e(r,o,s,a,l){var c,e=d._id+"-scroll"+r,t=d.classPrefix;pe(d.getEl()).append('<div id="'+e+'" class="'+t+"scrollbar "+t+"scrollbar-"+r+'"><div id="'+e+'t" class="'+t+'scrollbar-thumb"></div></div>'),d.draghelper=new st(e+"t",{start:function(){c=d.getEl("body")["scroll"+o],pe("#"+e).addClass(t+"active")},drag:function(e){var t=d.layoutRect(),n=t.contentW>t.innerW,i=t.contentH>t.innerH,t=d.getEl("body")["client"+s]-2*f,t=(t-=n&&i?d.getEl("scroll"+r)["client"+l]:0)/d.getEl("body")["scroll"+s];d.getEl("body")["scroll"+o]=c+e["delta"+a]/t},stop:function(){pe("#"+e).removeClass(t+"active")}})}d.settings.autoScroll&&(d._hasScroll||(d._hasScroll=!0,d.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height"),d.on("wheel",function(e){var t=d.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),pe(d.getEl("body")).on("scroll",n)),n())}},ft=rt.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[dt],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),ht={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){var n;return(e<=1||t<=1)&&(n=be.getWindowSize(),e=e<=1?e*n.w:e,t=t<=1?t*n.h:t),this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},mt=[],gt=[];function pt(e){for(var t=mt.length;t--;){var n=mt[t],i=n.getParentCtrl(e.target);n.settings.autohide&&(i&&(function(e,t){for(;e;){if(e===t)return 1;e=e.parent()}}(i,n)||n.parent()===i)||(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide())}}function vt(r){var e=be.getViewPort().y;function t(e,t){for(var n,i=0;i<mt.length;i++)if(mt[i]!==r)for(n=mt[i].parent();n=n&&n.parent();)n===r&&mt[i].fixed(e).moveBy(0,t).repaint()}r.settings.autofix&&(r.state.get("fixed")?r._autoFixY>e&&(r.fixed(!1).layoutRect({y:r._autoFixY}).repaint(),t(!1,r._autoFixY-e)):(r._autoFixY=r.layoutRect().y,r._autoFixY<e&&(r.fixed(!0).layoutRect({y:0}).repaint(),t(!0,e-r._autoFixY))))}function bt(e,t){var n,i,r=yt.zIndex||65535;if(e)gt.push(t);else for(n=gt.length;n--;)gt[n]===t&&gt.splice(n,1);if(gt.length)for(n=0;n<gt.length;n++)gt[n].modal&&(r++,i=gt[n]),gt[n].getEl().style.zIndex=r,gt[n].zIndex=r,r++;e=pe("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];i?pe(e).css("z-index",i.zIndex-1):e&&(e.parentNode.removeChild(e),ut=!1),yt.currentZIndex=r}var yt=ft.extend({Mixins:[Ce,ht],init:function(e){var t,n,i,r=this;r._super(e),(r._eventsRoot=r).classes.add("floatpanel"),e.autohide&&(at||(at=function(e){2!==e.button&&pt(e)},pe(y.document).on("click touchstart",at)),ct||(t=y.document.documentElement,n=t.clientWidth,i=t.clientHeight,ct=function(){y.document.all&&n===t.clientWidth&&i===t.clientHeight||(n=t.clientWidth,i=t.clientHeight,yt.hideAll())},pe(y.window).on("resize",ct)),mt.push(r)),e.autofix&&(lt||(lt=function(){for(var e=mt.length;e--;)vt(mt[e])},pe(y.window).on("scroll",lt)),r.on("move",function(){vt(this)})),r.on("postrender show",function(e){var t,n;e.control===r&&(n=r.classPrefix,r.modal&&!ut&&((t=pe("#"+n+"modal-block",r.getContainerElm()))[0]||(t=pe('<div id="'+n+'modal-block" class="'+n+"reset "+n+'fade"></div>').appendTo(r.getContainerElm())),E.setTimeout(function(){t.addClass(n+"in"),pe(r.getEl()).addClass(n+"in")}),ut=!0),bt(!0,r))}),r.on("show",function(){r.parents().each(function(e){if(e.state.get("fixed"))return r.fixed(!0),!1})}),e.popover&&(r._preBodyHtml='<div class="'+r.classPrefix+'arrow"></div>',r.classes.add("popover").add("bottom").add(r.isRtl()?"end":"start")),r.aria("label",e.ariaLabel),r.aria("labelledby",r._id),r.aria("describedby",r.describedBy||r._id+"-none")},fixed:function(e){var t,n=this;return n.state.get("fixed")!==e&&(n.state.get("rendered")&&(t=be.getViewPort(),e?n.layoutRect().y-=t.y:n.layoutRect().y+=t.y),n.classes.toggle("fixed",e),n.state.set("fixed",e)),n},show:function(){for(var e=this._super(),t=mt.length;t--&&mt[t]!==this;);return-1===t&&mt.push(this),e},hide:function(){return xt(this),bt(!1,this),this._super()},hideAll:function(){yt.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),bt(!1,this)),this},remove:function(){xt(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function xt(e){for(var t=mt.length;t--;)mt[t]===e&&mt.splice(t,1);for(t=gt.length;t--;)gt[t]===e&&gt.splice(t,1)}yt.hideAll=function(){for(var e=mt.length;e--;){var t=mt[e];t&&t.settings.autohide&&(t.hide(),mt.splice(e,1))}};var wt=function(o,t,e){var s,n,a=v.DOM,i=o.getParam("fixed_toolbar_container");i&&(n=a.select(i)[0]);function r(){var e,t,n,i,r;s&&s.moveRel&&s.visible()&&!s._fixed&&(n=o.selection.getScrollContainer(),e=o.getBody(),r=i=0,n&&(t=a.getPos(e),n=a.getPos(n),i=Math.max(0,n.x-t.x),r=Math.max(0,n.y-t.y)),s.fixed(!1).moveRel(e,o.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,r))}function l(){s&&(s.show(),r(),a.addClass(o.getBody(),"mce-edit-focus"))}function c(){s&&(s.hide(),yt.hideAll(),a.removeClass(o.getBody(),"mce-edit-focus"))}function u(){var e;s?s.visible()||l():(s=t.panel=b.create({type:n?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:(e=o,!(!n||e.settings.ui_container)),border:1,items:[!1===d(o)?null:{type:"menubar",border:"0 0 1 0",items:se(o)},K(o,f(o))]}),J.setUiContainer(o,s),_(o),(n?s.renderTo(n):s.renderTo()).reflow(),R(o,s),l(),Q(o),o.on("nodeChange",r),o.on("ResizeWindow",r),o.on("activate",l),o.on("deactivate",c),o.nodeChanged())}return o.settings.content_editable=!0,o.on("focus",function(){!1===h(o)&&e.skinUiCss?a.styleSheetLoader.load(e.skinUiCss,u,u):u()}),o.on("blur hide",c),o.on("remove",function(){s&&(s.remove(),s=null)}),!1===h(o)&&e.skinUiCss?a.styleSheetLoader.load(e.skinUiCss,he(o)):he(o)(),{}};function _t(i,r){var o,s,a=this,l=tt.classPrefix;a.show=function(e,t){function n(){o&&(pe(i).append('<div class="'+l+"throbber"+(r?" "+l+"throbber-inline":"")+'"></div>'),t&&t())}return a.hide(),o=!0,e?s=E.setTimeout(n,e):n(),a},a.hide=function(){var e=i.lastChild;return E.clearTimeout(s),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),o=!1,a}}function Rt(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")}var Ct=function(e,t){var n;e.on("ProgressState",function(e){n=n||new _t(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},Et=function(e,t,n){var i,r,o,r=(r=(i=e).settings,o=r.skin,r=r.skin_url,!1!==o&&(o=o||"lightgray",r=r?i.documentBaseURI.toAbsolute(r):u.baseURL+"/skins/"+o),r);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),Ct(e,t),(e.getParam("inline",!1,"boolean")?wt:ge)(e,t,n)},kt=tt.extend({Mixins:[Ce],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),Ht=tt.extend({init:function(n){var i=this;i._super(n),n=i.settings,i.canFocus=!0,n.tooltip&&!1!==Ht.tooltips&&(i.on("mouseenter",function(e){var t=i.tooltip().moveTo(-65535);e.control===i?(e=t.text(n.tooltip).show().testMoveRel(i.getEl(),["bc-tc","bc-tl","bc-tr"]),t.classes.toggle("tooltip-n","bc-tc"===e),t.classes.toggle("tooltip-nw","bc-tl"===e),t.classes.toggle("tooltip-ne","bc-tr"===e),t.moveRel(i.getEl(),e)):t.hide()}),i.on("mouseleave mousedown click",function(){i.tooltip().remove(),i._tooltip=null})),i.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new kt({type:"tooltip"}),J.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){var t=this;function n(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function i(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(e){n(e.value)}),t.state.on("change:active",function(e){i(e.value)}),t.state.get("disabled")&&n(!0),t.state.get("active")&&i(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),St=Ht.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function n(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(e){n(e.value)}),n(t.state.get("value")),t._super()}}),Tt=tt.extend({Mixins:[Ce],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new St),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e,t=this,n=t.classPrefix,i="",r="",o="";return t.icon&&(i='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(r='<button type="button" class="'+n+'close" aria-hidden="true"></button>'),t.progressBar&&(o=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+i+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+o+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return E.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Rt(e,e.state.get("text"))},100),e._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,Rt(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){Rt(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}});function Mt(i){function r(e){return e.inline?e.getElement():e.getContentAreaContainer()}return{open:function(e,t){var e=g.extend(e,{maxWidth:(e=r(i),be.getSize(e).width)}),n=new Tt(e);return 0<(n.args=e).timeout&&(n.timer=setTimeout(function(){n.close(),t()},e.timeout)),n.on("close",function(){t()}),n.renderTo(),n},close:function(e){e.close()},reposition:function(e){var n,t;D(e,function(e){e.moveTo(0,0)}),0<(n=e).length&&(t=n.slice(0,1)[0],e=r(i),t.moveRel(e,"tc-tc"),D(n,function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")}))},getArgs:function(e){return e.args}}}var Nt=[],Pt="";function Wt(e){var t,n=pe("meta[name=viewport]")[0];!1!==ue.overrideViewPort&&(n||((n=y.document.createElement("meta")).setAttribute("name","viewport"),y.document.getElementsByTagName("head")[0].appendChild(n)),(t=n.getAttribute("content"))&&void 0!==Pt&&(Pt=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Pt))}function Dt(e,t){!function(){for(var e=0;e<Nt.length;e++)if(Nt[e]._fullscreen)return!0;return!1}()||!1!==t||pe([y.document.documentElement,y.document.body]).removeClass(e+"fullscreen")}var Ot,At=yt.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.classes.add("rtl"),n.classes.add("window"),n.bodyClasses.add("window-body"),n.state.set("fixed",!0),e.buttons&&(n.statusbar=new ft({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n)),n.on("click",function(e){var t=n.classPrefix+"close";(be.hasClass(e.target,t)||be.hasClass(e.target.parentNode,t))&&n.close()}),n.on("cancel",function(){n.close()}),n.on("move",function(e){e.control===n&&yt.hideAll()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,n,i,r=this,o=r.statusbar;r._fullscreen&&(r.layoutRect(be.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),e=r.layoutRect(),r.settings.title&&!r._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),r.layoutRect({w:t,x:n}),i=!0),o&&(o.layoutRect({w:r.layoutRect().innerW}).recalc(),(t=o.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),r.layoutRect({w:t,x:n}),i=!0)),i&&r.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),i=0;t.settings.title&&!t._fullscreen&&(e=t.getEl("head"),e=be.getSize(e),n.headerW=e.width,n.headerH=e.height,i+=n.headerH),t.statusbar&&(i+=t.statusbar.layoutRect().h),n.deltaH+=i,n.minH+=i,n.h+=i;i=be.getWindowSize();return n.x=t.settings.x||Math.max(0,i.w/2-n.w/2),n.y=t.settings.y||Math.max(0,i.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,r=e.settings,o="",s="",a=r.html;return e.preRender(),t.preRender(e),r.title&&(o='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(r.title)+'</div><div id="'+n+'-dragh" class="'+i+'dragh"></div><button type="button" class="'+i+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),void 0===(a=r.url?'<iframe src="'+r.url+'" tabindex="-1"></iframe>':a)&&(a=t.renderHtml(e)),e.statusbar&&(s=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+a+"</div>"+s+"</div></div>"},fullscreen:function(e){var n,t,i=this,r=y.document.documentElement,o=i.classPrefix;return e!==i._fullscreen&&(pe(y.window).on("resize",function(){var e,t;i._fullscreen&&(n?i._timer||(i._timer=E.setTimeout(function(){var e=be.getWindowSize();i.moveTo(0,0).resizeTo(e.w,e.h),i._timer=0},50)):(e=(new Date).getTime(),t=be.getWindowSize(),i.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)))}),t=i.layoutRect(),(i._fullscreen=e)?(i._initial={x:t.x,y:t.y,w:t.w,h:t.h},i.borderBox=He("0"),i.getEl("head").style.display="none",t.deltaH-=t.headerH+2,pe([r,y.document.body]).addClass(o+"fullscreen"),i.classes.add("fullscreen"),e=be.getWindowSize(),i.moveTo(0,0).resizeTo(e.w,e.h)):(i.borderBox=He(i.settings.border),i.getEl("head").style.display="",t.deltaH+=t.headerH,pe([r,y.document.body]).removeClass(o+"fullscreen"),i.classes.remove("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h))),i.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in"),n.fire("open")},0),n._super(),n.statusbar&&n.statusbar.postRender(),n.focus(),this.dragHelper=new st(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(e){n.moveTo(t.x+e.deltaX,t.y+e.deltaY)}}),n.on("submit",function(e){e.isDefaultPrevented()||n.close()}),Nt.push(n),Wt(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),Dt(t.classPrefix,!1),e=Nt.length;e--;)Nt[e]===t&&Nt.splice(e,1);Wt(0<Nt.length)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});ue.desktop||(Ot={w:y.window.innerWidth,h:y.window.innerHeight},E.setInterval(function(){var e=y.window.innerWidth,t=y.window.innerHeight;Ot.w===e&&Ot.h===t||(Ot={w:e,h:t},pe(y.window).trigger("resize"))},100)),pe(y.window).on("resize",function(){for(var e,t=be.getWindowSize(),n=0;n<Nt.length;n++)e=Nt[n].layoutRect(),Nt[n].moveTo(Nt[n].settings.x||Math.max(0,t.w/2-e.w/2),Nt[n].settings.y||Math.max(0,t.h/2-e.h/2))});var Bt=At.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var t,i=e.callback||function(){};function n(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}switch(e.buttons){case Bt.OK_CANCEL:t=[n("Ok",!0,!0),n("Cancel",!1)];break;case Bt.YES_NO:case Bt.YES_NO_CANCEL:t=[n("Yes",1,!0),n("No",0)],e.buttons===Bt.YES_NO_CANCEL&&t.push(n("Cancel",-1));break;default:t=[n("Ok",!0,!0)]}return new At({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:t,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){i(!1)}}).renderTo(y.document.body).reflow()},alert:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,Bt.msgBox(e)},confirm:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,e.buttons=Bt.OK_CANCEL,Bt.msgBox(e)}}});function Lt(e,t){return function(){return t===e}}function zt(e,t){return function(){return t===e}}function It(e,t){var n=String(t).toLowerCase();return function(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];if(t(r,n))return X.some(r)}return X.none()}(e,function(e){return e.search(n)})}function Ft(e,t){return-1!==e.indexOf(t)}function Ut(e){return e.nodeType!==mi&&e.nodeType!==gi||0===e.childElementCount}function Vt(e,t){return function(e,t){t=void 0===t?y.document:t.dom();return Ut(t)?[]:W(t.querySelectorAll(e),Jn.fromDom)}(t,e)}function Yt(e,t,n,i,r){return{type:e,title:t,url:n,level:i,attach:r}}function $t(e){return e.innerText||e.textContent}function qt(e){return e.id||(t="h",e=(new Date).getTime(),t+"_"+Math.floor(1e9*Math.random())+ ++Xn+String(e));var t}function Xt(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)&&yi(e);var t}function jt(e){return e&&/^(H[1-6])$/.test(e.nodeName)}function Jt(e){return jt(e)&&yi(e)}function Gt(e){var t,n=qt(e);return Yt("header",$t(e),"#"+n,jt(t=e)?parseInt(t.nodeName.substr(1),10):0,function(){e.id=n})}function Kt(e){var t=e.id||e.name,e=$t(e);return Yt("anchor",e||"#"+t,"#"+t,0,m)}function Zt(e){var t;return t="h1,h2,h3,h4,h5,h6,a:not([href])",e=e,W(Vt(Jn.fromDom(e),t),function(e){return e.dom()})}function Qt(e){return 0<pi(e.title).length}function en(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}}function tn(e,t){return{title:e,value:{title:e,url:t,attach:m}}}function nn(e,t,n){return!1===(n=t in e?e[t]:n)?null:n}function rn(e,n,t,i){function r(e){return e=e.hasOwnProperty(t)?e[t]:[],e=O(e,function(e){return t=e,!P(n,function(e){return e.url===t});var t}),g.map(e,function(e){return{title:e,value:{title:e,url:e,attach:m}}})}function o(t){var e;return e=e=O(n,function(e){return e.type===t}),g.map(e,en)}var s,a,l,c,u={title:"-"};return!1===i.typeahead_urls?[]:"file"===t?(l=[_i(e,r(wi)),_i(e,o("header")),_i(e,(l=o("anchor"),c=nn(i,"anchor_top","#top"),i=nn(i,"anchor_bottom","#bottom"),null!==c&&l.unshift(tn("<top>",c)),null!==i&&l.push(tn("<bottom>",i)),l))],s=function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(u,t)},a=[],D(l,function(e){a=s(a,e)}),a):_i(e,r(wi))}function on(i,n,r,o){function t(e){var t=xi(r),t=rn(e,t,o,n);i.showAutoComplete(t,e)}i.on("autocomplete",function(){t(i.value())}),i.on("selectitem",function(e){var t=e.value;i.value(t.url);e=function(e){e=e.title;return e.raw||e}(t);"image"===o?i.fire("change",{meta:{alt:e,attach:t.attach}}):i.fire("change",{meta:{text:e,attach:t.attach}}),i.focus()}),i.on("click",function(e){0===i.value().length&&"INPUT"===e.target.nodeName&&t("")}),i.on("PostRender",function(){i.getRoot().on("submit",function(e){var t,n;e.isDefaultPrevented()||(t=i.value(),e=wi[n=o],/^https?/.test(t)&&(e?N(e,t).isNone()&&(wi[n]=e.slice(0,5).concat(t)):wi[n]=[t]))})})}function sn(n,e,t){var i,r=e.filepicker_validator_handler;r&&(i=function(e){0!==e.length?r({url:e,type:t},function(e){var t,t=(e=(t=e).status,t=t.message,"valid"===e?{status:"ok",message:t}:"unknown"===e||"invalid"===e?{status:"warn",message:t}:{status:"none",message:""});n.statusMessage(t.message),n.statusLevel(t.status)}):n.statusLevel("none")},n.state.on("change:value",function(e){i(e.value)}))}function an(e,t){return function(e,t){t=void 0===t?y.document:t.dom();return Ut(t)?X.none():X.from(t.querySelector(e)).map(Jn.fromDom)}(t,e)}function ln(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}}function cn(e,t,n){function i(e){n(e,t)}e.formatter?e.formatter.formatChanged(t,i):e.on("init",function(){e.formatter.formatChanged(t,i)})}function un(e,n){return function(t){cn(e,n,function(e){t.control.active(e)})}}function dn(e){return e?e.split(",")[0]:""}function fn(a,l){return function(){var s=this;s.state.set("value",null),a.on("init nodeChange",function(e){var t,n,i,r,o=a.queryCommandValue("FontName"),t=(t=l,r=(n=o)?n.toLowerCase():"",g.each(t,function(e){e.value.toLowerCase()===r&&(i=e.value)}),g.each(t,function(e){i||dn(e.value).toLowerCase()!==dn(r).toLowerCase()||(i=e.value)}),i);s.value(t||null),!t&&o&&s.text(dn(o))})}}function hn(t){t.addButton("fontselect",function(){var e=function(e){e=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return g.map(e,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})}(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:fn(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})}function mn(e,t){return/[0-9.]+px$/.test(e)?function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}(72*parseInt(e,10)/96,t||0)+"pt":e}function gn(s,a){return function(){var o=this;s.on("init nodeChange",function(e){var t,n,i,r=s.queryCommandValue("FontSize");if(r)for(n=3;!i&&0<=n;n--)t=mn(r,n),i=function(e,t,n){var i;return g.each(e,function(e){e.value===n?i=n:e.value===t&&(i=t)}),i}(a,t,r);o.value(i||null),i||o.text(t)})}}function pn(t){t.addButton("fontsizeselect",function(){var e=function(e){e=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return g.map(e.split(" "),function(e){var t=e,n=e,e=e.split("=");return 1<e.length&&(t=e[0],n=e[1]),{text:t,value:n}})}(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:gn(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})}function vn(n,e){return function(){var r,o,s,t=[];return g.each(e,function(e){t.push({text:e[0],value:e[1],textStyle:function(){return n.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:t,fixedWidth:!0,onselect:function(e){e.control&&(e=e.control.value(),ln(n,e)())},onPostRender:(r=n,o=t,function(){var t=this;r.on("nodeChange",function(e){var n=r.formatter,i=null;g.each(e.parents,function(t){if(g.each(o,function(e){if(s?n.matchNode(t,s,{value:e.value})&&(i=e.value):n.matchNode(t,e.value)&&(i=e.value),i)return!1}),i)return!1}),t.value(i)})})}}}function bn(e){return e&&"-"===e.text}function yn(n){var i=O(n,function(e,t){return!bn(e)||!bn(n[t-1])});return O(i,function(e,t){return!bn(e)||0<t&&t<i.length-1})}function xn(e){var t,n,i=e.settings.insert_button_items;return yn(i?Di(e,i):(e=e,t="insert",n=[{text:"-"}],e=g.grep(e.menuItems,function(e){return e.context===t}),g.each(e,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n))}function wn(e){var n,i,r;n=e,g.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){n.addButton(t,{active:!1,tooltip:e,onPostRender:un(n,t),onclick:ln(n,t)})}),i=e,g.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,t){i.addButton(t,{tooltip:e[0],cmd:e[1]})}),r=e,g.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,t){r.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:un(r,t)})})}function _n(n,i){return function(){function e(){var e="redo"===i?"hasRedo":"hasUndo";return!!n.undoManager&&n.undoManager[e]()}var t=this;t.disabled(!e()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){t.disabled(n.readonly||!e())})}}var Rn,Cn,En,kn=function(n){return{renderUI:function(e){return Et(n,this,e)},resizeTo:function(e,t){return le(n,e,t)},resizeBy:function(e,t){return ce(n,e,t)},getNotificationManagerImpl:function(){return Mt(n)},getWindowManagerImpl:function(){return{open:function(n,e,t){var i;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]),(i=new At(n)).on("close",function(){t(i)}),n.data&&i.on("postRender",function(){this.find("*").each(function(e){var t=e.name();t in n.data&&e.value(n.data[t])})}),i.features=n||{},i.params=e||{},i=i.renderTo(y.document.body).reflow()},alert:function(e,t,n){var i=Bt.alert(e,function(){t()});return i.on("close",function(){n(i)}),i},confirm:function(e,t,n){var i=Bt.confirm(e,function(e){t(e)});return i.on("close",function(){n(i)}),i},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},Hn=Ee.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=g.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,i=this.settings,r=i.firstControlClass,o=i.lastControlClass;e.each(function(e){e.classes.remove(r).remove(o).add(i.controlClass),e.visible()&&(t=t||e,n=e)}),t&&t.classes.add(r),n&&n.classes.add(o)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Sn=Hn.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),Tn=Ht.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e=this.getEl().firstChild;e&&((e=e.style).width=e.height="100%"),this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("icon"),r=e.state.get("text"),o="",s=e.settings,a=s.image;return a=a?(i="none"," style=\"background-image: url('"+(a="string"!=typeof a?y.window.getSelection?a[0]:a[1]:a)+"')\""):"",r&&(e.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+e.encode(r)+"</span>"),i=i?n+"ico "+n+"i-"+i:"",s="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+t+'" class="'+e.classes+'" tabindex="-1"'+s+'><button id="'+t+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+a+"></i>":"")+o+"</button></div>"},bindStates:function(){var i=this,n=i.$,r=i.classPrefix+"txt";function o(e){var t=n("span."+r,i.getEl());e?(t[0]||(n("button:first",i.getEl()).append('<span class="'+r+'"></span>'),t=n("span."+r,i.getEl())),t.html(i.encode(e))):t.remove(),i.classes.toggle("btn-has-text",!!e)}return i.state.on("change:text",function(e){o(e.value)}),i.state.on("change:icon",function(e){var t=e.value,n=i.classPrefix,t=(i.settings.icon=t)?n+"ico "+n+"i-"+i.settings.icon:"",e=i.getEl().firstChild,n=e.getElementsByTagName("i")[0];t?(n&&n===e.firstChild||(n=y.document.createElement("i"),e.insertBefore(n,e.firstChild)),n.className=t):n&&e.removeChild(n),o(i.state.get("text"))}),i._super()}}),Mn=Tn.extend({init:function(e){e=g.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,t=be.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super(),pe(t).on("change",function(e){var t=e.target.files;n.value=function(){return t.length?n.settings.multiple?t:t[0]:null},e.preventDefault(),t.length&&n.fire("change",e)}),pe(t).on("click",function(e){e.stopPropagation()}),pe(n.getEl("button")).on("click touchstart",function(e){e.stopPropagation(),t.click(),e.preventDefault()}),n.getEl().appendChild(t)},remove:function(){pe(this.getEl("button")).off(),pe(this.getEl("input")).off(),this._super()}}),Nn=rt.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),Pn=Ht.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){var i=this;function t(e){i.classes.toggle("checked",e),i.aria("checked",e)}return i.state.on("change:text",function(e){i.getEl("al").firstChild.data=i.translate(e.value)}),i.state.on("change:checked change:value",function(e){i.fire("change"),t(e.value)}),i.state.on("change:icon",function(e){var t=e.value,n=i.classPrefix;if(void 0===t)return i.settings.icon;t=(i.settings.icon=t)?n+"ico "+n+"i-"+i.settings.icon:"",e=i.getEl().firstChild,n=e.getElementsByTagName("i")[0];t?(n&&n===e.firstChild||(n=y.document.createElement("i"),e.insertBefore(n,e.firstChild)),n.className=t):n&&e.removeChild(n)}),i.state.get("checked")&&t(!0),i._super()}}),Wn=tinymce.util.Tools.resolve("tinymce.util.VK"),Dn=Ht.extend({init:function(i){var r=this;r._super(i),i=r.settings,r.classes.add("combobox"),r.subinput=!0,r.ariaTarget="inp",i.menu=i.menu||i.values,i.menu&&(i.icon="caret"),r.on("click",function(e){var t=e.target,n=r.getEl();if(pe.contains(n,t)||t===n)for(;t&&t!==n;)t.id&&-1!==t.id.indexOf("-open")&&(r.fire("action"),i.menu&&(r.showMenu(),e.aria&&r.menu.items()[0].focus())),t=t.parentNode}),r.on("keydown",function(e){var t;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),r.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),r.fire("submit",{data:t.toJSON()}))}),r.on("keyup",function(e){var t,n;"INPUT"===e.target.nodeName&&(t=r.state.get("value"),(n=e.target.value)!==t&&(r.state.set("value",n),r.fire("autocomplete",e)))}),r.on("mouseover",function(e){var t,n=r.tooltip().moveTo(-65535);r.statusLevel()&&-1!==e.target.className.indexOf(r.classPrefix+"status")&&(t=r.statusMessage()||"Ok",t=n.text(t).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]),n.classes.toggle("tooltip-n","bc-tc"===t),n.classes.toggle("tooltip-nw","bc-tl"===t),n.classes.toggle("tooltip-ne","bc-tr"===t),n.moveRel(e.target,t))})},statusLevel:function(e){return 0<arguments.length&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return 0<arguments.length&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var t=this,e=t.settings;t.menu||((e=e.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=b.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t=this,n=t.getEl(),i=t.getEl("open"),r=t.layoutRect(),o=0,n=n.firstChild;t.statusLevel()&&"none"!==t.statusLevel()&&(o=parseInt(be.getRuntimeStyle(n,"padding-right"),10)-parseInt(be.getRuntimeStyle(n,"padding-left"),10));i=i?r.w-be.getSize(i).width-10:r.w-10,r=y.document;return r.all&&(!r.documentMode||r.documentMode<=8)&&(e=t.layoutRect().h-2+"px"),pe(n).css({width:i-o,lineHeight:e}),t._super(),t},postRender:function(){var t=this;return pe(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var e,t,n,i=this,r=i._id,o=i.settings,s=i.classPrefix,a=i.state.get("value")||"",l="",c="";return"spellcheck"in o&&(c+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(c+=' maxlength="'+o.maxLength+'"'),o.size&&(c+=' size="'+o.size+'"'),o.subtype&&(c+=' type="'+o.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',i.disabled()&&(c+=' disabled="disabled"'),(e=o.icon)&&"caret"!==e&&(e=s+"ico "+s+"i-"+o.icon),t=i.state.get("text"),(e||t)&&(l='<div id="'+r+'-open" class="'+s+"btn "+s+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+s+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",i.classes.add("has-open")),'<div id="'+r+'" class="'+i.classes+'"><input id="'+r+'-inp" class="'+s+'textbox" value="'+i.encode(a,!1)+'" hidefocus="1"'+c+' placeholder="'+i.encode(o.placeholder)+'" />'+n+l+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,i){var r=this;0!==e.length?(r.menu?r.menu.items().remove():r.menu=b.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),g.each(e,function(e){var t,n;r.menu.add({text:e.title,url:e.previewUrl,match:i,classes:"menu-item-ellipsis",onclick:(t=e.value,n=e.title,function(){r.fire("selectitem",{title:n,value:t})})})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(e){e.control.parent()===r.menu&&(e.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()}),e=r.layoutRect().w,r.menu.layoutRect({w:e,minW:0,maxW:e}),r.menu.repaint(),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])):r.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var i=this;i.state.on("change:value",function(e){i.getEl("inp").value!==e.value&&(i.getEl("inp").value=e.value)}),i.state.on("change:disabled",function(e){i.getEl("inp").disabled=e.value}),i.state.on("change:statusLevel",function(e){var t=i.getEl("status"),n=i.classPrefix,e=e.value;be.css(t,"display","none"===e?"none":""),be.toggleClass(t,n+"i-checkmark","ok"===e),be.toggleClass(t,n+"i-warning","warn"===e),be.toggleClass(t,n+"i-error","error"===e),i.classes.toggle("has-status","none"!==e),i.repaint()}),be.on(i.getEl("status"),"mouseleave",function(){i.tooltip().hide()}),i.on("cancel",function(e){i.menu&&i.menu.visible()&&(e.stopPropagation(),i.hideMenu())});function n(e,t){t&&0<t.items().length&&t.items().eq(e)[0].focus()}return i.on("keydown",function(e){var t=e.keyCode;"INPUT"===e.target.nodeName&&(t===Wn.DOWN?(e.preventDefault(),i.fire("autocomplete"),n(0,i.menu)):t===Wn.UP&&(e.preventDefault(),n(-1,i.menu)))}),i._super()},remove:function(){pe(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),On=Dn.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),An=Tn.extend({showPanel:function(){var t=this,e=t.settings;t.classes.add("opened"),t.panel?t.panel.show():((n=(n=e.panel).type?{layout:"grid",items:n}:n).role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,t.panel=new yt(n).on("hide",function(){t.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow());var n=t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));t.panel.classes.toggle("start","l"===n.substr(-1)),t.panel.classes.toggle("end","r"===n.substr(-1));e="t"===n.substr(0,1);t.panel.classes.toggle("bottom",!e),t.panel.classes.toggle("top",e),t.panel.moveRel(t.getEl(),n)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),Bn=v.DOM,Ln=An.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",s="";return i&&(e.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+e.encode(i)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+s+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this,n=t.settings.onclick;return t.on("click",function(e){e.aria&&"down"===e.aria.key||e.control!==t||Bn.getParent(e.target,"."+t.classPrefix+"open")||(e.stopImmediatePropagation(),n.call(t,e))}),delete t.settings.onclick,t._super()}}),zn=tinymce.util.Tools.resolve("tinymce.util.Color"),In=Ht.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var t,n,i,r,o,s=this,a=s.color();function l(e,t){var n=be.getPos(e),i=t.pageX-n.x,n=t.pageY-n.y;return{x:Math.max(0,Math.min(i/e.clientWidth,1)),y:Math.max(0,Math.min(n/e.clientHeight,1))}}function c(e,t){var n=(360-e.h)/360;be.css(i,{top:100*n+"%"}),t||be.css(o,{left:e.s+"%",top:100-e.v+"%"}),r.style.background=zn({s:100,v:100,h:e.h}).toHex(),s.color().parse({s:e.s,v:e.v,h:e.h})}function e(e){e=l(r,e);t.s=100*e.x,t.v=100*(1-e.y),c(t),s.fire("change")}function u(e){e=l(n,e);(t=a.toHsv()).h=360*(1-e.y),c(t,!0),s.fire("change")}n=s.getEl("h"),i=s.getEl("hp"),r=s.getEl("sv"),o=s.getEl("svp"),s._repaint=function(){c(t=a.toHsv())},s._super(),s._svdraghelper=new st(s._id+"-sv",{start:e,drag:e}),s._hdraghelper=new st(s._id+"-h",{start:u,drag:u}),s._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=zn()),this._color},renderHtml:function(){var e=this._id,o=this.classPrefix,s="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";var t='<div id="'+e+'-h" class="'+o+'colorpicker-h" style="'+("background: -ms-linear-gradient(top,"+s+");background: linear-gradient(to bottom,"+s+");")+'">'+function(){for(var e="",t="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",n=s.split(","),i=0,r=n.length-1;i<r;i++)e+='<div class="'+o+'colorpicker-h-chunk" style="height:'+100/r+"%;"+t+n[i]+",endColorstr="+n[i+1]+");-ms-"+t+n[i]+",endColorstr="+n[i+1]+')"></div>';return e}()+'<div id="'+e+'-hp" class="'+o+'colorpicker-h-marker"></div></div>';return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+o+'colorpicker-sv"><div class="'+o+'colorpicker-overlay1"><div class="'+o+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+o+'colorpicker-selector1"><div class="'+o+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),Fn=Ht.extend({init:function(e){e=g.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e=this.settings,t={id:this._id,hidefocus:"1"},t=be.create("div",t,"<span>"+this.translate(e.text)+"</span>");return e.height&&be.css(t,"height",e.height+"px"),e.width&&be.css(t,"width",e.width+"px"),t.className=this.classes,t.outerHTML},postRender:function(){function e(e){e.preventDefault(),i.classes.toggle("dragenter"),i.getEl().className=i.classes}var i=this;i._super(),i.$el.on("dragover",function(e){e.preventDefault()}),i.$el.on("dragenter",e),i.$el.on("dragleave",e),i.$el.on("drop",function(e){var t;e.preventDefault(),i.state.get("disabled")||(t=function(e){var t=i.settings.accept;if("string"!=typeof t)return e;var n=new RegExp("("+t.split(/\s*,\s*/).join("|")+")$","i");return g.grep(e,function(e){return n.test(e.name)})}(e.dataTransfer.files),i.value=function(){return t.length?i.settings.multiple?t:t[0]:null},t.length&&i.fire("change",e))})},remove:function(){this.$el.off(),this._super()}}),Un=Ht.extend({init:function(e){var t=this;e.delimiter||(e.delimiter=""),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){(e=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[e],index:e})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(e){for(var t=e||[],n="",i=this.classPrefix,r=0,o=t.length;r<o;r++)n+=(0<r?'<div class="'+i+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+i+"path-item"+(r===o-1?" "+i+"last":"")+'" data-index="'+r+'" tabindex="-1" id="'+this._id+"-"+r+'" aria-level="'+(r+1)+'">'+t[r].name+"</div>";return n=n||'<div class="'+i+'path-item"></div>'}}),Vn=Un.extend({postRender:function(){var o=this,s=o.settings.editor;return!1!==s.settings.elementpath&&(o.on("select",function(e){s.focus(),s.selection.select(this.row()[e.index].element),s.nodeChanged()}),s.on("nodeChange",function(e){for(var t=[],n=e.parents,i=n.length;i--;)if(1===n[i].nodeType&&!function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return 1;if("bookmark"===e.getAttribute("data-mce-type"))return 1}}(n[i])){var r=s.fire("ResolveName",{name:n[i].nodeName.toLowerCase(),target:n[i]});if(r.isDefaultPrevented()||t.push({name:r.name,element:n[i]}),r.isPropagationStopped())break}o.row(t)})),o._super()}}),Yn=rt.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),$n=rt.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var n=this,e=n.items();n.settings.formItemDefaults||(n.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var t=e.settings.label;t&&((t=new Yn(g.extend({items:{type:"label",id:e._id+"-l",text:t,flex:0,forId:e._id,disabled:e.disabled()}},n.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),n.replace(e,t),t.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var r=this;function e(){var e,t,n=0,i=[];if(!1!==r.settings.labelGapCalc)for(("children"===r.settings.labelGapCalc?r.find("formitem"):r.items()).filter("formitem").each(function(e){var t=e.items()[0],e=t.getEl().clientWidth;n=n<e?e:n,i.push(t)}),t=r.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=n+t}r._super(),r.on("show",e),e()}}),qn=$n.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),Xn=0,jn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:c(e)}},Jn={fromHtml:function(e,t){t=(t||y.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw y.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return jn(t.childNodes[0])},fromTag:function(e,t){e=(t||y.document).createElement(e);return jn(e)},fromText:function(e,t){e=(t||y.document).createTextNode(e);return jn(e)},fromDom:jn,fromPoint:function(e,t,n){e=e.dom();return X.from(e.elementFromPoint(t,n)).map(jn)}},Gn=(y.Node.ATTRIBUTE_NODE,y.Node.CDATA_SECTION_NODE,y.Node.COMMENT_NODE,y.Node.DOCUMENT_NODE),te=(y.Node.DOCUMENT_TYPE_NODE,y.Node.DOCUMENT_FRAGMENT_NODE,y.Node.ELEMENT_NODE),Kn=(y.Node.TEXT_NODE,y.Node.PROCESSING_INSTRUCTION_NODE,y.Node.ENTITY_REFERENCE_NODE,y.Node.ENTITY_NODE,y.Node.NOTATION_NODE,void 0!==y.window?y.window:Function("return this;")(),function(){return Zn(0,0)}),Zn=function(e,t){return{major:e,minor:t}},Qn={nu:Zn,detect:function(e,t){t=String(t).toLowerCase();return 0===e.length?Kn():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,t);if(!n)return{major:0,minor:0};e=function(e){return Number(t.replace(n,"$"+e))};return Zn(e(1),e(2))}(e,t)},unknown:Kn},ei="Firefox",ti=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Lt("Edge",t),isChrome:Lt("Chrome",t),isIE:Lt("IE",t),isOpera:Lt("Opera",t),isFirefox:Lt(ei,t),isSafari:Lt("Safari",t)}},ni={unknown:function(){return ti({current:void 0,version:Qn.unknown()})},nu:ti,edge:c("Edge"),chrome:c("Chrome"),ie:c("IE"),opera:c("Opera"),firefox:c(ei),safari:c("Safari")},ii="Windows",ri="Android",oi="Solaris",si="FreeBSD",ai=function(e){var t=e.current;return{current:t,version:e.version,isWindows:zt(ii,t),isiOS:zt("iOS",t),isAndroid:zt(ri,t),isOSX:zt("OSX",t),isLinux:zt("Linux",t),isSolaris:zt(oi,t),isFreeBSD:zt(si,t)}},li={unknown:function(){return ai({current:void 0,version:Qn.unknown()})},nu:ai,windows:c(ii),ios:c("iOS"),android:c(ri),linux:c("Linux"),osx:c("OSX"),solaris:c(oi),freebsd:c(si)},ci=function(e,n){return It(e,n).map(function(e){var t=Qn.detect(e.versionRegexes,n);return{current:e.name,version:t}})},ui=function(e,n){return It(e,n).map(function(e){var t=Qn.detect(e.versionRegexes,n);return{current:e.name,version:t}})},di=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ft(e,"edge/")&&Ft(e,"chrome")&&Ft(e,"safari")&&Ft(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,di=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return Ft(e,"chrome")&&!Ft(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ft(e,"msie")||Ft(e,"trident")}},{name:"Opera",versionRegexes:[di,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(Ee=function(t){return function(e){return Ft(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ee("firefox")},{name:"Safari",versionRegexes:[di,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ft(e,"safari")||Ft(e,"mobile/"))&&Ft(e,"applewebkit")}}],Ee=[{name:"Windows",search:Ee("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ft(e,"iphone")||Ft(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ee("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ee("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ee("linux"),versionRegexes:[]},{name:"Solaris",search:Ee("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ee("freebsd"),versionRegexes:[]}],fi={browsers:c(di),oses:c(Ee)},hi=function(e){var t,n,i,r=fi.browsers(),o=fi.oses(),s=ci(r,e).fold(ni.unknown,ni.nu),a=ui(o,e).fold(li.unknown,li.nu);return{browser:s,os:a,deviceType:(n=s,i=e,r=(t=a).isiOS()&&!0===/ipad/i.test(i),o=t.isiOS()&&!r,s=t.isAndroid()&&3===t.version.major,e=t.isAndroid()&&4===t.version.major,a=r||s||e&&!0===/mobile/i.test(i),s=t.isiOS()||t.isAndroid(),e=s&&!a,i=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:c(r),isiPhone:c(o),isTablet:c(a),isPhone:c(e),isTouch:c(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:c(i)})}},Ee=(En=!(Rn=function(){var e=y.navigator.userAgent;return hi(e)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return En||(En=!0,Cn=Rn.apply(null,e)),Cn}),mi=te,gi=Gn,pi=({detect:Ee}.detect().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),g.trim),vi=(Ee=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}})("true"),bi=Ee("false"),yi=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return vi(e)}return!1}(e)&&!bi(e)},xi=function(e){e=Zt(e);return O(W(O(e,Jt),Gt).concat(W(O(e,Xt),Kt)),Qt)},wi={},_i=function(e,t){var n=e.toLowerCase(),t=g.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===t.length&&t[0].title===e?[]:t},Ri=Dn.extend({Statics:{clearHistory:function(){wi={}}},init:function(e){var t,n,i,r=this,o=(window.tinymce||u).activeEditor,s=o.settings,a=e.filetype;e.spellcheck=!1,(i=(i=s.file_picker_types||s.file_browser_callback_types)&&g.makeMap(i,/[, ]/))&&!i[a]||(!(n=s.file_picker_callback)||i&&!i[a]?!(n=s.file_browser_callback)||i&&!i[a]||(t=function(){n(r.getEl("inp").id,r.value(),a,window)}):t=function(){var e=r.fire("beforecall").meta,e=g.extend({filetype:a},e);n.call(o,function(e,t){r.value(e).fire("change",{meta:t})},r.value(),e)}),t&&(e.icon="browse",e.onaction=t),r._super(e),r.classes.add("filepicker"),on(r,s,o.getBody(),a),sn(r,s,a)}}),Ci=Sn.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),Ei=Sn.extend({recalc:function(e){var t,n,i,r,o,s,a,l,c,u,d,f,h,m,g,p,v,b,y,x,w,_,R,C,E,k,H,S,T=[],M=Math.max,N=Math.min,P=e.items().filter(":visible"),W=e.layoutRect(),D=e.paddingBox,O=e.settings,A=e.isRtl()?O.direction||"row-reversed":O.direction,B=O.align,L=e.isRtl()?O.pack||"end":O.pack,z=O.spacing||0;for("row-reversed"!==A&&"column-reverse"!==A||(P=P.set(P.toArray().reverse()),A=A.split("-")[0]),A="column"===A?(p="y",m="h",g="minH",v="maxH",y="innerH",b="top",x="deltaH",w="contentH",k="left",C="w",_="x",R="innerW",E="minW",H="right",S="deltaW","contentW"):(p="x",m="w",g="minW",v="maxW",y="innerW",b="left",x="deltaW",w="contentW",k="top",C="h",_="y",R="innerH",E="minH",H="bottom",S="deltaH","contentH"),r=W[y]-D[b]-D[b],t=h=i=0,n=P.length;t<n;t++)s=(o=P[t]).layoutRect(),r-=t<n-1?z:0,0<(a=o.settings.flex)&&(i+=a,s[v]&&T.push(o),s.flex=a),r-=s[g],h<(l=D[k]+s[E]+D[H])&&(h=l);if(d={},d[g]=r<0?W[g]-r+W[x]:W[y]-r+W[x],d[E]=h+W[S],d[w]=W[y]-r,d[A]=h,d.minW=N(d.minW,W.maxW),d.minH=N(d.minH,W.maxH),d.minW=M(d.minW,W.startMinWidth),d.minH=M(d.minH,W.startMinHeight),W.autoResize&&(d.minW!==W.minW||d.minH!==W.minH))return d.w=d.minW,d.h=d.minH,e.layoutRect(d),this.recalc(e),void(null!==e._lastRect||(e=e.parent())&&(e._lastRect=null,e.recalc()));for(u=r/i,t=0,n=T.length;t<n;t++)(c=(s=(o=T[t]).layoutRect())[v])<(l=s[g]+s.flex*u)?(r-=s[v]-s[g],i-=s.flex,s.flex=0,s.maxFlexSize=c):s.maxFlexSize=0;for(u=r/i,f=D[b],d={},0===i&&("end"===L?f=r+D[b]:"center"===L?(f=Math.round(W[y]/2-(W[y]-r)/2)+D[b])<0&&(f=D[b]):"justify"===L&&(f=D[b],z=Math.floor(r/(P.length-1)))),d[_]=D[k],t=0,n=P.length;t<n;t++)l=(s=(o=P[t]).layoutRect()).maxFlexSize||s[g],"center"===B?d[_]=Math.round(W[R]/2-s[C]/2):"stretch"===B?(d[C]=M(s[E]||0,W[R]-D[k]-D[H]),d[_]=D[k]):"end"===B&&(d[_]=W[R]-s[C]-D.top),0<s.flex&&(l+=s.flex*u),d[m]=l,d[p]=f,o.layoutRect(d),o.recalc&&o.recalc(),f+=l+z}}),ki=Hn.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),Hi=function(i){var t=["alignleft","aligncenter","alignright","alignjustify"],r="alignleft",e=[{text:"Left",icon:"alignleft",onclick:ln(i,"alignleft")},{text:"Center",icon:"aligncenter",onclick:ln(i,"aligncenter")},{text:"Right",icon:"alignright",onclick:ln(i,"alignright")},{text:"Justify",icon:"alignjustify",onclick:ln(i,"alignjustify")}];i.addMenuItem("align",{text:"Align",menu:e}),i.addButton("align",{type:"menubutton",icon:r,menu:e,onShowMenu:function(e){var n=e.control.menu;g.each(t,function(t,e){n.items().eq(e).each(function(e){return e.active(i.formatter.match(t))})})},onPostRender:function(e){var n=e.control;g.each(t,function(t,e){cn(i,t,function(e){n.icon(r),e&&n.icon(t)})})}}),g.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,t){i.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:un(i,t)})})},Si=function(e){hn(e)},Ti=function(e){pn(e)},Mi=function(n,e){var i=e.length;return g.each(e,function(e){e.menu&&(e.hidden=0===Mi(n,e.menu));var t=e.format;t&&(e.hidden=!n.formatter.canApply(t)),e.hidden&&i--}),i},Ni=function(n,e){var i=e.items().length;return e.items().each(function(e){e.menu&&e.visible(0<Ni(n,e.menu)),!e.menu&&e.settings.menu&&e.visible(0<Mi(n,e.settings.menu));var t=e.settings.format;t&&e.visible(n.formatter.canApply(t)),e.visible()||i--}),i},Pi=function(e){var n,r,o,s,t,i,a=(r=0,o=[],t=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],s=function(e){var i=[];if(e)return g.each(e,function(e){var t,n={text:e.title,icon:e.icon};e.items?n.menu=s(e.items):(t=e.format||"custom"+r++,e.format||(e.name=t,o.push(e)),n.format=t,n.cmd=e.cmd),i.push(n)}),i},(n=e).on("init",function(){g.each(o,function(e){n.formatter.register(e.name,e)})}),{type:"menu",items:n.settings.style_formats_merge?n.settings.style_formats?s(t.concat(n.settings.style_formats)):s(t):s(n.settings.style_formats||t),onPostRender:function(e){n.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return n.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var e=t.settings.format;e&&(t.disabled(!n.formatter.canApply(e)),t.active(n.formatter.match(e))),(e=t.settings.cmd)&&t.active(n.queryCommandState(e))})},onclick:function(){this.settings.format&&ln(n,this.settings.format)(),this.settings.cmd&&n.execCommand(this.settings.cmd)}}});t=a,e.addMenuItem("formats",{text:"Formats",menu:t}),a=a,(i=e).addButton("styleselect",{type:"menubutton",text:"Formats",menu:a,onShowMenu:function(){i.settings.style_formats_autohide&&Ni(i,this.menu)}})},Wi=function(e){var t,n,i=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:(t=e,n=i,g.map(n,function(e){return{text:e[0],onclick:ln(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}}))}),e.addButton("formatselect",vn(e,i))},Di=function(t,e){var n;if("string"==typeof e)n=e.split(" ");else if(g.isArray(e))return function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!ee(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);re.apply(t,e[n])}return t}(g.map(e,function(e){return Di(t,e)}));return n=g.grep(n,function(e){return"|"===e||e in t.menuItems}),g.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Oi=function(e){var t;(t=e).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(xn(t)),this.menu.renderNew()}})},Ai=function(e){var n;wn(e),n=e,g.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,t){n.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),n.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:ln(n,"code")})},Bi=function(e){var t;(t=e).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:_n(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:_n(t,"redo"),cmd:"redo"}),(e=e).addButton("undo",{tooltip:"Undo",onPostRender:_n(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:_n(e,"redo"),cmd:"redo"})},Li=function(e){var n;(e=e).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(n=e,function(){var t=this;n.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(n.hasVisual)}),cmd:"mceToggleVisualAid"})},zi={setup:function(e){var t;e.rtl&&(tt.rtl=!0),e.on("mousedown progressstate",function(){yt.hideAll()}),(t=e).settings.ui_container&&(ue.container=an(Jn.fromDom(y.document.body),t.settings.ui_container).fold(c(null),function(e){return e.dom()})),Ht.tooltips=!ue.iOS,tt.translate=function(e){return u.translate(e)},Wi(e),Hi(e),Ai(e),Bi(e),Ti(e),Si(e),Pi(e),Li(e),Oi(e)}},Ii=Sn.extend({recalc:function(e){var t,n,i,r,o,s,a,l,c,u,d,f,h,m,g,p,v,b=[],y=[],x=e.settings,w=e.items().filter(":visible"),_=e.layoutRect(),R=x.columns||Math.ceil(Math.sqrt(w.length)),C=Math.ceil(w.length/R),E=x.spacingH||x.spacing||0,k=x.spacingV||x.spacing||0,H=x.alignH||x.align,S=x.alignV||x.align,T=e.paddingBox,M="reverseRows"in x?x.reverseRows:e.isRtl();for(H&&"string"==typeof H&&(H=[H]),S&&"string"==typeof S&&(S=[S]),O=0;O<R;O++)b.push(0);for(s=0;s<C;s++)y.push(0);for(s=0;s<C;s++)for(O=0;O<R&&(o=w[s*R+O]);O++)h=(r=o.layoutRect()).minW,m=r.minH,b[O]=h>b[O]?h:b[O],y[s]=m>y[s]?m:y[s];for(g=_.innerW-T.left-T.right,O=d=0;O<R;O++)d+=b[O]+(0<O?E:0),g-=(0<O?E:0)+b[O];for(p=_.innerH-T.top-T.bottom,s=f=0;s<C;s++)f+=y[s]+(0<s?k:0),p-=(0<s?k:0)+y[s];if(d+=T.left+T.right,f+=T.top+T.bottom,i={},i.minW=d+(_.w-_.innerW),i.minH=f+(_.h-_.innerH),i.contentW=i.minW-_.deltaW,i.contentH=i.minH-_.deltaH,i.minW=Math.min(i.minW,_.maxW),i.minH=Math.min(i.minH,_.maxH),i.minW=Math.max(i.minW,_.startMinWidth),i.minH=Math.max(i.minH,_.startMinHeight),_.autoResize&&(i.minW!==_.minW||i.minH!==_.minH))return i.w=i.minW,i.h=i.minH,e.layoutRect(i),this.recalc(e),void(null!==e._lastRect||(v=e.parent())&&(v._lastRect=null,v.recalc()));_.autoResize&&((i=e.layoutRect(i)).contentW=i.minW-_.deltaW,i.contentH=i.minH-_.deltaH);var N="start"!==x.packV&&0<p?Math.floor(p/C):0,P=0,W=x.flexWidths;if(W)for(O=0;O<W.length;O++)P+=W[O];else P=R;for(var D=g/P,O=0;O<R;O++)b[O]+=W?W[O]*D:D;for(l=T.top,s=0;s<C;s++){for(a=T.left,n=y[s]+N,O=0;O<R&&(o=w[M?s*R+R-1-O:s*R+O]);O++)c=o.settings,r=o.layoutRect(),t=Math.max(b[O],r.startMinWidth),r.x=a,r.y=l,"center"===(u=c.alignH||(H?H[O]||H[0]:null))?r.x=a+t/2-r.w/2:"right"===u?r.x=a+t-r.w:"stretch"===u&&(r.w=t),"center"===(u=c.alignV||(S?S[O]||S[0]:null))?r.y=l+n/2-r.h/2:"bottom"===u?r.y=l+n-r.h:"stretch"===u&&(r.h=n),o.layoutRect(r),a+=t+E,o.recalc&&o.recalc();l+=n+k}}}),Fi=Ht.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,t&&t()):E.setTimeout(function(){n.html(e)}),this}}),Ui=Ht.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Vi=Ht.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(be.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,be.getSize(e.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,i=n.settings.forId,r=n.settings.html||n.encode(n.state.get("text"));return(i=!i&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])?e._id:i)?'<label id="'+n._id+'" class="'+n.classes+'"'+(i?' for="'+i+'"':"")+">"+r+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+r+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Yi=rt.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}}),$i=Yi.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),qi=Tn.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t=this;if(t.menu&&t.menu.visible()&&!1!==e)return t.hideMenu();t.menu||(n=t.state.get("menu")||[],t.classes.add("opened"),n.length?n={type:"menu",animate:!0,items:n}:(n.type=n.type||"menu",n.animate=!0),n.renderTo?t.menu=n.parent(t).show().renderTo():t.menu=b.create(n).parent(t).renderTo(),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control.parent()===t.menu&&(e.stopPropagation(),t.focus(),t.hideMenu())}),t.menu.on("select",function(){t.focus()}),t.menu.on("show hide",function(e){"hide"===e.type&&e.control.parent()===t&&t.classes.remove("opened-under"),e.control===t.menu&&(t.activeMenu("show"===e.type),t.classes.toggle("opened","show"===e.type)),t.aria("expanded","show"===e.type)}).fire("show")),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.repaint(),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var e=t.menu.layoutRect(),n=t.$el.offset().top+t.layoutRect().h;n>e.y&&n<e.y+e.h&&t.classes.add("opened-under"),t.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.settings.icon,r=e.state.get("text"),o="",s=e.settings.image;return s=s?(i="none"," style=\"background-image: url('"+(s="string"!=typeof s?y.window.getSelection?s[0]:s[1]:s)+"')\""):"",r&&(e.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+e.encode(r)+"</span>"),i=e.settings.icon?n+"ico "+n+"i-"+i:"",e.aria("role",e.parent()instanceof $i?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+s+"></i>":"")+o+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var i=this;return i.on("click",function(e){e.control===i&&function(e,t){for(;e;){if(t===e)return 1;e=e.parentNode}}(e.target,i.getEl())&&(i.focus(),i.showMenu(!e.aria),e.aria&&i.menu.items().filter(":visible")[0].focus())}),i.on("mouseenter",function(e){var t,n=e.control,e=i.parent();n&&e&&n instanceof qi&&n.parent()===e&&(e.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==n&&(e.menu&&e.menu.visible()&&(t=!0),e.hideMenu())}),t&&(n.focus(),n.showMenu()))}),i._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Xi=yt.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=g.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==ue.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,n=this;function i(){n.throbber&&(n.throbber.hide(),n.throbber=null)}n.settings.itemsFactory&&(n.throbber||(n.throbber=new _t(n.getEl("body"),!0),0===n.items().length?(n.throbber.show(),n.fire("loading")):n.throbber.show(100,function(){n.items().remove(),n.fire("loading")}),n.on("hide close",i)),n.requestTime=t=(new Date).getTime(),n.settings.itemsFactory(function(e){0!==e.length?n.requestTime===t&&(n.getEl().style.width="",n.getEl("body").style.width="",i(),n.items().remove(),n.getEl("body").innerHTML="",n.add(e),n.renderNew(),n.fire("loaded")):n.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){e=e.settings;if(e.icon||e.image||e.selectable)return!(t._hasIcons=!0)}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t.on("show hide",function(e){e.control===t&&("show"===e.type?E.setTimeout(function(){t.classes.add("in")},0):t.classes.remove("in"))}),t._super()}}),ji=qi.extend({init:function(i){var e,r,o,n,s=this;s._super(i),i=s.settings,s._values=e=i.values,e&&(void 0!==i.value&&function e(t){for(var n=0;n<t.length;n++){if(r=t[n].selected||i.value===t[n].value)return o=o||t[n].text,s.state.set("value",t[n].value),1;if(t[n].menu&&e(t[n].menu))return 1}}(e),!r&&0<e.length&&(o=e[0].text,s.state.set("value",e[0].value)),s.state.set("menu",e)),s.state.set("text",i.text||o),s.classes.add("listbox"),s.on("select",function(e){var t=e.control;n&&(e.lastControl=n),i.multiple?t.active(!t.active()):s.value(e.control.value()),n=t})},value:function(n){return 0===arguments.length?this.state.get("value"):(void 0===n||(this.settings.values&&!function t(e){return P(e,function(e){return e.menu?t(e.menu):e.value===n})}(this.settings.values)?null===n&&this.state.set("value",null):this.state.set("value",n)),this)},bindStates:function(){var n=this;return n.on("show",function(e){var t;e=e.control,t=n.value(),e instanceof Xi&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}),n.state.on("change:value",function(e){e=function e(t,n){var i;if(t)for(var r=0;r<t.length;r++){if(t[r].value===n)return t[r];if(t[r].menu&&(i=e(t[r].menu,n)))return i}}(n.state.get("menu"),e.value);e?n.text(e.text):n.text(n.settings.text)}),n._super()}}),Ji=Ht.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,n=this,e=n.settings,i=n.parent();i.items().each(function(e){e!==n&&e.hideMenu()}),e.menu&&((t=n.menu)?t.show():((t=e.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",i.settings.itemDefaults&&(t.itemDefaults=i.settings.itemDefaults),(t=n.menu=b.create(t).parent(n).renderTo()).reflow(),t.on("cancel",function(e){e.stopPropagation(),n.focus(),t.hide()}),t.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),t.on("hide",function(e){e.control===t&&n.classes.remove("selected")}),t.submenu=!0),t._parentMenu=i,t.classes.add("menu-sub"),i=t.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),t.moveRel(n.getEl(),i),i="menu-sub-"+(t.rel=i),t.classes.remove(t._lastRel).add(i),t._lastRel=i,n.classes.add("selected"),n.aria("expanded",!0))},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e,t=this,n=t._id,i=t.settings,r=t.classPrefix,o=t.state.get("text"),s=t.settings.icon,a="",l=i.shortcut,c=t.encode(i.url);function u(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(e){var t=i.match||"";return t?e.replace(new RegExp(u(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function f(e){return e.replace(new RegExp(u("!mce~match["),"g"),"<b>").replace(new RegExp(u("]mce~match!"),"g"),"</b>")}return s&&t.parent().classes.add("menu-has-icons"),i.image&&(a=" style=\"background-image: url('"+i.image+"')\""),l=l&&function(e){var t,n,i={},i=ue.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"};for(e=e.split("+"),t=0;t<e.length;t++)(n=i[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(l),s=r+"ico "+r+"i-"+(t.settings.icon||"none"),e="-"!==o?'<i class="'+s+'"'+a+"></i>":"",o=f(t.encode(d(o))),c=f(t.encode(d(c))),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1">'+e+("-"!==o?'<span id="'+n+'-text" class="'+r+'text">'+o+"</span>":"")+(l?'<div id="'+n+'-shortcut" class="'+r+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+r+'caret"></div>':"")+(c?'<div class="'+r+'menu-item-link">'+c+"</div>":"")+"</div>"},postRender:function(){var e,t=this,n=t.settings,i=n.textStyle;return!(i="function"==typeof i?i.call(this):i)||(e=t.getEl("text"))&&(e.setAttribute("style",i),t._textStyle=i),t.on("mouseenter click",function(e){e.control===t&&(n.menu||"click"!==e.type?(t.showMenu(),e.aria&&t.menu.focus(!0)):(t.fire("select"),E.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){var t,n,i;return n=e,(i=(t=this)._textStyle)&&((t=t.getEl("text")).setAttribute("style",i),n&&(t.style.color="",t.style.backgroundColor="")),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Gi=Pn.extend({Defaults:{classes:"radio",role:"radio"}}),Ki=Ht.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new st(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Zi(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var Qi=Ht.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var n=this;n._super(e),n.settings.size&&(n.size=n.settings.size),n.settings.options&&(n._options=n.settings.options),n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e=this,t="",n=Zi(e._options);return e.size&&(t=' size = "'+e.size+'"'),'<select id="'+e._id+'" class="'+e.classes+'"'+t+">"+n+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=Zi(e.value)}),t._super()}});function er(e,t,n){return e=n<(e=e<t?t:e)?n:e}function tr(e,t,n){e.setAttribute("aria-"+t,n)}function nr(e,t){var n,i="v"===e.settings.orientation?(n="top",o="height","h"):(n="left",o="width","w"),r=e.getEl("handle"),o=((e.layoutRect()[i]||100)-be.getSize(r)[o])*((t-e._minValue)/(e._maxValue-e._minValue))+"px";r.style[n]=o,r.style.height=e.layoutRect().h+"px",tr(r,"valuenow",t),tr(r,"valuetext",""+e.settings.previewFilter(t)),tr(r,"valuemin",e._minValue),tr(r,"valuemax",e._maxValue)}function ir(){return{Selector:Oe,Collection:Fe,ReflowQueue:qe,Control:tt,Factory:b,KeyboardNavigation:nt,Container:rt,DragHelper:st,Scrollable:dt,Panel:ft,Movable:Ce,Resizable:ht,FloatPanel:yt,Window:At,MessageBox:Bt,Tooltip:kt,Widget:Ht,Progress:St,Notification:Tt,Layout:Hn,AbsoluteLayout:Sn,Button:Tn,ButtonGroup:Nn,Checkbox:Pn,ComboBox:Dn,ColorBox:On,PanelButton:An,ColorButton:Ln,ColorPicker:In,Path:Un,ElementPath:Vn,FormItem:Yn,Form:$n,FieldSet:qn,FilePicker:Ri,FitLayout:Ci,FlexLayout:Ei,FlowLayout:ki,FormatControls:zi,GridLayout:Ii,Iframe:Fi,InfoBox:Ui,Label:Vi,Toolbar:Yi,MenuBar:$i,MenuButton:qi,MenuItem:Ji,Throbber:_t,Menu:Xi,ListBox:ji,Radio:Gi,ResizeHandle:Ki,SelectBox:Qi,Slider:rr,Spacer:or,SplitButton:sr,StackLayout:ar,TabPanel:lr,TextBox:cr,DropZone:Fn,BrowseButton:Mn}}var rr=Ht.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=ne(e.minValue)?e.minValue:0,t._maxValue=ne(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,i,r,o,s,a,l,c,u,d,f,h,m,g,p=this;function v(e){var t,n,i,r=p.value();r=er(((r+(i=t=s))/((n=a)-i)+.05*e)*(n-t)-t,s,a),p.value(r),p.fire("dragstart",{value:r}),p.fire("drag",{value:r}),p.fire("dragend",{value:r})}e=p._minValue,t=p._maxValue,o="v"===p.settings.orientation?(n="screenY",i="top",r="height","h"):(n="screenX",i="left",r="width","w"),p._super(),s=e,a=t,p.on("keydown",function(e){switch(e.keyCode){case 37:case 38:v(-1);break;case 39:case 40:v(1)}}),l=e,c=t,u=p.getEl("handle"),p._dragHelper=new st(p._id,{handle:p._id+"-handle",start:function(e){d=e[n],f=parseInt(p.getEl("handle").style[i],10),h=(p.layoutRect()[o]||100)-be.getSize(u)[r],p.fire("dragstart",{value:g})},drag:function(e){e=e[n]-d;m=er(f+e,0,h),u.style[i]=m+"px",g=l+m/h*(c-l),p.value(g),p.tooltip().text(""+p.settings.previewFilter(g)).show().moveRel(u,"bc tc"),p.fire("drag",{value:g})},stop:function(){p.tooltip().hide(),p.fire("dragend",{value:g})}})},repaint:function(){this._super(),nr(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){nr(t,e.value)}),t._super()}}),or=Ht.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),sr=qi.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t=this.getEl(),n=this.layoutRect();return this._super(),e=t.firstChild,t=t.lastChild,pe(e).css({width:n.w-be.getSize(t).width,height:n.h-2}),pe(t).css({height:n.h-2}),this},activeMenu:function(e){pe(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("icon"),r=e.state.get("text"),o=e.settings,s="",a=o.image;return a=a?(i="none"," style=\"background-image: url('"+(a="string"!=typeof a?y.window.getSelection?a[0]:a[1]:a)+"')\""):"",i=o.icon?n+"ico "+n+"i-"+i:"",r&&(e.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+e.encode(r)+"</span>"),o="boolean"==typeof o.active?' aria-pressed="'+o.active+'"':"",'<div id="'+t+'" class="'+e.classes+'" role="button"'+o+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+a+"></i>":"")+s+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(i?"":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(e){var t=e.target;if(e.control===this)for(;t;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===t.nodeName&&-1===t.className.indexOf("open"))return e.stopImmediatePropagation(),void(n&&n.call(this,e));t=t.parentNode}}),delete this.settings.onclick,this._super()}}),ar=ki.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),lr=ft.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),pe(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+n,(e=this.getEl("t"+n)).setAttribute("aria-selected","true"),pe(e).addClass(this.classPrefix+"active"),this.items()[n].show().fire("showtab"),this.reflow(),this.items().each(function(e,t){n!==t&&e.hide()})},renderHtml:function(){var n=this,e=n._layout,i="",r=n.classPrefix;return n.preRender(),e.preRender(n),n.items().each(function(e,t){t=n._id+"-t"+t;e.aria("role","tabpanel"),e.aria("labelledby",t),i+='<div id="'+t+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+n.encode(e.settings.title)+"</div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+r+'tabs" role="tablist">'+i+'</div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+e.renderHtml(n)+"</div></div>"},postRender:function(){var i=this;i._super(),i.settings.activeTab=i.settings.activeTab||0,i.activateTab(i.settings.activeTab),this.on("click",function(e){var t=e.target.parentNode;if(t&&t.id===i._id+"-head")for(var n=t.childNodes.length;n--;)t.childNodes[n]===e.target&&i.activateTab(n)})},initLayoutRect:function(){var t,e=this,n=be.getSize(e.getEl("head")).width;n=n<0?0:n,t=0,e.items().each(function(e){n=Math.max(n,e.layoutRect().minW),t=Math.max(t,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=t,e.layoutRect({x:0,y:0,w:n,h:t})});var i=be.getSize(e.getEl("head")).height;return e.settings.minWidth=n,e.settings.minHeight=t+i,(e=e._super()).deltaH+=i,e.innerH=e.h-e.deltaH,e}}),cr=Ht.extend({init:function(e){var n=this;n._super(e),n.classes.add("textbox"),e.multiline?n.classes.add("multiline"):(n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))}),n.on("keyup",function(e){n.state.set("value",e.target.value)}))},repaint:function(){var e,t=this,n=0,i=t.getEl().style,r=t._layoutRect,o=t._lastRepaintRect||{},s=y.document;return!t.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(i.lineHeight=r.h-n+"px"),s=(e=t.borderBox).left+e.right+8,n=e.top+e.bottom+(t.settings.multiline?8:0),r.x!==o.x&&(i.left=r.x+"px",o.x=r.x),r.y!==o.y&&(i.top=r.y+"px",o.y=r.y),r.w!==o.w&&(i.width=r.w-s+"px",o.w=r.w),r.h!==o.h&&(i.height=r.h-n+"px",o.h=r.h),t._lastRepaintRect=o,t.fire("repaint",{},!1),t},renderHtml:function(){var e,t=this,n=t.settings,i={id:t._id,hidefocus:"1"};return g.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){i[e]=n[e]}),t.disabled()&&(i.disabled="disabled"),n.subtype&&(i.type=n.subtype),(e=be.create(n.multiline?"textarea":"input",i)).value=t.state.get("value"),e.className=t.classes.toString(),e.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),Ee=function(n){n.ui?g.each(ir(),function(e,t){n.ui[t]=e}):n.ui=ir()};g.each(ir(),function(e,t){b.add(t,e)}),Ee(window.tinymce||{}),e.add("modern",function(e){return zi.setup(e),kn(e)})}(window);
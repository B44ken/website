!function(o){"use strict";function n(e){return e&&"BR"===e.nodeName}function r(e,t){if(l(e))return{container:e,offset:t};var n=s.getNode(e,t);return l(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&l(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&l(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function a(e){return function(){return e}}function t(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,e)}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),c=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),i=tinymce.util.Tools.resolve("tinymce.util.VK"),f=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=function(e){return e&&3===e.nodeType},m=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},g=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},p=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},h=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},v=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},y=n,N=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},S=function(e,t){return e&&e.nodeName in t},C=function(e,t){return!!n(t)&&!(!e.isBlock(t.nextSibling)||n(t.previousSibling))},O=function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},b=function(e,t){return e.isChildOf(t,e.getRoot())},T=function(e){var t=e.cloneRange(),n=r(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);e=r(e.endContainer,e.endOffset);return t.setEnd(e.container,e.offset),t},E=u.DOM,L=function(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=E.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):E.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i},D=function(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,E.remove(t),!n.hasChildNodes()&&E.isBlock(n)&&n.appendChild(E.create("br"))),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=E.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),T(t)},w=a(!1),k=a(!0),A=($t={fold:function(e,t){return e()},is:w,isSome:w,isNone:k,getOr:R,getOrThunk:x,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:R,orThunk:x,map:Ht=function(){return A},each:function(){},bind:Ht,exists:w,forall:k,filter:Ht,equals:$t=function(e){return e.isNone()},equals_:$t,toArray:function(){return[]},toString:a("none()")},Object.freeze&&Object.freeze($t),$t);function x(e){return e()}function R(e){return e}function I(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function _(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function B(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function P(e,t,n){return _(e,function(e){n=t(n,e)}),n}function M(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return st.some(o)}return st.none()}function U(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!ct(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);gt.apply(t,e[n])}return t}(I(e,t))}function F(e){return 0===e.length?st.none():st.some(e[0])}function j(e){return 0===e.length?st.none():st.some(e[e.length-1])}function H(e,t){return function(e,t){for(var n=null!=t?t:pt,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}function $(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",St(e,t))}function q(e){var t=e.selection.getSelectedBlocks();return d.grep(function(n,e){e=d.map(e,function(e){var t=n.dom.getParent(e,"li,dd,dt",St(n,e));return t||e});return Nt.unique(e)}(e,t),function(e){return h(e)})}function W(e,t){return t=e.dom.getParents(t,"ol,ul",St(e,t)),j(t)}function V(e,t,n){return e.isSome()&&t.isSome()?st.some(n(e.getOrDie(),t.getOrDie())):st.none()}function z(){return vt("Node")}function K(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}function X(e,t){return function(){return t===e}}function Q(e,t){return function(){return t===e}}function Y(e,t){var n=String(t).toLowerCase();return M(e,function(e){return e.search(n)})}function G(e,t){return-1!==e.indexOf(t)}function J(e,t){return e.dom()===t.dom()}function Z(e){return st.from(e.dom().parentNode).map(Tt.fromDom)}function ee(e){return I(e.dom().childNodes,Tt.fromDom)}function te(e,t){return e=e.dom().childNodes,st.from(e[t]).map(Tt.fromDom)}function ne(e){return te(e,0)}function re(e){return te(e,e.dom().childNodes.length-1)}function oe(t,n){Z(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})}function ie(e,t){e.dom().appendChild(t.dom())}function ue(t,e){_(e,function(e){ie(t,e)})}function se(e){null!==(e=e.dom()).parentNode&&e.parentNode.removeChild(e)}function ae(e){return e.dom().nodeName.toLowerCase()}function ce(e,t){var n=e.dom();!function(e,t){for(var n=Et(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(t,function(e,t){!function(e,t,n){if(!(at(n)||ft(n)||lt(n)))throw o.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)})}function fe(e){return P(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})}function de(e,t,n){if(!at(n))throw o.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);var r;void 0!==(r=e).style&&dt(r.style.getPropertyValue)&&e.style.setProperty(t,n)}function le(e){return t=e,e=!0,Tt.fromDom(t.dom().cloneNode(e));var t}function me(e,t){var n=function(e,t){t=Tt.fromTag(t),e=fe(e);return ce(t,e),t}(e,t);return oe(e,n),t=ee(e),ue(n,t),se(e),n}function ge(e,t){ie(e.item,t.list)}function pe(e,t,n){for(var r=[],o=0;o<n;o++)r.push(function(e,t){e={list:Tt.fromTag(t,e),item:Tt.fromTag("li",e)};return ie(e.list,e.item),e}(e,t.listType));return r}function he(e,t){for(var n,r,o,i=0;i<e.length-1;i++)n=e[i].item,r="list-style-type",o="none",n=n.dom(),!void de(n,r,o);j(e).each(function(e){ce(e.list,t.listAttributes),ce(e.item,t.itemAttributes),ue(e.item,t.content)})}function ve(r,e,o){return e=e.slice(0,o.depth),j(e).each(function(e){var t,n=function(e,t,n){e=Tt.fromTag("li",e);return ce(e,t),ue(e,n),e}(r,o.itemAttributes,o.content);t=n,ie((n=e).list,t),n.item=t,t=o,ae((e=e).list)!==t.listType&&(e.list=me(e.list,t.listType)),ce(e.list,t.listAttributes)}),e}function ye(e,t,n){return function(e){for(var t=1;t<e.length;t++)ge(e[t-1],e[t])}(e=pe(e,n,n.depth-t.length)),he(e,n),n=e,V(j(t),F(n),ge),t.concat(e)}function Ne(e){return Kt(e,"OL,UL")}function Se(e){return ne(e).map(Ne).getOr(!1)}function Ce(e){return 0<e.depth}function Oe(e){return e.isSelected}function be(e){var t=ee(e),t=re(e).map(Ne).getOr(!1)?t.slice(0,-1):t;return I(t,le)}function Te(t){_(t,function(n,e){!function(e,t){for(var n=e[t].depth,r=t-1;0<=r;r--){if(e[r].depth===n)return st.some(e[r]);if(e[r].depth<n)break}return st.none()}(t,e).each(function(e){var t;t=e,(e=n).listType=t.listType,e.listAttributes=Yt({},t.listAttributes)})})}function Ee(i,u,s,a){return ne(a).filter(Ne).fold(function(){u.each(function(e){J(e.start,a)&&s.set(!0)});var t,n,r,e=(t=a,n=i,r=s.get(),Z(t).filter(Xt).map(function(e){return{depth:n,isSelected:r,content:be(t),itemAttributes:fe(t),listAttributes:fe(e),listType:ae(e)}}));u.each(function(e){J(e.end,a)&&s.set(!1)});var o=re(a).filter(Ne).map(function(e){return Jt(i,u,s,e)}).getOr([]);return e.toArray().concat(o)},function(e){return Jt(i,u,s,e)})}function Le(e,t){var n,r,o,i,u=e.dom,s=e.schema.getBlockElements(),a=u.createFragment();if((o=e.settings.forced_root_block?e.settings.forced_root_block:o)&&((r=u.create(o)).tagName===e.settings.forced_root_block&&u.setAttribs(r,e.settings.forced_root_block_attrs),S(t.firstChild,s)||a.appendChild(r)),t)for(;n=t.firstChild;){var c=n.nodeName;i||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(i=!0),S(n,s)?(a.appendChild(n),r=null):o?(r||(r=u.create(o),a.appendChild(r)),r.appendChild(n)):a.appendChild(n)}return e.settings.forced_root_block?i||Zt.ie&&!(10<Zt.ie)||r.appendChild(u.create("br",{"data-mce-bogus":"1"})):a.appendChild(u.create("br")),a}function De(r,e){return I(e,function(e){var t,n,e=(e=e.content,n=(t||o.document).createDocumentFragment(),_(e,function(e){n.appendChild(e.dom())}),Tt.fromDom(n));return Tt.fromDom(Le(r,e.dom()))})}function we(e,t){return Te(t),function(n,e){e=P(e,function(e,t){return(t.depth>e.length?ye:ve)(n,e,t)},[]);return F(e).map(function(e){return e.list})}(e.contentDocument,t).toArray()}function ke(e,t){_(B(e,Oe),function(e){return function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}}(t,e),0})}function Ae(e){return e=I(Ot.getSelectedListItems(e),Tt.fromDom),V(M(e,t(Se)),M(function(e){e=mt.call(e,0);return e.reverse(),e}(e),t(Se)),function(e,t){return{start:e,end:t}})}function xe(o,e,i){var t,n,e=(e=e,t=Ae(o),n=Gt(!1),I(e,function(e){return{sourceList:e,entries:Jt(0,t,n,e)}}));_(e,function(e){var t,n,r;ke(e.entries,i),t=e.sourceList,n=o,r=e.entries,r=U(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var s=e[i],a=t(s);a!==n&&(r.push(o),o=[]),n=a,o.push(s)}return 0!==o.length&&r.push(o),r}(r,Ce),function(e){return(F(e).map(Ce).getOr(!1)?we:De)(n,e)}),_(r,function(e){oe(t,e)}),se(e.sourceList)})}function Re(e){Kt(e,"dt")&&me(e,"dd")}function Ie(r,e,t){_(t,"Indent"===e?Re:function(e){return t=r,Kt(n=e,"dd")?me(n,"dt"):Kt(n,"dt")&&Z(n).each(function(e){return tn(t,e.dom(),n.dom())}),0;var t,n})}function _e(e,t){var n,r=I(Ot.getSelectedListRoots(e),Tt.fromDom),o=I(Ot.getSelectedDlItems(e),Tt.fromDom),i=!1;return(r.length||o.length)&&(n=e.selection.getBookmark(),xe(e,r,t),Ie(e,t,o),e.selection.moveToBookmark(n),e.selection.setRng(T(e.selection.getRng())),e.nodeChanged(),i=!0),i}function Be(e){return _e(e,"Indent")}function Pe(e){return _e(e,"Outdent")}function Me(e){return _e(e,"Flatten")}function Ue(n,e){d.each(e,function(e,t){n.setAttribute(t,e)})}function Fe(e,t,n){var r,o;r=(r=n)["list-style-type"]||null,e.setStyle(t,"list-style-type",r),e=e,Ue(t=t,(o=n)["list-attributes"]),d.each(e.select("li",t),function(e){Ue(e,o["list-item-attributes"])})}function je(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&y(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(N(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function He(i,u,s){void 0===s&&(s={});var e,t=i.selection.getRng(!0),a="LI",n=Ot.getClosestListRootElm(i,i.selection.getStart(!0)),c=i.dom;"false"!==c.getContentEditable(i.selection.getNode())&&("DL"===(u=u.toUpperCase())&&(a="DT"),e=L(t),d.each(function(n,e,r){for(var o,i=[],u=n.dom,t=je(n,e,!0,r),s=je(n,e,!1,r),a=[],c=t;c&&(a.push(c),c!==s);c=c.nextSibling);return d.each(a,function(e){if(N(n,e))return i.push(e),void(o=null);if(u.isBlock(e)||y(e))return y(e)&&u.remove(e),void(o=null);var t=e.nextSibling;f.isBookmarkNode(e)&&(N(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=u.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e))}),i}(i,t,n),function(e){var t,n,r,o=e.previousSibling;o&&m(o)&&o.nodeName===u&&function(e,t,n){t=e.getStyle(t,"list-style-type"),n=n?n["list-style-type"]:"";return t===(n=null===n?"":n)}(c,o,s)?(t=o,e=c.rename(e,a),o.appendChild(e)):(t=c.create(u),e.parentNode.insertBefore(t,e),t.appendChild(e),e=c.rename(e,a)),n=c,r=e,e=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],d.each(e,function(e){var t;return n.setStyle(r,((t={})[e]="",t))}),Fe(c,t,s),nn(i.dom,t)}),i.selection.setRng(D(e)))}function $e(e,t,n){return o=n,(r=t)&&o&&m(r)&&r.nodeName===o.nodeName&&(r=t,o=n,(e=e).getStyle(r,"list-style-type",!0)===e.getStyle(o,"list-style-type",!0))&&(n=n,t.className===n.className);var r,o}function qe(o,e,t,i,u){var n;e.nodeName!==i||rn(u)?(n=L(o.selection.getRng(!0)),d.each([e].concat(t),function(e){var t,n,r;t=o.dom,n=i,r=u,(e=e).nodeName!==n?(n=t.rename(e,n),Fe(t,n,r)):Fe(t,e,r)}),o.selection.setRng(D(n))):Me(o)}function We(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),O(e,r)&&un.remove(r)):un.setStyle(r,"listStyleType","none")),m(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}function Ve(e,t,n,r){var o,i,u=t.startContainer,t=t.startOffset;if(3===u.nodeType&&(n?t<u.data.length:0<t))return u;for(o=e.schema.getNonEmptyElements(),1===u.nodeType&&(u=s.getNode(u,t)),i=new c(u,r),n&&C(e.dom,u)&&i.next();u=i[n?"next":"prev2"]();){if("LI"===u.nodeName&&!u.hasChildNodes())return u;if(o[u.nodeName])return u;if(3===u.nodeType&&0<u.data.length)return u}}function ze(e,t){return 1===(t=t.childNodes).length&&!m(t[0])&&e.isBlock(t[0])}function Ke(e,t,n){var r,o,i=ze(e,n)?n.firstChild:n;if(ze(o=e,n=t)&&o.remove(n.firstChild,!0),!O(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)}function Xe(t,e,n){var r,o=e.parentNode;b(t,e)&&b(t,n)&&(m(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&y(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&y(o)&&e.hasChildNodes()&&t.remove(o),O(t,n,!0)&&t.$(n).empty(),Ke(t,e,n),r&&n.appendChild(r),n=zt(Tt.fromDom(n),Tt.fromDom(e))?t.getParents(e,m,n):[],t.remove(e),_(n,function(e){O(t,e)&&e!==t.getRoot()&&t.remove(e)}))}function Qe(e,t,n,r){var o,i,u,s=e.dom;s.isEmpty(r)?(i=n,u=r,(o=e).dom.$(u).empty(),Xe(o.dom,i,u),o.selection.setCursorLocation(u)):(t=L(t),Xe(s,n,r),e.selection.setRng(D(t)))}function Ye(e,t){var n,r=e.dom,o=e.selection,i=o.getStart(),u=Ot.getClosestListRootElm(e,i);if(n=r.getParent(o.getStart(),"LI",u)){if((i=n.parentNode)===e.getBody()&&O(r,i))return!0;if(i=T(o.getRng(!0)),(o=r.getParent(Ve(e,i,t,u),"LI",u))&&o!==n)return t?Qe(e,i,o,n):(r=e,u=n,n=o,i=L(i=i),Xe(r.dom,u,n),i=D(i),r.selection.setRng(i)),!0;if(!o&&!t)return Me(e),!0}return!1}function Ge(r,o){var i=r.dom,e=r.selection.getStart(),u=Ot.getClosestListRootElm(r,e),s=i.getParent(e,i.isBlock,u);if(s&&i.isEmpty(s)){var e=T(r.selection.getRng(!0)),a=i.getParent(Ve(r,e,o,u),"LI",u);if(a)return r.undoManager.transact(function(){var e,t,n;t=s,n=u,n=(e=i).getParent(t.parentNode,e.isBlock,n),e.remove(t),n&&e.isEmpty(n)&&e.remove(n),on.mergeWithAdjacentLists(i,a.parentNode),r.selection.select(a,!0),r.selection.collapse(o)}),!0}return!1}function Je(e,t){return e.selection.isCollapsed()?Ye(r=e,o=t)||Ge(r,o):(o=(n=e).selection.getStart(),e=Ot.getClosestListRootElm(n,o),!!(n.dom.getParent(o,"LI,DT,DD",e)||0<Ot.getSelectedListItems(n).length)&&(n.undoManager.transact(function(){n.execCommand("Delete"),sn(n.dom,n.getBody())}),!0));var n,r,o}function Ze(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}}function et(t,r){return function(e){var n=e.control;t.on("NodeChange",function(e){var t=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,v),e=-1!==t?e.parents.slice(0,t):e.parents,e=d.grep(e,m);n.active(0<e.length&&e[0].nodeName===r)})}}var tt,nt,rt,ot,it,ut=function(n){function e(){return o}function t(e){return e(n)}var r=a(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:k,isNone:w,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ut(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:A},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(w,function(e){return t(n,e)})}};return o},st={some:ut,none:Ht,from:function(e){return null==e?A:ut(e)}},at=($t=function(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===t}})("string"),ct=$t("array"),ft=$t("boolean"),dt=$t("function"),lt=$t("number"),mt=Array.prototype.slice,gt=Array.prototype.push,pt=(dt(Array.from)&&Array.from,void 0!==o.window?o.window:Function("return this;")()),ht=H,vt=function(e,t){t=ht(e,t);if(null==t)throw new Error(e+" not available on this browser");return t},yt=function(e){var t=H("ownerDocument.defaultView",e);return vt("HTMLElement",t).prototype.isPrototypeOf(e)},Nt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),St=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},Ct=function(t,e){e=I(e,function(e){return W(t,e).getOr(e)});return Nt.unique(e)},Ot={isList:function(e){e=$(e);return yt(e)},getParentList:$,getSelectedSubLists:function(e){var t,n=$(e),r=e.selection.getSelectedBlocks();return t=r,(e=n)&&1===t.length&&t[0]===e?(e=n,d.grep(e.querySelectorAll("ol,ul,dl"),function(e){return m(e)})):d.grep(r,function(e){return m(e)&&n!==e})},getSelectedListItems:q,getClosestListRootElm:St,getSelectedDlItems:function(e){return B(q(e),p)},getSelectedListRoots:function(e){var t,n,t=(n=W(t=e,t.selection.getStart()),t=B(t.selection.getSelectedBlocks(),g),n.toArray().concat(t));return Ct(e,t)}},bt=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:a(e)}},Tt={fromHtml:function(e,t){t=(t||o.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw o.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return bt(t.childNodes[0])},fromTag:function(e,t){e=(t||o.document).createElement(e);return bt(e)},fromText:function(e,t){e=(t||o.document).createTextNode(e);return bt(e)},fromDom:bt,fromPoint:function(e,t,n){e=e.dom();return st.from(e.elementFromPoint(t,n)).map(bt)}},Et=Object.keys,Lt=function(e,t){return K(e,t,z().DOCUMENT_POSITION_CONTAINED_BY)},Dt=function(){return wt(0,0)},wt=function(e,t){return{major:e,minor:t}},kt={nu:wt,detect:function(e,t){t=String(t).toLowerCase();return 0===e.length?Dt():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};e=function(e){return Number(t.replace(n,"$"+e))};return wt(e(1),e(2))}(e,t)},unknown:Dt},At="Firefox",xt=function(e){var t=e.current;return{current:t,version:e.version,isEdge:X("Edge",t),isChrome:X("Chrome",t),isIE:X("IE",t),isOpera:X("Opera",t),isFirefox:X(At,t),isSafari:X("Safari",t)}},Rt={unknown:function(){return xt({current:void 0,version:kt.unknown()})},nu:xt,edge:a("Edge"),chrome:a("Chrome"),ie:a("IE"),opera:a("Opera"),firefox:a(At),safari:a("Safari")},It="Windows",_t="Android",Bt="Solaris",Pt="FreeBSD",Mt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Q(It,t),isiOS:Q("iOS",t),isAndroid:Q(_t,t),isOSX:Q("OSX",t),isLinux:Q("Linux",t),isSolaris:Q(Bt,t),isFreeBSD:Q(Pt,t)}},Ut={unknown:function(){return Mt({current:void 0,version:kt.unknown()})},nu:Mt,windows:a(It),ios:a("iOS"),android:a(_t),linux:a("Linux"),osx:a("OSX"),solaris:a(Bt),freebsd:a(Pt)},Ft=function(e,n){return Y(e,n).map(function(e){var t=kt.detect(e.versionRegexes,n);return{current:e.name,version:t}})},jt=function(e,n){return Y(e,n).map(function(e){var t=kt.detect(e.versionRegexes,n);return{current:e.name,version:t}})},Ht=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return G(e,"edge/")&&G(e,"chrome")&&G(e,"safari")&&G(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ht=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return G(e,"chrome")&&!G(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return G(e,"msie")||G(e,"trident")}},{name:"Opera",versionRegexes:[Ht,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:($t=function(t){return function(e){return G(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$t("firefox")},{name:"Safari",versionRegexes:[Ht,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(G(e,"safari")||G(e,"mobile/"))&&G(e,"applewebkit")}}],$t=[{name:"Windows",search:$t("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return G(e,"iphone")||G(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$t("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:$t("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$t("linux"),versionRegexes:[]},{name:"Solaris",search:$t("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$t("freebsd"),versionRegexes:[]}],qt={browsers:a(Ht),oses:a($t)},Wt=function(e){var t,n,r,o=qt.browsers(),i=qt.oses(),u=Ft(o,e).fold(Rt.unknown,Rt.nu),s=jt(i,e).fold(Ut.unknown,Ut.nu);return{browser:u,os:s,deviceType:(n=u,r=e,o=(t=s).isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,u=t.isAndroid()&&3===t.version.major,e=t.isAndroid()&&4===t.version.major,s=o||u||e&&!0===/mobile/i.test(r),u=t.isiOS()||t.isAndroid(),e=u&&!s,r=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),{isiPad:a(o),isiPhone:a(i),isTablet:a(s),isPhone:a(e),isTouch:a(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:a(r)})}},Ht={detect:(rt=!(tt=function(){var e=o.navigator.userAgent;return Wt(e)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rt||(rt=!0,nt=tt.apply(null,e)),nt})},$t=(o.Node.ATTRIBUTE_NODE,o.Node.CDATA_SECTION_NODE,o.Node.COMMENT_NODE,o.Node.DOCUMENT_NODE,o.Node.DOCUMENT_TYPE_NODE,o.Node.DOCUMENT_FRAGMENT_NODE,o.Node.ELEMENT_NODE),Vt=(o.Node.TEXT_NODE,o.Node.PROCESSING_INSTRUCTION_NODE,o.Node.ENTITY_REFERENCE_NODE,o.Node.ENTITY_NODE,o.Node.NOTATION_NODE,$t),zt=Ht.detect().browser.isIE()?function(e,t){return Lt(e.dom(),t.dom())}:function(e,t){e=e.dom(),t=t.dom();return e!==t&&e.contains(t)},Kt=function(e,t){e=e.dom();if(e.nodeType!==Vt)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Xt=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),ot=$t,function(e){return e.dom().nodeType===ot}),Qt=Object.prototype.hasOwnProperty,Yt=(it=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)Qt.call(i,o)&&(n[o]=it(n[o],i[o]))}return n}),Gt=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return Gt(t)}}},Jt=function(t,n,r,e){return U(ee(e),function(e){return(Ne(e)?Jt:Ee)(t+1,n,r,e)})},Zt=tinymce.util.Tools.resolve("tinymce.Env"),en=u.DOM,tn=function(e,t,n){var r,o,i=en.select('span[data-mce-type="bookmark"]',t),u=Le(e,n),s=en.createRng();for(s.setStartAfter(n),s.setEndAfter(t),r=(s=s.extractContents()).firstChild;r;r=r.firstChild)if("LI"===r.nodeName&&e.dom.isEmpty(r)){en.remove(r);break}e.dom.isEmpty(s)||en.insertAfter(s,t),en.insertAfter(u,t),O(e.dom,n.parentNode)&&(o=n.parentNode,d.each(i,function(e){o.parentNode.insertBefore(e,n.parentNode)}),en.remove(o)),en.remove(n),O(e.dom,t)&&en.remove(t)},nn=function(e,t){var n,r=t.nextSibling;if($e(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,$e(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},rn=function(e){return"list-style-type"in e},on={toggleList:function(e,t,n){var r=Ot.getParentList(e),o=Ot.getSelectedSubLists(e);n=n||{},r&&0<o.length?qe(e,r,o,t,n):(o=t,t=n,(n=r)!==(r=e).getBody()&&(n?n.nodeName!==o||rn(t)?(e=L(r.selection.getRng(!0)),Fe(r.dom,n,t),nn(r.dom,r.dom.rename(n,o)),r.selection.setRng(D(e))):Me(r):He(r,o,t)))},mergeWithAdjacentLists:nn},un=u.DOM,sn=function(t,e){d.each(d.grep(t.select("ol,ul",e)),function(e){We(t,e)})},an=function(t){t.on("keydown",function(e){e.keyCode===i.BACKSPACE?Je(t,!1)&&e.preventDefault():e.keyCode===i.DELETE&&Je(t,!0)&&e.preventDefault()})},cn=Je,fn=function(t){return{backspaceDelete:function(e){cn(t,e)}}},dn=function(n){n.on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?Be(n):"outdent"===e&&Pe(n)}),n.addCommand("InsertUnorderedList",function(e,t){on.toggleList(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){on.toggleList(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){on.toggleList(n,"DL",t)}),n.addCommand("RemoveList",function(){Me(n)}),n.addQueryStateHandler("InsertUnorderedList",Ze(n,"UL")),n.addQueryStateHandler("InsertOrderedList",Ze(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",Ze(n,"DL"))},ln=function(e){return e.getParam("lists_indent_on_tab",!0)},mn=function(e){var t;ln(e)&&(t=e).on("keydown",function(e){e.keyCode!==i.TAB||i.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?Pe:Be)(t)&&e.preventDefault()})}),an(e)},gn=function(e){!function(e,t){e=e.settings.plugins||"";return-1!==d.inArray(e.split(/[ ,]/),t)}(e,"advlist")&&(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:et(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:et(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent"})};e.add("lists",function(e){return mn(e),gn(e),dn(e),fn(e)})}(window);
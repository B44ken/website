!function(){"use strict";function n(t){return"string"==typeof t?function(e){return-1!==e.indexOf(t)}:t instanceof RegExp?function(e){return t.test(e)}:t}function o(o,e,s){var u=[],n={};function l(e,t){var n,r,i,c=e.href;if(r=c,i=p.cacheSuffix,(c=r="string"==typeof r?r.replace("?"+i,"").replace("&"+i,""):r)&&s(c,t)&&(i=c,t=(r=o).settings,!(c=!1!==t.skin&&(t.skin||"lightgray"))||i!==(t.skin_url?r.documentBaseURI.toAbsolute(t.skin_url):g.baseURL+"/skins/"+c)+"/content"+(r.inline?".inline":"")+".min.css")){h.each(e.imports,function(e){l(e,!0)});try{n=e.cssRules||e.rules}catch(e){}h.each(n,function(e){e.styleSheet?l(e.styleSheet,!0):e.selectorText&&h.each(e.selectorText.split(","),function(e){u.push(h.trim(e))})})}}h.each(o.contentCSS,function(e){n[e]=!0}),s=s||function(e,t){return t||n[e]};try{h.each(e.styleSheets,function(e){l(e)})}catch(e){}return u}function a(e,t){var n,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(r){var i=r[1],c=r[2].substr(1).split(".").join(" "),o=h.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[i]?n.block=i:e.schema.getBlockElements()[i]||o[i.toLowerCase()]?n.selector=i:n.inline=i):r[2]&&(n={inline:"span",title:t.substr(1),classes:c}),!1!==s(e)?n.classes=c:n.attributes={class:c},n}}function f(e,t){return null===t||!1!==r(e)}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=tinymce.util.Tools.resolve("tinymce.EditorManager"),p=tinymce.util.Tools.resolve("tinymce.Env"),h=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(e){return e.getParam("importcss_merge_classes")},r=function(e){return e.getParam("importcss_exclusive")},v=function(e){return e.getParam("importcss_selector_converter")},d=function(e){return e.getParam("importcss_selector_filter")},y=function(e){return e.getParam("importcss_groups")},_=function(e){return e.getParam("importcss_append")},x=function(e){return e.getParam("importcss_file_filter")},i=a,t=function(l){l.on("renderFormatsMenu",function(e){function r(e,t){if(i=e,o=s,!(f(l,c=t)?i in o:i in c.selectors)){o=e,i=s,f(l,c=t)?i[o]=!0:c.selectors[o]=!0;o=(o=(n=l).plugins.importcss,r=e,((t=t)&&t.selector_converter?t.selector_converter:v(n)?v(n):function(){return a(n,r)}).call(o,r,t));if(o){t=o.name||m.DOM.uniqueId();return l.formatter.register(t,o),h.extend({},u.settings.itemDefaults,{text:o.title,format:t})}}var n,r,i,c,o;return null}var t,s={},i=n(d(l)),u=e.control,c=(t=y(l),h.map(t,function(e){return h.extend({},e,{original:e,selectors:{},filter:n(e.filter),item:{text:e.title,menu:[]}})}));_(l)||u.items().remove(),h.each(o(l,e.doc||l.getDoc(),n(x(l))),function(n){var e,t;-1===n.indexOf(".mce-")&&(i&&!i(n)||(e=c,t=n,0<(e=h.grep(e,function(e){return!e.filter||e.filter(t)})).length?h.each(e,function(e){var t=r(n,e);t&&e.item.menu.push(t)}):(e=r(n,null))&&u.add(e)))}),h.each(c,function(e){0<e.item.menu.length&&u.add(e.item)}),e.control.renderNew()})},c=function(t){return{convertSelectorToFormat:function(e){return i(t,e)}}};e.add("importcss",function(e){return t(e),c(e)})}();
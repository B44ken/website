!function(){"use strict";var n=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return n(t)}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=tinymce.util.Tools.resolve("tinymce.util.Tools");function x(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function g(e){return"number"==typeof(e=e.getAttribute("data-mce-index"))?""+e:e}function h(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function i(e,t){var n=[],r=p.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var a=0;a<r.length;a++){var i=g(r[a]);null!==i&&i.length&&i===t.toString()&&n.push(r[a])}return n}function d(e,t,n){var r=t.get(),a=e.dom;return(n=!1!==n)?r++:r--,a.removeClass(i(e,t.get()),"mce-match-marker-selected"),(t=i(e,r)).length?(a.addClass(i(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(t[0]),r):-1}function m(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)}function v(e,t){-1!==(e=d(e,t,!0))&&t.set(e)}function b(e,t){-1!==(e=d(e,t,!1))&&t.set(e)}function N(e){return null!==(e=g(e))&&0<e.length}function r(e,t){return function(){o(e,t)}}var c={findAndReplaceDOMText:function(e,t,n,r,a){var i,o,p,f,g,h,d,m,c=[],l=0;function s(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(0<t){t=e[t];if(!t)throw new Error("Invalid capture group");n+=e[0].indexOf(t),e[0]=t}return[n,n+e[0].length,[e[0]]]}if(p=t.ownerDocument,f=a.getBlockElements(),g=a.getWhiteSpaceElements(),h=a.getShortEndedElements(),o=function e(t){var n;if(3===t.nodeType)return t.data;if(g[t.nodeName]&&!f[t.nodeName])return"";if(n="",x(t))return"\n";if((f[t.nodeName]||h[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(t)){if(e.global)for(;i=e.exec(o);)c.push(s(i,r));else i=o.match(e),c.push(s(i,r));return c.length&&(l=c.length,function(e,t,n){var r,a,i,o,d=[],c=0,l=e,s=t.shift(),u=0;e:for(;;){if((f[l.nodeName]||h[l.nodeName]||x(l))&&c++,3===l.nodeType&&(!a&&l.length+c>=s[1]?(a=l,o=s[1]-c):r&&d.push(l),!r&&l.length+c>s[0]&&(r=l,i=s[0]-c),c+=l.length),r&&a){if(l=n({startNode:r,startNodeIndex:i,endNode:a,endNodeIndex:o,innerNodes:d,match:s[2],matchIndex:u}),c-=a.length-o,a=r=null,d=[],u++,!(s=t.shift()))break}else if(g[l.nodeName]&&!f[l.nodeName]||!l.firstChild){if(l.nextSibling){l=l.nextSibling;continue}}else if(!x(l)){l=l.firstChild;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if(l.parentNode===e)break e;l=l.parentNode}}}(t,c,(m="function"!=typeof(n=n)?(d=n.nodeType?n:p.createElement(n),function(e,t){var n=d.cloneNode(!1);return n.setAttribute("data-mce-index",t),e&&n.appendChild(p.createTextNode(e)),n}):n,function(e){var t=e.startNode,n=e.endNode,r=e.matchIndex;if(t===n){var a=t,i=a.parentNode;0<e.startNodeIndex&&(d=p.createTextNode(a.data.substring(0,e.startNodeIndex)),i.insertBefore(d,a));var o=m(e.match[0],r);return i.insertBefore(o,a),e.endNodeIndex<a.length&&(c=p.createTextNode(a.data.substring(e.endNodeIndex)),i.insertBefore(c,a)),a.parentNode.removeChild(a),o}for(var d=p.createTextNode(t.data.substring(0,e.startNodeIndex)),c=p.createTextNode(n.data.substring(e.endNodeIndex)),a=m(t.data.substring(e.startNodeIndex),r),l=0,s=e.innerNodes.length;l<s;++l){var u=e.innerNodes[l],f=m(u.data,r);u.parentNode.replaceChild(f,u)}o=m(n.data.substring(0,e.endNodeIndex),r);return(i=t.parentNode).insertBefore(d,t),i.insertBefore(a,t),i.removeChild(t),(i=n.parentNode).insertBefore(o,n),i.insertBefore(c,n),i.removeChild(n),o}))),l}}},l=function(e,t,n){for(var r,a,i=p.toArray(e.getBody().getElementsByTagName("span")),o=0;o<i.length;o++){var d=g(i[o]);null!==d&&d.length&&(d===t.get().toString()&&(r=r||i[o].firstChild,a=i[o].firstChild),h(i[o]))}if(r&&a){var c=e.dom.createRng();return c.setStart(r,0),c.setEnd(a,a.data.length),!1!==n&&e.selection.setRng(c),c}},y=function(e,t){return 0<i(e,t.get()+1).length},k=function(e,t){return 0<i(e,t.get()-1).length},s={done:l,find:function(e,t,n,r,a){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),n=a?"\\b"+n+"\\b":n;var i,o,i=(i=e,o=t,a=new RegExp(n,r?"g":"gi"),(n=i.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=i.getBody(),l(i,o,!1),c.findAndReplaceDOMText(a,r,n,!1,i.schema));return i&&(t.set(-1),t.set(d(e,t,!0))),i},next:v,prev:b,replace:function(e,t,n,r,a){var i,o,d,c,l,s=t.get();for(r=!1!==r,d=e.getBody(),o=p.grep(p.toArray(d.getElementsByTagName("span")),N),i=0;i<o.length;i++){var u=g(o[i]),f=c=parseInt(u,10);if(a||f===t.get()){for(n.length?(o[i].firstChild.nodeValue=n,h(o[i])):m(e.dom,o[i]);o[++i];){if((f=parseInt(g(o[i]),10))!==c){i--;break}m(e.dom,o[i])}r&&s--}else c>t.get()&&o[i].setAttribute("data-mce-index",c-1)}return t.set(s),r?(l=y(e,t),v(e,t)):(l=k(e,t),b(e,t)),!a&&l},hasNext:y,hasPrev:k},a=function(r,a){return{done:function(e){return s.done(r,a,e)},find:function(e,t,n){return s.find(r,a,e,t,n)},next:function(){return s.next(r,a)},prev:function(){return s.prev(r,a)},replace:function(e,t,n){return s.replace(r,a,e,t,n)}}},o=function(a,i){var o={};function d(){l.statusbar.find("#next").disabled(!1===s.hasNext(a,i)),l.statusbar.find("#prev").disabled(!1===s.hasPrev(a,i))}function c(){a.windowManager.alert("Could not find the specified string.",function(){l.find("#find")[0].focus()})}a.undoManager.add();var e=p.trim(a.selection.getContent({format:"text"})),l=a.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){a.focus(),s.done(a,i),a.undoManager.add()},onSubmit:function(e){var t,n,r;return e.preventDefault(),t=l.find("#case").checked(),r=l.find("#words").checked(),(n=l.find("#find").value()).length?o.text===n&&o.caseState===t&&o.wholeWord===r?s.hasNext(a,i)?(s.next(a,i),void d()):void c():((e=s.find(a,i,n,t,r))||c(),l.statusbar.items().slice(1).disabled(0===e),d(),void(o={text:n,caseState:t,wholeWord:r})):(s.done(a,i,!1),void l.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){l.submit()}},{text:"Replace",disabled:!0,onclick:function(){s.replace(a,i,l.find("#replace").value())||(l.statusbar.items().slice(1).disabled(!0),i.set(-1),o={})}},{text:"Replace all",disabled:!0,onclick:function(){s.replace(a,i,l.find("#replace").value(),!0,!0),l.statusbar.items().slice(1).disabled(!0),o={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){s.prev(a,i),d()}},{text:"Next",name:"next",disabled:!0,onclick:function(){s.next(a,i),d()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:e},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},u=function(e,t){e.addCommand("SearchReplace",function(){o(e,t)})},f=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:r(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:r(e,t)}),e.shortcuts.add("Meta+F","",r(e,t))};e.add("searchreplace",function(e){var t=n(-1);return u(e,t),f(e,t),a(e,t)})}();
!function(h){"use strict";function n(t){return function(e){var n=e.control;t.on("FullscreenStateChanged",function(e){n.active(e.state)})}}var t=function(e){var n=e,e=function(){return n};return{get:e,set:function(e){n=e},clone:function(){return t(n)}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(e){return{isFullscreen:function(){return null!==e.get()}}},r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=function(e,n){e.fire("FullscreenStateChanged",{state:n})},m=r.DOM,l=function(e,n){function t(){var e,n,t,i;m.setStyle(d,"height",(t=h.window,(i=h.document.body).offsetWidth&&(e=i.offsetWidth,n=i.offsetHeight),t.innerWidth&&t.innerHeight&&(e=t.innerWidth,n=t.innerHeight),{w:e,h:n}.h-(s.clientHeight-d.clientHeight)))}function i(){m.unbind(h.window,"resize",t)}var r,l=h.document.body,o=h.document.documentElement,c=n.get(),s=e.getContainer(),u=s.style,d=e.getContentAreaContainer().firstChild,a=d.style;c?(a.width=c.iframeWidth,a.height=c.iframeHeight,c.containerWidth&&(u.width=c.containerWidth),c.containerHeight&&(u.height=c.containerHeight),m.removeClass(l,"mce-fullscreen"),m.removeClass(o,"mce-fullscreen"),m.removeClass(s,"mce-fullscreen"),r=c.scrollPos,h.window.scrollTo(r.x,r.y),m.unbind(h.window,"resize",c.resizeHandler),e.off("remove",c.removeHandler),n.set(null),f(e,!1)):(c={scrollPos:{x:(c=m.getViewPort()).x,y:c.y},containerWidth:u.width,containerHeight:u.height,iframeWidth:a.width,iframeHeight:a.height,resizeHandler:t,removeHandler:i},a.width=a.height="100%",u.width=u.height="",m.addClass(l,"mce-fullscreen"),m.addClass(o,"mce-fullscreen"),m.addClass(s,"mce-fullscreen"),m.bind(h.window,"resize",t),e.on("remove",i),t(),n.set(c),f(e,!0))},o=function(e,n){e.addCommand("mceFullScreen",function(){l(e,n)})},c=function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:n(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:n(e)})};e.add("fullscreen",function(e){var n=t(null);return e.settings.inline||(o(e,n),c(e),e.addShortcut("Ctrl+Shift+F","","mceFullScreen")),i(n)})}(window);